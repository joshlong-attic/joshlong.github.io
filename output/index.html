<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>JBake</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">
	
<style type="text/css">
/* .navbar-brand img {
 height : 80px ;
 border: 1px solid grey ;
 padding :10px;
 background-color: white ;
}*/


</style>
	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
<a class="navbar-brand" href="">
	<!-- <img alt="JoshLong.com" height = "30" src="joshlong-logo.jpg" />-->
	<span style="font-size:larger;font-weight :bold;">
	Josh Long's Blog
	</span> </a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About</a></li>

            <!--
						<li><a href="feed.xml">Subscribe</a></li>
						<li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>-->
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    <div class="container">

	<div class="page-header">
		<h1>Blog</h1>
	</div>
  			<a href="jl/blogPost/tech_tip_geting_started_with_spring_boot.html"><h1>Tech Tip: Geting Started with Spring Boot</h1></a>
  			<p>27 June 2014</p>
  			<p>
<p>Spring Boot is a convention-over-configuration <a href="http://spring.io/projects/spring-boot">centric approach to application development with Spring</a>.</p>

<p>There are a few ways to get started.</p>

<p>In principal, the easiest way to get started is to just reuse somebody else's handcrafted build file and project setup. There are code-generators that make this easy. The Node-ecosystem tool <code>yo</code> offers a  code-generator  <a href="http://jhipster.github.io/"> called <code>generator-jhipster</code></a>. The projects generated with JHipster are web applications built using Maven, Spring, and Angular.js. The Groovy-language ecosystem codegenerator <a href="https://github.com/pledbrook/lazybones">Lazy Bones</a> can code-generate Spring Boot applications for you, as well.</p>

<p>For me, nothing beats the <a href="http://start.spring.io">Spring Initializr</a>. It's simply a small form that's pre-filled out with useful values. You might make sure to specify Java 1.8, and check the boxes for <code>Web</code>, <code>JPA</code> (or any of the other supported data-access technologies like MongoDB), and <code>Actuator</code>. This is a safe first-application. Once you've specified your Java revision (you <em>are</em> on Java 1.8, aren't you?), specify the type of project you'd like. Many people will know what to do with the default, a <code>Maven Project</code>. This will be importable into any IDE, straight-Eclipse, IntelliJ (Community or Ultimate), NetBeans, etc. I'd leave the version ( - the latest stable release) and the project type  set to the defaults. Click <code>Generate</code> to download a an archive. Unzip it and then import it into your favorite IDE as a Maven project.</p>

<p>If you're using  our open-source Eclipse distribution <a href="https://spring.io/tools/sts">Spring Tool Suite (STS)</a>, there are many ways to get started. We base STS on the latest-and-greatest cut of the Eclipse Java EE distribution, so it represents a stable, well-integrated distibution of Eclipse.  The Spring Tool Suite provides extra tools and niceties. One such nicety is  a dialog within the IDE that acts as a  front for the Spring Initializr.  It's nice skipping the download, unzip, and import steps!</p>

<p>The <a href="http://spring,io/guides">spring.io guides</a> provide easy-to-digest introductions to using Spring (or Spring ecosystem technologies). Each guide is backed by a Github repository that demonstrates the finished project as well as provides a base template that you can fill out when completing the guide. There's a nice feature in STS that lets you import a <em>Getting Started</em> guide directly from the IDE, by going to <code>File</code> -> <code>New</code> -> <code>Import Spring Getting Started Content</code>. This saves you the <code>git clone</code>, and IDE-import.</p>

<p>I've <a href="//www.youtube.com/embed/p8AdyMlpmPk">put together a video that shows what it looks like to use the tools in  Spring Tool Suite (STS)</a>,</p>

<iframe width="560" height="315" src="http://www.youtube.com/embed/p8AdyMlpmPk" frameborder="0" allowfullscreen></iframe>
</p>
  			<a href="jl/blogPost/spring_integration_adapters_gateways_and_channels.html"><h1>Spring Integration Adapters, Gateways, and Channels</h1></a>
  			<p>06 June 2014</p>
  			<p>
<p>A community member was a little unclear on the role of Spring Integration adapters, gateways, and channels. I put together a response and thought I'd share it here, too. Here's my response:</p>

<p>A <code>channel</code> is a named conduit between components in a system. By default, it's more or less synonymous with a <code>java.util.Queue</code>. Data goes in one side of the tunnel, comes out the other.</p>

<p>Let's ignore the discussion of <code>channel</code>s for a moment.</p>

<p>A gateway is a terminating component, like an inbound/outbound adapter. That is, messages either come in from the outside world (beyond the memory space of your Spring Integration flow) or they leave the Spring Integration flow for some external system or component (also beyond the memory space of your Spring Integration flow).</p>

<p>An adapter receives messages from an external messaging system (JMS, e-mail, SFTP, whatever) and "adapts" it to the messaging system (as a Spring Integration <code>Message&lt;T&gt;</code>). The inbound email adapter takes messages sitting in a mail-box (IMAP, or whatever) and "adapts" it to the Spring Integration <code>Message&lt;T&gt;</code> type. And vice-versa: it takes a Spring Integration <code>Message&lt;T&gt;</code> and "adapts" it to the formats required of an external system. For example, the outbound e-mail adapter takes Spring Integration <code>Message&lt;T&gt;</code>s and turns them into emails that get sent.</p>

<p>Once a message comes in, via an inbound adapter, it flows from one component to another via <code>channel</code>s. Ultimately, it might be appropriate to write that message out somewhere. You can write the message using an outbound adapter.</p>

<p>A gateway is just like an adapter, except that it can take replies. So, for example, perhaps a message comes in via JMS, and it has specified a JMS destination to which replies should be sent. The example above can be thought of as an inbound gateway. If you send a message TO a gateway and want the reply to come back via that gateway, then that's an outbound gateway. (Perhaps you've made an HTTP request on one <code>channel</code> through the gateway, and the HTTP response comes back into the system via the gateway on another <code>channel</code>).</p>

<p>The gateway can handle that sort of inbound AND outbound work for the same message flow.</p>

<ul>
<li><strong>Adapter</strong>s write out, or read in, but not both.</li>
<li><strong>Gateways</strong>  write out and wait for reply, or read in and send response. Gateways only make sense where there's the need for a reply.</li>
</ul>


<p>Returning now to <code>channel</code>s, you don't need to worry about <code>channel</code>s most of the time. I worry about them when: I want to make parts of the flow have different concurrency characteristics, when I want to make sure that the transit of messages in the system itself is durable (for example, by switching out the java.util.Queue-ish default <code>channel</code> for something that delegates to JMS for persistence), or when I want to insert auditing logic in a central place (around the <code>channel</code> through which messages flow is a great place for that sort of thing). Often, if you don't mind the default, synchronous <code>java.util.Queue</code>-like behavior, u don't even need to define a <code>channel</code>. Just specify a name where a <code>channel</code> reference is expected. As long as the names are the same, Spring Integration will create the beans for you at runtime and connect wire everything up for you.</p>

<p>In related news: check out this amazing video by <a href="https://www.youtube.com/watch?v=g3DgdSqEgzI">Spring Integration lead  Gary Russell on using the Spring Integration Java configuration API and DSL</a>.</p>
</p>
  			<a href="jl/blogPost/dont_want_to_use_maven_with_spring.html"><h1>Don&apos;t Want to use Maven with Spring?</h1></a>
  			<p>03 June 2014</p>
  			<p>
<p>A reader recently protested that he felt he had to use  Maven. I put together a reply that I've extracted here for this blog post.</p>

<p>You're most certainly not required to use Maven. We use Maven-managed dependencies pretty heavily, but, you can use those dependencies via Ant + Ivy, Maven, Gradle, SBT, Buildr (anybody remember that one?), etc. Maven just happens to be what most of the developer community is using, for better or for worse. I (personally) prefer Gradle, but I try to build examples that will work w/ the majority of readers.</p>

<p>I'm sorry we didn't get your favorite build tool. This was simply to show how to get started w/ a fairly common tool. Almost 4 years ago. We have far more up-to-date guides on, for example, <a href="https://spring.io/guides?filter=maven">Maven</a> and <a href="https://spring.io/guides?filter=gradle">Gradle</a>.</p>

<p>If you want direct downloads, please check out our <a href="http://repo.spring.io">Artifactory server</a>, and have a look at the <a href="https://github.com/spring-projects/spring-framework/wiki/Spring-repository-FAQ">Spring Repository FAQ</a></p>

<p>If you want a VERY quick starter for Spring MVC (and everything else, via Spring Boot), goto <a href="http://start.spring.io">the Spring Initialzr</a>, choose the "Web" checkbox, then choose "Generate." It'll download a <code>.zip</code> with both a Maven <code>pom.xml</code> or a Gradle <code>build.gradle</code>. Delete the one you don't want. You'll have a single <code>Application.java</code>. From there, just start coding! Eclipse, IntelliJ, and NetBeans all have great support for Maven. Our free, open-source Eclipse distribution, Spring Tool Suite (STS), has nice support for Gradle.</p>

<p>There's <a href="https://spring.io/blog/2014/04/01/spring-boot-1-0-ga-released">a 10-minute video here</a> on using Spring Boot and STS to build a REST service. This also includes a look at some of the tools STS provides to manage Maven for you. You should just be able to write code and have it bring the correct libraries in for you, automatically.</p>

<p> The nice thing about working with Spring Boot "starter" dependencies (like <code>org.springframework.boot</code>:<code>spring-boot-starter-web</code>:<code>1.0.3.RELEASE</code>) is that they represent <em>everything</em> you're likely to need to build a certain style of application. In this case, that one dependency brings in all the important bits from Spring MVC, JSON support, file upload support, embedded Tomcat, and a lot more. Just add that dependency and add a simple REST controller and you can run it, as shown in that aforementioned video. This approach should <em>hopefully</em> represent a <em>much</em> simpler workflow for using Maven or Gradle.</p>
</p>
  			<a href="jl/blogPost/devoxx_france_21.html"><h1>Devoxx France 2014</h1></a>
  			<p>19 April 2014</p>
  			<p>
<p>This last week I've been in Paris, France talking to developers about Spring 4 and Spring Boot.  I landed on Sunday, gave myself a day to recover from any jet lag.  The jetlag sorted itself off within a few days but left me very, very tired the day of a my webinar for the <a href="htp://youtube.com/springsourcedev">SpringSourceDev YouTube channel</a>. When we on the Spring team give webinars, we do two of them - one for those in Europe and the middle-east and another for north America. The hope is that this presents an opportunity for developers around the world to join the fun. So, as usual, I tested the hotel Wi-Fi's strength by conducting a Skype video call and a Google+ hangout. Worked fine. 16:00 CEST rolls around and I connect to do the first webinar, say a few words and then - (gasp!) - silence! I was disconnected! I called downstairs and asked what happened: they were changing ISPs! You could've knocked me down with a feather. I was about to address a <em>lot</em> of people and here the hotel's decided to switch ISPs! I ran down the hallway, descended and implored whoever could help to please help me. The lobby had a separate network, so I connected and presented my first webinar in the middle of a Marriot lobby as people walked by, talking, laughing, screaming. Amazing. <em>Quel cauchmar!</em></p>

<p>The second webinar went off with far less fanfare, happily.</p>

<p>This year's Devoxx was <EM>amazing</EM>! I came bearing messages of Spring 4 and Spring Boot. The talks seemed to draw a large crowd and it was clear that people are very interested in both, especially in so far as you can use the Spring 4 technologies inside of Spring Boot.</p>

<p>I'm looking forward to being at Devoxx UK in a months time and, hopefully, Devoxx Belgium later this year.</p>

<p>Now, I'm on a plane headed to Bangalore, India for the <a href="http://www.developermarch.com/developersummit/speakers.html">Great Indian Developer Summit</a> where I'll also be presenting on Spring Boot and Spring 4, among other things. Every trip to India I've ever taken has been amazing, and I don't expect this one will be any different! C'ya there!</p>


<div style = "  margin-top : 10px; margin-bottom: 10px;">
<p> I'd like to think these people were reacting to me, but my  hunch is that they're just happy because of <A href="http://projects.spring.io/spring-boot">Spring and Spring Boot</a>.  :D
</DIV>
<img src = "media/18801" width="400"/>  <br/>
<img src ="media/18800" width="400"/> <br />
<img src ="media/18805" width="400"/> <br />
<img src ="media/18803" width="400"/> <br />
<img src ="media/18806" width="400"/> <br />
<img src ="media/18804" width="400"/> <br />
<img src ="media/18807" width="400"/>
</p>
  			<a href="jl/blogPost/its_2014_happy_new_year.html"><h1>It&apos;s 2014: Happy New Year!</h1></a>
  			<p>01 January 2014</p>
  			<p>
<P> Just wanted to wish everyone a happy and healthy new year. I hope you spent it with family and  friends, and maybe a good piece of code on your mind.  </p>
<P>  The year's already off to a great start for me. For others, not so much. It seems that <a href="http://thenextweb.com/microsoft/2014/01/01/skypes-twitter-account-blog-get-hacked-sea-demanding-end-spying/">@Skype's Twitter account's been hacked</a>. Was sort of strange to see this series of Tweets this morning:  <br /> <img src = "media/18790"  width = "400" /> </P>
</p>
  			<a href="jl/blogPost/spring_boot_m6s_new_security_featur.html"><h1>Spring Boot M6&apos;s new Security features</h1></a>
  			<p>12 November 2013</p>
  			<p>
<P> <A href ="http://spring.io/projects/spring-boot">
 Spring Boot 
</a> is a super impressive way to get started. 
 Check out the various <a href="http://spring.io/guides/"><EM>Getting Started</EM> guides </a> for more on Spring Boot itself. 
Spring Boot exposes great metadata about the application from HTTP when you  depend on the <CODE>spring-boot-starter-actuator</CODE>.  

Now, with M6, you can access that same information (and more!) from SSH!  Here's a screencast I created demonstrating the feature. To enable it, you must also add the <CODE>spring-boot-starter-shell-remote</code> and 
	<CODE>spring-boot-starter-security</code>.
</P>


<iframe width="560" height="315" src="http://www.youtube.com/embed/3R1Yt2QKs38" frameborder="0" allowfullscreen></iframe> 

<P> Here's the code for the Groovy class that you can run by using the <code>spring</code> command line tool incantation: <code>spring run foo.groovy</code>:</P> 
<pre><code>
@Grab("spring-boot-starter-shell-remote")
@Grab("spring-boot-starter-security")
@Grab("spring-boot-starter-actuator")
@RestController 
class RemoteShellFriendlyController {

  @RequestMapping("/users/{id}")
	Object someData( @PathVariable int id){
        [ someId : id ]
	}
	
}
</code></pre> 

<P> In the screencast, I just use the default user and password. If you want use the same user and password from both SSH and HTTP, create a file <CODE>application.properties</CODE> and put it in the same directory as the Groovy script and put the following properties inside it: 
</P>
<PRE><CODE>
security.user.name=youruser
security.user.password=yourpassword
shell.auth=spring
</CODE></PRE>
</p>
  			<a href="jl/blogPost/a_busy_november.html"><h1>A Busy, Spring-filled November</h1></a>
  			<p>05 November 2013</p>
  			<p>
<p>Welcome to another installment of <em>This Week in Spring</em>! This week I'm in Malmo, Sweden at the fantastic <a href="http://oredev.org">Øredev conference</a>, talking to developers about <a href="http://spring.io">Spring</a>, <a href="http://cloudfoundry.org">Cloud Foundry</a>, and more! I'll be at <a href="http://www.jmaghreb.org/jmag20/">JMaghreb</a> next week and then at <a href="http://devoxx.be">Devoxx 2013</a> where I'll be talking to developers about Spring, <a href="http://cloudfoundry.org">Cloud Foundry</a>, <a href="http://rabbitmq.com">RabbitMQ</a> and more along with my pals <a href="http://twitter.com/dave_syer">Dr. Dave Syer</a>, <a href="http://twitter.com/old_sound">Alvaro Videla</a>, and <a href="https://twitter.com/andypiper">Andy Piper</a>. Looking forward to seeing you at any of these places! Ping me <a href="http://twitter.com/starbuxman">on Twitter (@starbuxman)</a> if you want to talk Spring, the cloud, big data and anyting else!</p>
 
<P> One personal highlight of Oredev, for me, personally? I got to meet <A href="http://twitter.com/xkcd">Randall Munroe</a>, creator of <A href="http://xkcd.com">XKCD</A>! I even got to hug him. I'm such a fan! 

<img src = "media/18780" />
</P>
</p>
  			<a href="jl/blogPost/web_messaging_with_spring_40s_support_for_websockets_stomp_and_sockjs.html"><h1>Web Messaging with Spring 4.0&apos;s Support for WebSockets, STOMP and Sock.js</h1></a>
  			<p>23 September 2013</p>
  			<p>
<p>Spring 4 will see some core types in Spring Integration be promoted to the core Spring framework. These types - in a new <code>spring-messaging</code> module - deal with common messaging idioms like a message (<a href="https://github.com/spring-projects/spring-framework/blob/master/spring-messaging/src/main/java/org/springframework/messaging/Message.java"><code>org.springframework.messaging.Message</code></a>), a message channel (<a href="https://github.com/spring-projects/spring-framework/blob/master/spring-messaging/src/main/java/org/springframework/messaging/MessageChannel.java"><code>org.springframework.messaging.MessageChannel</code></a>) and  message headers  (<a href="https://github.com/spring-projects/spring-framework/blob/master/spring-messaging/src/main/java/org/springframework/messaging/MessageHeaders.java"><code>org.springframework.messaging.MessageHeaders</code></a>)</p>

<p>This eventually implies a common foundation for messaging abstractions across the various Spring projects. I suspect in Spring Integration 4.0 they&#39;ll move to those core types as the primitives. It&#39;s not hard to imagine these types one day being in other messaging abstractions across Spring Data Redis, Spring AMQP, Spring Data GemFire, and Spring Integration. Right now, this gives us the ability to talk about first class support for web.next technologies like WebSockets in a future-proof API.</p>

<p>Spring core and web ninja  Rossen Stoyanchev talks at length about some of this stuff in this blog post, <a href="http://wp.spring.io/2013/07/24/spring-framework-4-0-m2-websocket-messaging-architectures/?utm_source"><em>Spring Framework 4.0 M2: Websocket Messaging Architectures</em></a>. I think, however, you&#39;d get a lot more by letting his <a href="https://github.com/rstoyanchev/spring-websocket-portfolio">kick-ass Stock Trading application do the talking</a>. The easiest way by far is to simply run <code>mvn jetty:run</code> in the same directory as the <code>pom.xml</code> file is.</p>

<p><img src = "media/18765" /></p>
</p>
  			<a href="jl/blogPost/data_integration_stream_processing_and_spring_xd.html"><h1>Data Integration, Stream Processing and Spring XD</h1></a>
  			<p>22 September 2013</p>
  			<p>
<h1>The Value of Streaming Processing and Spring XD</h1>

<p>I really enjoyed GridGain CEO Nikita Ivanov&#39;s post on <a href="http://gridgaintech.wordpress.com/2013/09/18/four-myths-of-in-memory-computing/"><em>Four Myths of In-Memory Computing</em></a>. He nicely explains some of the applications of in-memory computing. While all his points were good, I was really happy to see him touch on <a href=""><em>stream processing</em></a> as a use case.</p>

<blockquote>
<p>I also think that in-memory databases are important use case… for today. They solve a specific use case that everyone readily understands, i.e. faster system of records. It’s sort of a low hanging fruit of in-memory computing and it gets in-memory computing popularized. I do, however, think that the long term growth for in-memory computing will come from streaming use cases. Let me explain. <em>Streaming processing is typically characterized by a massive rate at which events are coming into a system</em>. Number of potential customers we’ve talked to indicated to us that they need to process a sustained stream of up to 100,000 events per second with out a single event loss. For a typical 30 seconds sliding processing window we are dealing with 3,000,000 events shifting by 100,000 every second which have to be individually indexed, continuously processed in real-time and eventually stored. This downpour will choke any disk I/O (spinning or flash). The only feasible way to sustain this load and corresponding business processing is to use in-memory computing technology. There’s simply no other storage technology today that support that level of requirements. <strong>So we strongly believe that in-memory computing will reign supreme in streaming processing</strong>.</p>
</blockquote>

<p>I&#39;ve also heard this field roughly called <strong>data integration</strong>. </p>

<p>It&#39;s a very vibrant field. I like the way <a href="https://twitter.com/medriscoll">Michael E. Driscoll (@medriscoll)</a>, CEO at Metamarkets, put it: </p>

<p><img src = "media/18757" /></p>

<p><a href="http://projects.spring.io/spring-integration">Spring Integration</a> makes it dead simple to integrate with various messaging systems (JMS, AMQP, STOMP, MQTT, websockets, Twitter, Kafka, etc.)   to build <a href="http://wikipedia.org/wiki/pipe-and-filter">pipe-and-filter</a> architectures. Its API elements mirror the patterns of the same name in Gregor Hohpe and Bobby Woolf&#39;s canonical tome on the subject,  <a href="http://www.eaipatterns.com/"><em>Enterprise Integration Patterns</em></a>.  In Spring Integration, <code>Message</code>s flow from one component - a splitter, or <em>router</em>, an <em>aggregator</em>, a <em>transformer</em>, etc. - along <em>channels</em>. Components are decoupled in that they communicate only through <code>Message</code>s. <code>Message</code>s in turn have headers - a map of metadata about the payload - and a payload. </p>

<p><a href="http://projects.spring.io/spring-batch">Spring Batch</a> has great support for managing the state and orchestration of long-running, data-centric jobs. It has the ability to work with a variety of systems where input and output is most efficiently done <a href="http://en.wikipedia.org/wiki/Batch_processing"><em>in batch</em></a>. Spring Batch supports the notion of <em>job</em>s, which are composed of a sequence of <em>steps</em>. Each <em>step</em> can optionally read data, optionally process, and optionally write data. So, for example: one step might read data (<em>lots</em> of data! Millions of records! Batch will scale..) from, for example, a SQL database or a large tab delimited file. Once the data&#39;s read, a natural next step is to process it and then - once finished - write the changes somewhere.</p>

<p><em>Data integration</em>, or <em>stream processing</em>, or <em>ingestion</em>, etc. is all about managing the integration with, and accquisition of, data from varied systems and supporting its ingestion, analysis, processing and ultimate storage. </p>

<p>As Nikita points out, with data storage options so cheap these days, we can record as much data as we want. The real question is: how do we <em>process</em> it? How do we extract value out of it? Sure, it&#39;s easy to put hundreds of terabytes of Hadoop data onto an HDFS data lake, but how do you transform that data into business value? How do you integrate with other systems - online systems, warehouses, reporting? How do you accommodate the ingest of new data even in the face of a tidal data deluge? </p>

<p>To do this right, you need  data processing support (extraction, transformation, and loading) and a  event- and messaging-centric programming model to stitch together otherwise decoupled components in  distributed, messaging-centric workflows. This is where <a href="http://projects.spring.io/spring-xd"><strong>Spring XD</strong></a> comes in. Spring XD is a new project in the stream processing space. It builds on the strengths of <a href="http://projects.spring.io/Spring-Batch">Spring Batch</a>, <a href="http://projects.spring.io/Spring-Integration">Spring Integration</a>, and <a href="http://projects.spring.io/Spring-Data">Spring Data </a> and <a href="http://projects.spring.io/spring-hadoop/">Spring for Hadoop</a> to meet this new generation of challenges. </p>

<p><img src = "media/18756" /></p>

<p>That picture&#39;s fairly marketitecture-ish, but it does a nice job of sort of visualizing the place of Spring XD in your architecture <em>and</em> in understanding it, you <em>already</em> understand the programming model of Spring XD: <em>streams</em> represent the flow of data from a <em>source</em> to a <em>sink</em>. A <em>source</em> is some point of entry, like a database, syslog, HDFS, etc. A <em>sink</em>  represents the place where the data ultimately gets written to. You can put in processors along the stream to process, transform, and audit the data. A <em>tap</em> is a component that intercepts the data, but doesn&#39;t terminate the stream. In the integration world, the closest analog is a <em>wire tap</em>.   </p>

<p>I&#39;ll let you read <a href="https://spring.io/blog/2013/04/23/introducing-spring-xd/">this introductory blog post for more</a>. </p>
</p>
  			<a href="jl/blogPost/adding_the_actionbar_sherlock_project_to_an_android_application.html"><h1>Adding the ActionBar Sherlock Project to an Android Application</h1></a>
  			<p>18 September 2013</p>
  			<p>
<p><a href="http://twitter.com/royclarkson">Roy Clarkson (@royclarkson)</a> and I gave a talk at <a href="http://SpringOne2GX.com/">SpringOne2GX 2013</a> in which we talked about building REST services with an eye towards consuming those services on mobile platforms like Android and iOS. This talk demonstrates the progressive evolution of an application using Spring MVC, Spring HATEOAS, Spring Data REST, Spring Security, Spring Security OAuth, and Spring Android. The code&#39;s benefited from a lot of help from Rob Winch.</p>

<p>I am pulling this blog together to introduce how we used the <a href="http://actionbarsherlock.com/">ActionBar Sherlock project</a> in the sample application. There is nothing here related to Spring, but I thought the whole process was hard enough that some notes might help someone else. </p>

<h2>What is an ActionBar?</h2>

<p><img src="media/18751" width="300" /></p>

<p>From the <a href="http://developer.android.com/guide/topics/ui/actionbar.html">documentation</a>, the <code>ActionBar</code>:</p>

<blockquote>
<ol>
<li>Provides a dedicated space for giving your app an identity and indicating the user&#39;s location in the app.</li>
<li>Makes important actions prominent and accessible in a predictable way (such as Search).</li>
<li>Supports consistent navigation and view switching within apps (with tabs or drop-down lists).</li>
</ol>
</blockquote>

<p>The ActionBar, pictured above in an image from the Google documentation, provides a sort of hub for interaction UIs like menus, toolbars, etc., in your application. It&#39;s also a nice place to install a widget like a search field that can provide functionality and trigger behavior independent of any single view. </p>

<p>The ActionBar API (<code>android.app.ActionBar</code>), however,  is only available in Android API level 11 and greater. There is a sort of backwards compatible API called the <a href="http://developer.android.com/tools/support-library/index.html">Android Support Library</a> (<code>android.support.v7.app.ActionBar</code>) that works with versions lower than API level 11.</p>

<h2>What is the  ActionBar Sherlock?</h2>

<p>From the ActionBar Sherlock website: </p>

<blockquote>
<p><a href="http://actionbarsherlock.com/">ActionBarSherlock</a> is an extension of the <a href="http://developer.android.com/tools/support-library/index.html">support library</a> designed to facilitate the use of the action bar design pattern across all versions of Android with a single API. </p>
</blockquote>

<p>So, it provides a clean API that wraps and adapts to existing implementations if available, and otherwise does a remarkable job simulating the effect in older versions of the platform, all with no change to your code.</p>

<p>All of this works in a consistent way on the ActionBar. On devices that support the hardware <strong>Menu</strong> button, this menu is available using that button. Otherwise it shows up as shown here, as part of the ActionBar. </p>

<h2>Our Sample Application</h2>

<p>In our sample application, the user has the ability to:</p>

<ul>
<li>sign in, or out of a session</li>
<li>search for records </li>
<li>update the user profile photo</li>
</ul>

<p><img  src = "media/18752" /></p>

<h2>Using   ActionBar Sherlock</h2>

<p>The sample application uses Android <code>Fragment</code>s to make the layout more dynamic inside of a single <code>Activity</code>, so in practice there is only <em>one</em> <code>Activity</code> that needs to extend the <code>SherlockFragmentActivity</code> class. </p>

<p>To use the ActionBar, an <code>Activity</code> should extend one of the ActionBar Sherlock-provided <code>Activity</code> instances. This way, you get a reference to the ActionBar via the <code>getActionBar()</code> method. Conveniently, you won&#39;t really need that reference, though.</p>

<p>Below, I demonstrate how to setup a search field in the application. The <code>Activity#onCreateOptionsMenu(Menu)</code> callback method gives you a pointer to the <code>menu</code> reference which you may use to add menu items. </p>

<pre><code>    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        this.menu = menu;

        SearchManager searchManager = (SearchManager) 
               activity.getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = new SearchView(activity);
        searchView.setSearchableInfo(searchManager.getSearchableInfo(activity.getComponentName()));
        searchView.setQueryHint(getString(R.string.search_hint));
        searchView.setIconified(true);
        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
            @Override
            public boolean onQueryTextSubmit(String query) {
                runQuery(query);
                return true;
            }

            @Override
            public boolean onQueryTextChange(String newText) {
                return true;
            }
        });

        // search menu item       
        MenuItem menuItem  = menu.add( getString(R.string.search));
        menuItem.setTitle(title);
        menuItem.setActionView(searchView);
        menuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);        

         // ..

     }

</code></pre>

<h2> 
	Adding the ActionBar project to your Maven Build
</h2>
<P> I had to go through some fits to make the Android build work perfectly as the ActionBar Sherlock project is delivered as an Android <CODE>.apk</code> bundle, not a <CODE>.jar</CODE>. <a href="https://raw.github.com/joshlong/the-spring-rest-stack/master/code/client/android/pom.xml">Check out the build file</a> for the nitty gritty. </p>
</p>
  			<a href="jl/blogPost/doing_the_maven_dependency_dance_for_spring_android_projects.html"><h1>Doing the Maven Dependency Dance for Spring Android Projects</h1></a>
  			<p>17 September 2013</p>
  			<p>
<p><a href="http://twitter.com/royclarkson">Roy Clarkson (@royclarkson)</a> and I gave a talk at <a href="http://SpringOne2GX.com/">SpringOne2GX 2013</a> in which we talked about building REST services with an eye towards consuming those services on mobile platforms like Android and iOS. This talk demonstrates the progressive evolution of an application using Spring MVC, Spring HATEOAS, Spring Data REST, Spring Security, Spring Security OAuth, and Spring Android. The code&#39;s benefited from a lot of help from Rob Winch, </p>

<h2>Layout of the Code</h2>

<p>The code for the talk is on my <a href="http://github.com/joshlong/the-spring-rest-stack/">GitHub account (github.com/joshlong/<strong>the-spring-rest-stack</strong>)</a>. Importantly, the code lives in the <code>code</code> directory. Beneath that there are two choices:  <code>web</code> (where you&#39;ll find the <code>rest</code>, <code>hateoas</code>, <code>hateoas-data</code>, and <code>oauth</code>, <code>social</code> modules) and <code>client</code> (where you can load the Android module and the iOS module). The modules in the <code>web</code> folder  in respective order, demonstrate the evolution of a simple REST service which incorporates hypermedia, Spring Data repositories and OAuth security. The <code>social</code> module demonstrates how to build an OAuth client that consumes the service.</p>

<h2>Building and Editing the Code</h2>

<p>The project is all, at the moment, Maven based, though moving to Gradle seems imminent as that is the Google-endorsed route for Android builds.  I know the Android client to be importable and buildable using  IntelliJ IDEA&#39;s  Android support (which in theory should work in <a href="http://intellij.com/android-studio">Android Studio</a>, which is freely available). </p>

<h2>The Dependency Dance and Android</h2>

<p>We used up-to-date revisions of major libraries in our <a href="https://github.com/spring-projects/spring-android/tree/master/spring-android-rest-template">build file, linked for reference</a>. Up-to-date and sometimes bleeding edge.  The Android application uses the Spring Android project, which - basically - provides an API compatible implementation of the <code>RestTemplate</code> found in Spring core. </p>

<p>It does <em>not</em> however provide the entire framework, and if you bring in certain libraries from the core you&#39;ll get weird issues because some classes in the Spring Android modules are <em>mostly</em> the same in Spring Android and in the core, but they&#39;re not identical, due to the differing natures of the environments in which they run. The easiest way to ensure everything&#39;s OK is to explicitly exclude all Spring modules <em>except</em> the Spring Android dependencies then, <em>selectively</em>, re-introduce the types as you need them. </p>

<p>The types in the <a href="https://github.com/spring-projects/spring-android/tree/master/spring-android-rest-template">Spring Android RestTemplate module</a> provides more than enough compatibility  to let Spring Social&#39;s client machinery work unchanged on Android. This, of course, means that we can use the Spring Social-powered OAuth client in the <code>social</code> module in our Android application. Awesome!  </p>

<p>For example, while I needed the Spring Social core types and implementations, I didn&#39;t need the core Spring libraries that it brought in. So, we get this rather dramatic stanza:</p>

<pre><code>&lt;dependency&gt;    
    &lt;groupId&gt;org.springframework.social&lt;/groupId&gt;
    &lt;artifactId&gt;spring-social-core&lt;/artifactId&gt;
    &lt;version&gt;${spring-social.version}&lt;/version&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;com.h2database&lt;/groupId&gt;
            &lt;artifactId&gt;h2&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;aopalliance&lt;/groupId&gt;
            &lt;artifactId&gt;aopalliance&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;com.joshlong.restfuliterations&lt;/groupId&gt;
            &lt;artifactId&gt;services&lt;/artifactId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;    
</code></pre>

<p>These dependencies can be hard to find. Use the <code>mvn dependency:tree</code> command to see where things are being imported <em>transitively</em>. Spring Security, another library whose top level types we wanted on the <code>CLASSPATH</code>, also required <code>exclusion</code> elements because it drags in Spring core. </p>

<h2>Some Classes - like JAXB - You Just Can&#39;t Avoid</h2>

<p>Any class that&#39;s not in Android&#39;s JDK-class whitelist is not available on Android and thus renders code that depends on it incompatible. Some classes, like those in the JAXB module, are hard to ignore as they&#39;re pervasive. I wanted to use the Spring HATEOAS <code>Resource</code>, <code>Link</code>, types. These types are used as representations of various entities in REST responses that are sometimes rendered as XML using JAXB, they could not be loaded in Android! So, I <a href="https://github.com/joshlong/the-spring-rest-stack/tree/master/code/client/android/src/org/springframework/hateoas">had to copy those types locally</a> and mirror the package structure and remove the offending annotations. Hopefully I can clean this up going forward. </p>
</p>
  			<a href="jl/blogPost/introducing_spring_boot.html"><h1>Introducing Spring Boot</h1></a>
  			<p>07 August 2013</p>
  			<p>
<P> Also, have you seen the <A href="http://blog.springsource.org/2013/08/06/spring-boot-simplifying-spring-for-everyone/"> amazing news</a>? We just released <A href="https://github.com/SpringSource/spring-boot#spring-boot">Spring Boot</a>, which makes it dead simple to do application development with Spring.  

A working REST application (its entirety!) can fit in a single tweet! Here's a groovy-language <CODE>@Controller</CODE>:
</p>

<PRE><CODE>@Controller
class ThisWillActuallyRun {

    @RequestMapping("/")
    @ResponseBody
    String home() {
        return "Hello World!"
    }
}
</CODE></PRE>
</p>
  			<a href="jl/blogPost/springone2gx_2013_is_coming.html"><h1>SpringOne2GX 2013 is Coming!</h1></a>
  			<p>07 August 2013</p>
  			<p>
<p> 
 <IMG src = "media/18738" width ="300"  style = "float: left; margin-right:10px; "/>
Have you booked your tickets for <strong><a href="http://www.springone2gx.com/conference/santa_clara/2013/09/home">SpringOne2GX</a></strong>?  This year&#39;s show is a special one. In my work as the Spring Developer Advocate, I speak at <em>many</em> conferences all around the world. Ask any developer with a pulse, and they&#39;ll confirm that big data (and Hadoop), reactive web applications, REST, mobile application development, and cloud computing are sizzling hot topics today. Pivotal, and Spring, support today's developers, and SpringOne2GX's agenda represents in my estimation the perfect blend of content for today&#39;s developers. Check out <a href="https://springone2gx.com/conference/santa_clara/2013/09/springone/event_schedule">the agenda</a>. We&#39;ve just recently added talks on <a href="http://www.springone2gx.com/conference/santa_clara/2013/09/session?id=29165">big data</a>, and <a href="http://www.springone2gx.com/conference/santa_clara/2013/09/session?id=29425">REST service security with OAuth</a>. This will be our first show under <a href="http://gopivotal.com">Pivotal</a>, and it&#39;s the only place where you can talk to the developers working on the technologies you care about both at SpringSource and in the community. As you know, we&#39;ve just announced our Cloud Foundry conference, <a href="http://platformcf.com">Platform</a>, and SpringOne2GX full pass ticket holders may register for that show - which is at the same venue as SpringOne2GX just two days earlier - for free! If I had to pay for just one show a year, this would be that show.  Hurry the early bird rate expires this friday!</p>
</p>
  			<a href="jl/blogPost/icloud_part_1.html"><h1>iCloud (Part #1)</h1></a>
  			<p>01 July 2013</p>
  			<p>
<p>I really liked Apple's iCloud when I first started playing with it. The idea is many-pronged. </p>

<p>Apple's in the SaaS business: they've got email, calendaring, messaging, and a whole slew of other stuff. And, if you're an application developer, then your application can also participate in iCloud, storing OSX-application or iOS application-specific state in Apple's cloud.  </p>

<p>Additionally, Apple's Operating Systems are cloud-aware. To their credit, it's fairly easy to plugin standard e-mail servers, CalDAV servers, etc., from other vendors. There are even more expedient setup processes for well-known SaaS providers like Google Accounts (Google Calendar, Gmail, Tasks, GTalk, etc.), Vimeo, Flickr, Weibo, Facebook, Twitter. You can access all of this in <strong>System Preferences</strong> -&gt; <strong>Mail, Contacts &amp; Calendars</strong>. </p>

<p>So, if you're on OSX, or an iPhone, or an iPad, in theory you could setup a calendar entry and see that same calendar entry across all devices. You could also see reminders, notes, email, etc. For me, I'm most interested in synchronzing with Google's applications. I use them at both <a href="http://gopivotal.com">Pivotal</a> and for my personal e-mail. </p>

<p>So, I set up <code>Mail.app</code>. Mail is a fine application, but it just felt underpowered. It's way better than Thunderbird, but not particularly great. I don't feel more, or less, empowered in it than I do in GMail, and at least in the GMail web app once something's visually acknowledged, it's as good as done. (no sync'ing!) Anyway, I've tried a few other things. So far I'm digging <a href="http://www.postbox-inc.com/">Postbox.app</a> for OSX, and while I love the official GMail app on iPad, I got access to <a href="http://www.wired.com/business/2013/05/gentry-underwood/">Mailbox</a>. Postbox is a fine app with a lot going for it, but for me it's mostly just that it feels snappy <em>and</em> it's offline friendly. I tried using GMail's <em>offline</em> client before, but that's a whole separate flow - a separate application - and as such isn't likely to be primed with your email when you're unexpectedly offline.</p>

<p>Mailbox, for those of you who follow the news, is a mail client for iOS that makes it dead simple to blaze through a <em>lot</em> of e-mail using gestures. It's lacking a <em>lot</em> of features. When I started using it, there was no easy to way to accept calendar invites. Forwarding email is still a nightmare. So is word wrapping in the compose e-mail panel. Yet, it's <em>still</em> so insanely popular that it was sold to Dropbox for $100 million before one person had even started using it. They even setup a waiting list stretching into the 800,000s. When I signed up, I was <em>permitted</em> to start using it within a month. Why? Because most people get a <em>lot</em> of e-mail and all the other e-mail solutions are designed with one-by-one inspection and processing workflows in mind. So, Postbox.app on the desktop, Gmail on the iPad and when at another person's computer, and Mailbox on my iPhone. All of these talking to my two Google Gmail e-mail accounts. Mailbox, by the way, doesn't even work with other mail services. Only GMail. Typing (and reading) that still shocks me. So, basically, what this application says (perhaps I'm reading between the lines?) is: <em>Gmail is so unproductive that any grossly deficient alternative that makes processing email much more productive is worth a $100 million, and is so-demanded that it merits a waiting list</em>! </p>

<p>Anyway, e-mail on Apple devices tangent aside, I really quite like the rest of the setup: Apple <code>Reminders.app</code> works nicely, as does <code>Notes.app</code> and <code>Calendar.app</code>. Just set up the appropriate services when setting up the Google accounts and these should all work out of the box. Except when they don't. One problem I encountered when working with Calendar and Reminders is that it would some times stop syncing. In this situation, I found it helpful to go to the <em>System Preferences</em> &gt; <em>Mail, Contacts &amp; Calendars</em>. Disable the <em>Calendar &amp; Reminders</em> option, then <code>mv ~/Library/Calendars ~/some_where_else</code>. Then, doing your best Windows shutdown theme hum, reboot. Re-enable everything and it should start working again. </p>

<p>The other problem I've encountered is that it's easy to get duplicate notes or reminders. The easiest way to fix this is to pick on service capable of storing notes and reminders and just stick with it, disabling the rest. For me, this is my personal GMail account. So I've disabled the Reminders from iCloud, deleted all the notes and now when I add a note in one account it appaears across the other devices. </p>

<p>I'll chime back in as I discover more.</p>
</p>
  			<a href="jl/blogPost/on_java_code_style.html"><h1>On Java Code Style</h1></a>
  			<p>19 June 2013</p>
  			<p>
<p>Many languages have a sense of &quot;idiomatic&quot; code: code that embraces the norms of that language. These idioms can often reflect the opinions of the language themselves: functional vs. object oriented vs. imperative, etc. </p>

<p>Java, on the other hand, debuted more as a simpler version of existing norms, rather than an opinion motivating people in any one direction. I would argue that - aside from understanding basics like JavaBean properties and what <code>equals</code>, <code>hashCode</code> and <code>toString</code> do - there&#39;s very little to &quot;idiomatic&quot; Java code, except perhaps compliance with Java style. </p>

<p>There have been many texts published over the years espousing Java style. Compliance with Java style will make your code imminently more readable to 99% of the Java community. Sun / Oracle have published several documents over the years espousing good guidelines for code names and conventions. <a href="http://www.ontko.com/java/java_coding_standards.html">This directory has a good listing of several style guides</a>. I&#39;d definitely recommend taking a look at the first two guides, in particular.</p>

<p>If you want <em>very</em> well structured code, then I can recommend no finer a guide than the Spring framework code itself. Here&#39;s <a href="http://www.se-radio.net/2008/01/episode-82-organization-of-large-code-bases-with-juergen-hoeller">a great podcast on some of the lengths Spring framework lead Juergen Hoeller has gone to over the years to ensure clean, well structured code</a> (code that, as I&#39;m sure you&#39;re aware, has stood the test of time and remained utterly and completely backwards compatible for more than a decade!). The Spring framework is legendary for having a REALLY great codebase. It routinely scores high on code quality tests. It&#39;s actually won awards at various conferences. This is because <a href="http://blog.springsource.org/author/juergenh/">Juergen Hoeller</a>, lead of the Spring framework, is notorious for ensuring a VERY consistent look and feel to the Spring framework. <em>ALL</em> the Spring projects follow his basic style and approach. That&#39;s why they&#39;re so easy to get started with, because they all look and feel consistent. In fact, Juergen&#39;s discipline is so famous that the act of having your code torn to shreds and rebuilt in a stylistically more consistent way is known as <em>Juergenization</em>. </p>

<p>My colleague Oliver Gierke also has a <a href="http://www.olivergierke.de/2013/03/juergenized/">great post on this anomaly, as well as a proper definition on his blog</a>. </p>
</p>
  			<a href="jl/blogPost/simplified_web_configuration_with_spring.html"><h1>Simplified Web Configuration with Spring</h1></a>
  			<p>19 June 2013</p>
  			<p>
<p>Most people know that Spring's long supported Servlet 3 Java-based initializer classes. This facility builds on Servlet 3's <code>javax.servlet.ServletContainerInitializer</code> facility. Basically, you declare a class that implements <code>org.springframework.web.WebApplicationInitializer</code> and this class will be scanned by Spring on application startup and bootstrapped. This class has one responsibility: assemble the web application&#39;s moving parts, like you would in a <code>web.xml</code>, but in code. Here&#39;s an example: </p>

<pre><code class="java">public class MyWebAppInitializer implements WebApplicationInitializer {

    @Override
    public void onStartup(ServletContext container) {

        // Create the &#39;root&#39; Spring application context
        AnnotationConfigWebApplicationContext rootContext = new AnnotationConfigWebApplicationContext();
        rootContext.register(ServiceConfiguration.class);

        // Manage the lifecycle of the root application context
        container.addListener(new ContextLoaderListener(rootContext));

        // Create the dispatcher servlet&#39;s Spring application context
        AnnotationConfigWebApplicationContext dispatcherServlet = new AnnotationConfigWebApplicationContext();
        dispatcherServlet.register(WebMvcConfiguration.class);

        // Register and map the dispatcher servlet
        ServletRegistration.Dynamic dispatcher = container.addServlet(&quot;dispatcher&quot;, new DispatcherServlet(dispatcherServlet));
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping(&quot;/&quot;);
    }

}

</code></pre>

<p>In the above example, <code>WebConfiguration</code> and <code>ServiceConfiguration</code> are Java configuration classes. <code>ServiceConfiguration</code> presumably describes how the service tier - with its data sources and transaction managers and thread pools and ORM mapping - are assembled. The <code>WebMvcConfiguration</code> class describes how the web tier - supported by Spring MVC - is put together. We use the <code>ServletContext</code> to build up the web application. But, a lot of this is procedural. We will have basically the same arrangement each time, simply plugging in different values as required. </p>

<p>The point of this post isn&#39;t to describe how Java configuration works, rather to introduce the <code>WebApplicationInitializer</code> implementation, called <code>org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer</code>.</p>

<p>To use it, you simply extend it and satisfy fill in the blinks (in the form of template methods). Here&#39;s an example:</p>

<pre><code class="java">
import com.jl.crm.services.ServiceConfiguration;
import org.springframework.context.annotation.*;
import org.springframework.data.repository.support.DomainClassConverter;
import org.springframework.data.rest.webmvc.config.RepositoryRestMvcConfiguration;
import org.springframework.format.support.FormattingConversionService;
import org.springframework.hateoas.config.EnableHypermediaSupport;
import org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter;
import org.springframework.security.web.session.HttpSessionEventPublisher;
import org.springframework.web.filter.HiddenHttpMethodFilter;
import org.springframework.web.multipart.MultipartResolver;
import org.springframework.web.multipart.support.*;
import org.springframework.web.servlet.ViewResolver;
import org.springframework.web.servlet.config.annotation.*;
import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;
import org.springframework.web.servlet.view.InternalResourceViewResolver;

import javax.servlet.*;
import java.io.File;

public class CrmWebApplicationInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {

    private int maxUploadSizeInMb = 5 * 1024 * 1024; // 5 MB

    @Override
    protected Class&lt;?&gt;[] getRootConfigClasses() {
        return new Class&lt;?&gt;[]{ServiceConfiguration.class};
    }

    @Override
    protected Class&lt;?&gt;[] getServletConfigClasses() {
        return new Class&lt;?&gt;[]{RepositoryRestMvcConfiguration.class, WebMvcConfiguration.class};
    }

    @Override
    protected String[] getServletMappings() {
        return new String[]{&quot;/&quot;};
    }

    @Override
    protected Filter[] getServletFilters() {
        return new Filter[]{new HiddenHttpMethodFilter(), new MultipartFilter(), new OpenEntityManagerInViewFilter()};
    }

    @Override
    protected void registerDispatcherServlet(ServletContext servletContext) {
        super.registerDispatcherServlet(servletContext);

        servletContext.addListener(new HttpSessionEventPublisher());

    }

    @Override
    protected void customizeRegistration(ServletRegistration.Dynamic registration) {

        File uploadDirectory = ServiceConfiguration.CRM_STORAGE_UPLOADS_DIRECTORY;

        MultipartConfigElement multipartConfigElement = 
            new MultipartConfigElement(uploadDirectory.getAbsolutePath(),
                maxUploadSizeInMb, maxUploadSizeInMb * 2, maxUploadSizeInMb / 2);

        registration.setMultipartConfig(multipartConfigElement);

    }
}
</code></pre>

<p>In typical Spring fashion, we have callbacks where Spring can&#39;t possibly devine our intents (it can&#39;t possibly know what the names of our configuration classes are, for example) but otherwise it&#39;s all taken care of for us. I had to override the default <code>ServletRegistration.Dynamic</code> instance so I could tailor where file uploads are stored by the Servlet 3 container, which I do in the <code>customizeRegistration</code> method. The rest of the code is fairly straightforward: Spring registers the <code>Filter</code>s provided by the <code>getServletFilters</code> method, it registers the configuration classes returned from the <code>getRootConfigurationClasses</code> as part of a global <code>ContextLoaderListener</code>, and it registers the configuration classes returned from the <code>getServletFilters</code> as part of the <code>DispatcherServlet</code>. This reflects the typical layering in most Spring applications: global beans and services that are potentially to be shared among multiple <code>DispatcherServlet</code> implementations are stored in the <code>ContextLoaderListener</code>, and <code>DispatcherServlet</code>-local beans are configured there.  My web configuration class is shown below. I show this mainly for completeness, but you can see I&#39;ve registered and configured <code>.jsp</code> support, as well as multipart file upload support (taking advantage of the Servlet 3-powered <code>StandardServletMultipartResolver</code>). The other thing worth mentioning is that we&#39;ve turned on Spring HATEOAS with the <code>@EnableHypermediaSupport</code>. </p>

<pre><code class="java">
@Configuration
@ComponentScan
@EnableWebMvc
@EnableHypermediaSupport
class WebMvcConfiguration extends WebMvcConfigurationSupport {
    @Bean
    public DomainClassConverter&lt;?&gt; domainClassConverter() {
        return new DomainClassConverter&lt;FormattingConversionService&gt;(mvcConversionService());
    }

    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        configurer.enable();
    }

    @Bean
    public MultipartResolver multipartResolver() {
        return new StandardServletMultipartResolver();
    }

    @Bean
    public ViewResolver internalResourceViewResolver() {
        InternalResourceViewResolver internalResourceViewResolver = new InternalResourceViewResolver();
        internalResourceViewResolver.setPrefix(&quot;/WEB-INF/crm/&quot;);
        internalResourceViewResolver.setSuffix(&quot;.jsp&quot;);
        return internalResourceViewResolver;
    }
}
</code></pre>
</p>
  			<a href="jl/blogPost/webinar_replay_building_rest_apis_with_spring.html"><h1>Webinar Replay: Building REST APIs with Spring</h1></a>
  			<p>19 June 2013</p>
  			<p>
<p> <a href="http://www.youtube.com/watch?v=SC0FPuDKei0">
 <img  style = "float: left; margin-right :10px" src = "media/18688" width = "300" /></a>

The video of my webinar on
<a href= "http://www.youtube.com/watch?v=SC0FPuDKei0"> building RESTful APIs with Spring is available online</a>. The webinar is basically a whirwind tour of Spring MVC, Spring HATEOAS (for Hypermedia), Spring Data REST (for conventions-oriented REST endpoints powered by Spring Data repositories), Spring Security and Spring Security OAuth to lock down the API, and Spring Social to consume the OAuth API in a clean, consistant manner from Java and Android.
</p>  
<P> The code is available at <a href="http://www.slideshare.net/joshlong/rest-apis-with-spring"> on my SlideShare account (vote it up if you like it!)</a> and on <a href="http://github.com/joshlong/the-spring-rest-stack">my private GitHub account (star or fork it if you like it!)</a>.  
</p> 
<P> If you have questions or comments, as always, don't hesitate to reach out to me <a href="http://twitter.com/starbuxman">on Twitter</a> or <A href="http://www.joshlong.com/jl/contact.html">by email (see this page for the email)</a>. </p>
</p>
  			<a href="jl/blogPost/moar_hypermedia.html"><h1>MOAR HYPERMEDIA PAYPAL</h1></a>
  			<p>28 May 2013</p>
  			<p>
<P> Nice to see that Paypal <a href="https://developer.paypal.com/webapps/developer/docs/api/#hateoas-links">are building more HATEOAS-friendly APIs</a>. 
 If you want to build a clean, HATEOAS-centric RESTful API, don't hesitate to <a href="https://github.com/SpringSource/spring-hateoas">check out Spring Data HATEOAS</a>.
</p>
</p>
  			<a href="jl/blogPost/dependency_injection_with_dagger_on_android.html"><h1>Dependency Injection with Dagger on Android</h1></a>
  			<p>15 May 2013</p>
  			<p>
<h2>Limitations of Android Dependency Injection Solutions</h2>

<p>A question that I often in my work as the Spring Developer Advocate at SpringSource is: <em>How do I do dependency injection in Android</em>? <a href="http://springsource.org/spring-android">Spring for Android</a> doesn&#39;t have a dependency injection story as there are a <em>lot</em> of restrictions to what an inversion-of-control (IoC) container can hope to achieve on Android. </p>

<p>First, Android controls all the important objects in an Android application including the <code>Activity</code> instances. Normally, Spring instantiates an object (&quot;bean&quot;) -satisfying any constructor injections required - and then attempts to satisfy any injection sites on fields (field injection) and through methods (setter injection). When it's done, Spring hands back the fully configured reference and makes it available for injection in other beans. As Android creates the <code>Activity</code> instance - it's not possible to simply tell Android to use a bean configured with a dependency injection container - the only thing a DI container can do is handle injections <em>after</em> the <code>Activity</code> has been created. This implies some fragile state management and explicit dependencies on the dependency injection container that is akin to the sort of hacks required to use Spring inside of EJB 2.x beans from years ago. At a minimum - it requires invasive code in the heart of your business logic components.</p>

<p>Second, reflection has historically been very slow on Android (and any constrained environment, including the original PCs that debuted Java in 1994!), and a lot of the tried-and-true solutions for byte-code manipulation don&#39;t work nearly so well on Android as they should. A lot of this has improved in recent years, but nonetheless solutions that favor compile-time weaving or other solutions that minimize reflection are preferable. </p>

<h2>Dagger</h2>

<p>With all of these limitations in mind, I still personally like <a href="https://github.com/square/dagger">Dagger</a>, from Square. Dagger provides a JSR 330 compliant dependency injection container (and so - in theory - you could run JSR 330-compliant Spring code on Android). Using it is fairly simple, except that it&#39;s a bit more invasive than I&#39;m used to in Spring. It relies on a Java agent that changes the code at compile time, inserting code that eliminates the need for costly, or sometimes impossible, reflection.</p>

<h3>A Dagger Module</h3>

<p>The simplest way to get started with it is to create a <em>module</em> class. Let&#39;s look at an example:</p>

<pre><code class="java">
import ...

// Dagger and JSR 330 APIs
import dagger.*;
import javax.inject.*;

// RestTemplate 
import org.springframework.http.converter.json.MappingJacksonHttpMessageConverter;
import org.springframework.web.client.RestTemplate;


@Module(
 injects = {
  WelcomeActivity.class
 }
)
public class CrmModule {
  // ...
} 

</code></pre>

<p>You'll note a few things of interest already. This class is annotated with the <code>@Module</code> annotation. The <code>@Module</code> annotation is more or less like Spring's <code>@Configuration</code> annotation. It tells the container that this class contains the definition of beans, which themselves are annotated with <code>@Provides</code>, much like Spring's <code>@Bean</code>-annotated configuration annotation. </p>

<p>The <code>injects</code> attribute in Dagger&#39;s <code>@Module</code> annotation enumerates all the classes that may that may receive injections that *are not defined explicitly using an <code>@Provider</code>-annotated method in the module. I think. I&#39;ll be honest, I haven&#39;t completely figured this out. The nice thing is that if you get it wrong, you get a compile-time error! Handy!  </p>

<p>As shown, we could start declaring fields or constructor arguments in our <code>WelcomeActivity</code> instance and annotating them with JSR 330&#39;s <code>@Inject</code>. When Dagger sees <code>@Inject</code>, it attempts to instantiate an instance of the bean using the default, no-args constructor and then <em>inject</em> it at the injection site.</p>

<p>However, not all beans can be provided this way. For example, if the type declared is an interface, then how&#39;s Dagger to know which implementation to provide? What if we only want one, and only one, instance (a singleton)? What if we want to inject values into a third party bean where it would be impractical to attempt to update the code with <code>@Inject</code> annotations? For all these scenarios, you can explicitly wire up the bean definitions using <em>provider</em> methods in your module, like this:</p>

<pre><code class="java">
import ...

// Dagger and JSR 330 APIs
import dagger.*;
import javax.inject.*;

// RestTemplate 
import org.springframework.http.converter.json.MappingJacksonHttpMessageConverter;
import org.springframework.web.client.RestTemplate;


@Module(
  injects = {
    WelcomeActivity.class
  }
)
public class CrmModule {
    private Crm application;
    private Context context;

    public CrmModule(Crm crm) {
        this.application = crm;
        this.context = this.application.getApplicationContext();
    }

    @Provides
    @InjectAndroidApplicationContext
    public Context provideApplicationContext() {
        return this.context;
    }

    @Singleton
    @Provides
    public RestTemplate provideRestTemplate() {
        RestTemplate restTemplate = new RestTemplate();
        restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());
        return restTemplate;
    }

    @Singleton
    @Provides // CustomerService is the interface, CustomerServiceClient is the implementation
    public CustomerService provideCustomerService(
             @InjectAndroidApplicationContext Context context, 
             RestTemplate restTemplate ){
        String baseUri = context.getString(R.string.base_uri);
        CustomerServiceClient customerServiceClient = new CustomerServiceClient( baseUri );
        customerServiceClient.setRestTemplate(restTemplate);
        return customerServiceClient;
    }

}

</code></pre>

<p>The <code>@Provides</code>-annotated methods work as expected: you construct an object in a method and the value returned is made available for consumption through injection in other beans by type(s, as it also creates a binding between any interfaces implemented by the bean. We use this to our advantage when we create the <code>CustomerService</code> bean. </p>

<p>Note that - just as with Spring&#39;s <code>@Configuration</code> class - you can declare <em>provider</em> methods with arguments and the container will attempt to provide a value for the argument based on the type of the argument. In some cases, there may be many types that satisfy the requirement and so you can use a <code>@Qualifier</code>-annotated meta-annotation, like <code>@InjectAndroidApplicationContext</code>, to specify <em>which</em> instance you want. Here, we annotate the <code>Crm</code> argument in the <code>provideCustomerService</code> method with <code>@InjectAndroidApplicationContext</code>. By using the same annotation at the provider method as well as at the site of the injection, we establish a unique binding. </p>

<h3>Using the Android <code>Application</code> instance as an Application-Wide Global <CODE>Context</CODE>.</h3>

<p>Our module class expects an instance of the current application&#39;s <code>Application</code> class. I&#39;ve specified the class <code>....Crm</code> for this application class in my <code>AndroidManifest.xml</code> through the <code>android:name</code> attribute in the <code>manifest</code> element. As I mentioned earlier, key components in an Android application, like the <code>Application</code> subclass, are instantiated, managed and destroyed by Android itself. Dagger can&#39;t <em>instantiate</em> the <code>Application</code> subclass  and provide the reference for us. Instead, we need to insert Dagger in a place that it can capture a reference to that <code>Application</code> instance. We do this in our <code>onCreate</code> method in our <code>Application</code> instance.</p>

<pre><code class="java">import ...
import android.app.Application;
import dagger.ObjectGraph;

import java.util.*;

public class Crm extends Application {

    private ObjectGraph objectGraph;

    @Override
    public void onCreate() {
        super.onCreate();
        Object[] modules = getModules().toArray();
        objectGraph = ObjectGraph.create(modules);
    }

    protected List&lt;Object&gt; getModules() {
        return Arrays.&lt;Object&gt;asList(
                new CrmModule(this)
        );
    }

    public ObjectGraph getObjectGraph() {
        return this.objectGraph;
    }
}

</code></pre>

<p>Here, in the <code>onCreate</code> method we assemble the various module classes - including our <code>CrmModule</code> -  that we want to instantiate and use it to create an <code>objectGraph</code>. Because <code>Application</code> subclasses provide an effective application-global singleton, it&#39;s convenient to stash a reference to the Dagger <code>objectGraph</code> in this class, as well. The <code>objectGraph</code> more or less corresponds to Spring&#39;s <code>ApplicationContext</code>. In our <code>onCreate</code> method we create the <code>CrmModule</code> passing in a reference to <code>this</code> which can then be used in a <code>provide</code> method in our module so that we can easily inject an Android application <code>Application</code> instance (which in turn provides a <code>Context</code>, which is a very useful sort of god object in Android applications) wherever we use Dagger for dependency injection.</p>

<h3>Dependency Injection with Android <code>Activity</code> Instances and Other Android Components</h3>

<p>Since we want to inject beans into our <code>Activity</code> subclasses, and <code>Activity</code> classes are managed by Android in the same way as <code>Application</code> instances, we need a similar hook into the <code>Activity</code>&#39;s lifecycle to let Dagger work its magic <em>after</em> the object&#39;s been created. For convenience, you&#39;ll probably have a common base-class where you can insert this behavior and then simply extend. Here is such a base-class.</p>

<pre><code class="java">import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import ...Crm;

import javax.inject.Inject;

public class CrmBaseActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Crm crm = (Crm) getApplication(); 
        crm.getObjectGraph().inject(this);
    }
}

</code></pre>

<p>The code simply obtains the current <code>Application</code> instance (the <code>Application</code> subclass, <code>Crm</code>), which we know has a pointer to the current, stashed, <code>ObjectGraph</code> instance, and then uses the <code>ObjectGraph#inject(Object)</code> method to have Dagger scan the object given as an argument and satisfy any dependencies.</p>

<p>You&#39;ll use a similar approach when dealing with other Android components like <code>Fragment</code> classes.</p>

<h2>Summary</h2>

<p>This blog has demonstrated how to use Dagger in the context of Android. Dagger also works outside of Android, of course, but if you&#39;re working outside of Android, you&#39;re better off just using Spring. For another look at how to use Dagger, check out <a href="http://square.github.io/dagger/">the Dagger introduction on the Square site</a> which focuses on Dagger, generically. </p>
</p>
  			<a href="jl/blogPost/speaking_at_the_oakland_jug_tonight_at_630.html"><h1>Speaking at the Oakland JUG tonight at 6:30</h1></a>
  			<p>24 April 2013</p>
  			<p>
<IMG   src = "media/18664" /> 
<P>Hi guys, tonight I'll be speaking at the Oakland JUG on 
 <a href="http://www.meetup.com/eastbayjug/"><EM>Multi Client Development with Spring</EM></a>. 
 The talk will be geared towards developing modern web applications that are REST-centric using Spring, Spring MVC, Spring Android, and Spring Mobile. If we have time, we could go into even more detail on other technologies like Spring Security and Spring Security OAuth.  I hope to see you guys there as it figures to be a fun time!

 On a related note, I will have my pal <A href="http://twitter.com/andypiper">Andy Piper</a> in tow.  He's a <A href="http://www.cloudfoundry.com">Cloud Foundry</a> ninja, and I'm sure he'll have answers for people with questions!
</P>
</p>
  			<a href="jl/blogPost/java_configuration_with_spring_batch.html"><h1>Java Configuration with Spring Batch</h1></a>
  			<p>14 April 2013</p>
  			<p>
<P>In <A href="http://www.joshlong.com/jl/blogPost/java_configuration.html">the first post in this series</a>,  I introduced Spring's Java configuration mechanism. There is the base configuration style, and - as we saw - there are annotations (like <CODE>@EnableWebMvc</CODE>) that turn on container-wide, and often conventions-oriented features. In the case of <CODE>@EnableWebMvc</Code>, the annotation enables Spring MVC and turns on support for correctly exposing <CODE>@Controller</CODE>-annotated beans as HTTP endpoints. Java configuration APIs of the same style as <CODE>@EnableWebMvc</CODE> can often optionally implement interfaces that are used to contribute, change, or otherwise tailor the API. Most Spring projects today offer beta-or-better APIs that work in this same manner.  
In this post, we'll look at <A href="http://springsource.org/spring-batch">Spring Batch's Java Configuration API</a> available in the upcoming 2.2 release.
</P>
 <p> Spring Batch  provides a solution for batch processing. It lets you describe jobs, which themselves have steps, which read input from some source system (a large RDBMS dataset, a large CSV file or XML document, etc.), optionally process the input, and then write the output to a destination system like an RDBMS, a file, or a message queue.
</p>
<pre><CODE>
@Configuration
@EnableBatchProcessing
public class BatchInfrastructureConfiguration   {

    @Bean
    public TaskScheduler taskScheduler() {
        return new ConcurrentTaskScheduler();
    }

    @Bean
    public PlatformTransactionManager transactionManager(DataSource ds) {
        return new DataSourceTransactionManager(ds);
    }


    @Bean
    public DataSource dataSource(Environment environment) {

        String pw = environment.getProperty("dataSource.password"),
                user = environment.getProperty("dataSource.user"),
                url = environment.getProperty("dataSource.url");

        Class<Driver> classOfDs = environment.getPropertyAsClass("dataSource.driverClassName", Driver.class);

        SimpleDriverDataSource dataSource = new SimpleDriverDataSource();
        dataSource.setPassword(pw);
        dataSource.setUrl(url);
        dataSource.setUsername(user);
        dataSource.setDriverClass(classOfDs);

        return dataSource;
    }
}

</CODE></PRE> 

<P> Once you've done this, you can start describing jobs using the Spring Batch configuration DSL. Here, we define a job named <CODE>flickrImportJob</CODE> which in turn has one step, <CODE>step1</CODE>, that in turn reads data using an <CODE>ItemReader</CODE> named <CODE>photoAlbumItemReader</CODE> and writes data using an <CODE>ItemWriter</CODE> named 
 <CODE>photoAlbumItemWriter</CODE>.
</P>
<PRE><CODE>
@Configuration
@Scope(proxyMode = ScopedProxyMode.TARGET_CLASS)
@Import(BatchInfrastructureConfiguration.class)
public class BatchImporterConfiguration {

    @Bean(name = "flickrImportJob")
    public Job flickrImportJob(
            JobBuilderFactory jobs,
            @Qualifier("step1") Step s1 
    ) {
        return jobs.get("flickrImportJob")
                .flow(s1)            
                .end()
                .build();
    }


    @Bean(name = "step1")
    public Step step1(StepBuilderFactory stepBuilderFactory,
                      @Qualifier("photoAlbumItemReader") ItemReader<PhotoSet> ir,
                      @Qualifier("photoAlbumItemWriter") ItemWriter<PhotoSet> iw
    ) {
        return stepBuilderFactory.get("step1")
                .<PhotoSet, PhotoSet>chunk(10)
                .reader(ir)
                .writer(iw)
                .build();
    }
    // ... omitting definitions of ItemReader and ItemWriters 
}
   

</CODE></PRE>
</p>
  			<a href="jl/blogPost/java_configuration_with_spring_social.html"><h1>Java Configuration with Spring Social</h1></a>
  			<p>14 April 2013</p>
  			<p>
<P>In <A href="http://www.joshlong.com/jl/blogPost/java_configuration.html">the first post in this series</a>,  I introduced Spring's Java configuration mechanism. There is the base configuration style, and - as we saw - there are annotations (like <CODE>@EnableWebMvc</CODE>) that turn on container-wide, and often conventions-oriented features. In the case of <CODE>@EnableWebMvc</Code>, the annotation enables Spring MVC and turns on support for correctly exposing <CODE>@Controller</CODE>-annotated beans as HTTP endpoints. Java configuration APIs of the same style as <CODE>@EnableWebMvc</CODE> can often optionally implement interfaces that are used to contribute, change, or otherwise tailor the API. Most Spring projects today offer beta-or-better APIs that work in this same manner.  
In this post, we'll look at <A href="http://springsource.org/spring-social"> Spring Social</a>.
</P>
 <p>
Spring Social a OAuth 1.0, 1.0.a and 2.0-compliant REST-services client and builds on top of this strongly typed Java bindings. Here's an example setup.
</p>
<pre><CODE>
@Configuration
@EnableJdbcConnectionRepository
@EnableFacebook(appId = "${blog.facebook.appId}", appSecret = "${blog.facebook.appSecret}")
public class SocialConfiguration {

    @Bean
    public ConnectController connectController(ConnectionFactoryLocator connectionFactoryLocator, 
                                               ConnectionRepository connectionRepository) {
        return new ConnectController(connectionFactoryLocator, connectionRepository);
    }

    @Bean
    public ProviderSignInController providerSignInController(
            ConnectionFactoryLocator connectionFactoryLocator, 
            UsersConnectionRepository usersConnectionRepository) {
        
        return new ProviderSignInController(connectionFactoryLocator, usersConnectionRepository, new SignInAdapter() {
            @Override
            public String signIn(String userId, Connection<?> connection, NativeWebRequest request) {
                return SignInUtils.signIn(userId);
            }
        });
    }

    @Bean
    public DisconnectController disconnectController(Environment environment, UsersConnectionRepository usersConnectionRepository) {
        return new DisconnectController(usersConnectionRepository, environment.getProperty("blog.facebook.appSecret"));
    }

    @Bean
    public UserIdSource userIdSource() {
        return new UserIdSource() {
            @Override
            public String getUserId() {
                Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
                if (authentication == null) {
                    throw new IllegalStateException("Unable to get a ConnectionRepository: no user signed in");
                }
                return authentication.getName();
            }
        };
    }
}
</CODE></PRE> 

<P> Once you've done this, you can simply inject instances of the Facebook API binding and make calls against it. Spring Social will attempt to make the call if there is an authenticated user, and if not will prompt the user 
to approve the API access and then proceed with the call.
</P>
<PRE><CODE>
@Inject private Facebook facebook;

@RequestMapping("/hello")
public void showProfileInformation( Model model){ 
  model.addAttribute( "name", facebook.userOperations().getUserProfile().getName() );
}
</CODE></PRE>
</p>
  			<a href="jl/blogPost/java_configuration.html"><h1>Java Configuration</h1></a>
  			<p>13 April 2013</p>
  			<p>
<P>
In my last post I talked a little bit about how – at runtime – Spring beans are all just the same thing. I tried to emphasize that beans defined in any number of styles can be mixed and matched. While the XML format will always be supported, I personally like the increasingly numerous Java-configuration centric APIs and DSLs that the Spring projects are exposing. 
</P><P>
Java configuration offers some of the strengths of both XML-based configuration and convention-oriented component scanning. It’s a single definition of the components in your system, and it’s type safe and defined by Java types, not a secondary grammar that doesn’t enjoy the same validation cycle as the compiled code.
</P> 
<PRE><CODE>
@Configuration
@PropertySource("classpath:services.properties")
@ComponentScan  
@EnableTransactionManagement  
public class ServiceConfiguration {

    @Bean 
    public DataSource dataSource(Environment e) {
        org.apache.tomcat.jdbc.pool.DataSource ds = new org.apache.tomcat.jdbc.pool.DataSource();
        ds.setDriverClassName(e.getProperty("dataSource.driverClassName"));
        ds.setPassword(e.getProperty("dataSource.password"));
        ds.setUsername(e.getProperty("dataSource.user"));
        ds.setUrl(
                String.format("jdbc:postgresql://%s:%s/%s",
                        e.getProperty("dataSource.host"),
                        Integer.parseInt(e.getProperty("dataSource.port")),
                        e.getProperty("dataSource.db")));
        return ds;
    }

    @Bean 
    public PlatformTransactionManager platformTransactionManager(DataSource dataSource) {
        return new DataSourceTransactionManager(dataSource);
    }
}
</code></pre>

<P>
This class does a lot of things that you might recognize from the XML format. It’s a configuration class because of the <CODE>@Configuration</CODE> annotation. You feed this class to an instance of <CODE>AnnotationConfig(Web)ApplicationContext</CoDE>, which will scan the bean and look for methods annotated with <CODE>@Bean</CODE>. It invokes each in turn, giving each bean the same lifecycle services as it would an XML bean, and makes the returned value from the method available for injection. Other methods may depend on it by specifying an argument of the type, optionally qualifying it with the ID, for example, using <CODE>@Qualifier</CODE>. We turn on declarative transaction management (<CODE>@Transactional</CODE>) and define a bean that’ll be used to handle transaction management with the <CODE>@EnableTransactionManagement</CODE> annotation. Annotations of the form <CODE>@Enable*</CODE> typically correspond to *:annotation-driven elements in the XML, enabling features and component models declaratively. The <CODE>@ComponentScan</CODE> annotation tells Spring to register all components in the same package or lower as this configuration class, in this case beans annotated with <CODE>@Component</CODE> or <CODE>@Service</CODE>. The <CODE>@PropertySource</CODE> annotation tells Spring to load property values, which can then be injected with a reference to the system object called <CODE>Environment</CODE>. 
</p><P>
Then, we can easily imagine moving our application into the web tier, so we’ll setup Spring MVC using Java configuration, like this.
</p><pre><COde>
@Configuration
@EnableWebMvc
@Import(ServiceConfiguration.class)
public class WebConfiguration extends WebMvcConfigurerAdapter {

    @Bean
    public ViewResolver viewResolver() {
        InternalResourceViewResolver internalResourceViewResolver = new InternalResourceViewResolver();
        internalResourceViewResolver.setSuffix(".jsp");
        internalResourceViewResolver.setPrefix("/WEB-INF/views/");
        return internalResourceViewResolver;
    }

    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        configurer.enable();
    }
}
</code></PRE><P>
This class is too annotated with <Code>@Configuration</CODE>. It enables Spring MVC (bean validation, file upload support, REST, etc. etc.), and scans the context for beans of well known plugin objects like <CODE>ViewResolver</CODE>s. But here we see something new: the configuration class extends a base class, or implements an interface having the word “<CODE>Configurer</CODE>” in it. Typically the framework runs these callback implementing instances and uses it to tailor how it builds itself. Here, for example, we have callback methods we can implement to provide things like <code>HttpMessageConverters</code>, validation, view controllers, etc. We use <CODE>@ComponentScan</CODE> to scan and register beans (typically beans of type <CODE>@Controller</CODE>) in or below the package that the configuration class is in. And, because we want to inject references to the services we’ve just defined, we’ve used the <COde>@Import</CODE> annotation to import the bean definitions from the <CODE>ServiceConfiguration</code> class. 
</p> 
<P> 
This was by no means an exhaustive look at Java configuration, but hopefully you see that there is a lot of  convenience in this approach. You can still substitute values from external property files, you can still override and extend the frameworks, and you can still achieve a single configuration artifact – a place where you can get a bird’s eye view of the system. 
</p><P>
 There are many Spring projects that provide idiomatic, Java configuration centric APIs and DSLs as Spring core does for building services using Spring and web applications using Spring MVC.
</P>
</p>
  			<a href="jl/blogPost/one_big_bag_of_beansone_big_bag_of_beans.html"><h1>One Big Bag of Beans</h1></a>
  			<p>13 April 2013</p>
  			<p>
<P>At runtime, Spring is just a bunch of beans. Spring provides basic services like dependency injection and lifecycle management, of course, but everything else is just a bean that can be injected, and participate in all the services that the container provides. One big bag of beans. To take advantage of this, all you have to do is tell Spring about your beans. You don’t need to tell it much – just basic things, like the bean's class, optionally an <CODE>id</CODE> by which to disambiguate it, an optional scope, and information about which dependencies a bean has. If you want to build the bean in a special way, besides just using a regular no-arg constructor, you need to tell Spring what to do: use the constructor, use a factory method, etc.
</P>
<P>Before Java 5, the natural way to describe this information to Spring in the enterprise Java landscape was XML. So, that begat Spring’s XML flavor. But, as I say, this is just a format by which Spring ingests information about your classes. Metadata. There are lots of other ways. The <A href="http://grails.org/doc/latest/guide/spring.html#14.3 Runtime Spring with the Beans DSL">Groovy Bean Builder</a>. The <A href="http://blog.springsource.org/2012/12/10/introducing-spring-scala/"> Spring Scala</a> approach. At one point early on there was a property-file based approach that you could use to manage beans (not from SpringSource, obviously, but still pretty novel!) Some of you may remember the work being done by the XBean project before Spring 2 had official support for namespaces.
</P><P>
Then Java 5 came out and with it annotations. We had ways for the class files to carry the metadata with them! And very shortly after that, we saw the first annotation-centric approaches to – by convention – applying services in Spring with the <CODE>@Transactional</CODE> annotation. Then the stereotype annotations emerged -<CODE>@Controller</CODE>, <CODE>@Component</CODE>, <CODE>@Service</CODE>, etc, that – along with component scanning and <CODE>@Autowired</CODE> – made it dead simple to register beans entirely based on convention. Concurrently, work began on Spring Java Config. This approach predates Guice or CDI, for example. Spring Java Configuration lived on the side, as a separate project where the ideas could be fleshed out. In 2009, for Spring 3.0, it was merged into the core framework. </p>

<P>Remember, at runtime all of these beans exist as beans in the same, giant bag, described using the same metadata. For this reason, Spring makes it very easy to assemble applications that employ different approaches as appropriate. You can let component scanning and stereotypes carry you 80% of the way, use Java configuration to assemble everything else and then use XML DSLs in domains where an expressive DSL is available. Beans defined by component scanning can participate in AOP defined by Java configuration, etc. Beans defined in Java configuration can have injected references to beans defined in XML. One type of stuff at runtime. One big bag of beans. 
</P>
</p>
  			<a href="jl/blogPost/breaking_the_1000ms_time_to_glass_mobile_barribreaking_the_1000ms_time_to_glass_mobile_barri.html"><h1>Breaking the 1000ms Time to Glass Mobile Barrier</h1></a>
  			<p>11 April 2013</p>
  			<p>
<P>I just found this video on reddit.com, <a href="">Breaking the 1000ms Time to Glass
Mobile Barrier</a>. </p><P>
It's a video from a  Googler - <A href="http://twitter.com/igrigorik">Ilya Grigorik</a> -  on delivering applications that <EM>render</EM> in
under much less than 1000ms, not just time to first byte.
</p><P>
This is particularly interesting because he's got a  <EM>lot</EM>  of great
data points on user tendencies given slower experiences, and on
experiences on the dektop vs. mobile, etc.
</p><P>
I don't expect this is all completely new to anyone, but I certainly
learned a few things! This is a nice talk if you like performance, and   could definitely inform some of the discussion on resource pipelines, mobile, and
javascript and web applications.
</P>
</p>
  			<a href="jl/blogPost/fixing_facebook.html"><h1>Fixing Facebook</h1></a>
  			<p>31 March 2013</p>
  			<p>
<P>
 <img src = "media/18647" style = "margin-right : 10px; float: left; " />
I've been trying all sorts of things to make Facebook interesting. Some of you will know that I was super sick (puking my brains out) in China in early January this year. This left me bed ridden and bored for 3 days. Out of utter desperation and having exhausted all the news sites and comics books and tech journals - I turned to Facebook, the anus of the internet. I like my friends/family, but if I'm honest I just don't care *that* much about everything that's going on. Who does, really, after all if they're your friends you'll hear about the important stuff eventually, anyway... So I've never been a really good Facebook user. A lot of the people I know on Facebook through a shared  passion for technology. 
 This makes keeping up with them a worthy endeavour because I might learn about some interesting facet of the technology world. 
I figured Facebook was as good an outlet as anything. So I've added them, but  I wasn't doing a good job in keeping up to date until January. Since January, I've been taking a new approach, however, to expand the scope of the content on Facebook. I've started  "friending" perfect strangers or casual acquaintances. Anybody who  "friend request"s me I accept. Some requesters are spammers, of course, but as often as not it's someone who knows me via the books, blogs, conferences, twitter, etc. It's a small world, after all. 
</p><P>
The results have been  <EM>really</EM> surprising. My friends expand my world view but only in so much as they themselves like certain things, and my friends don't typically like things I vehemently dislike. That's sort of the nature of connecting with someone - familiarity and trust. So, nothing venturd, nothing gained, in following my existing friends. Perfect strangers, on the other hand, are wildcards.  Who knows what they'll put up? I *really* like the content on my wall these days. I suppose this must be obvious, but try  "friending"  perfect strangers. You'll probably make some real friends in the process.
</p><P>
I'd still argue the level of <EM>discussion</EM> <A HREF="http://www.twitter.com/starbuxman">on Twitter's</a> better simply because it forces conciseness and allows a conversation to iterate and evolve very quickly. (I couldn't write this post there, after all!) By befriending perfect strangers, though, I've at least expanded the scope of content on Facebook. Maybe the discussion'll be improved, too. 
</p>
 <P>
I also use Google+, and on Google+ my content is essentially wide open. I thus don't really need to <EM>friend</EM> anyone because it's wide-open and out there for people to see. The scope of content there is thus very good. 
  </P>
<P>
The final benefit is that - as I'm interested in the variety of content on the Facebook wall now, I've almost accidentally been able to better follow my family and friends' content, too! Small wonder, that. 
     
</p> 
<P> C'ya on <A href="http://facebook.com/starbuxman">Facebook</a>! (or <A href="http://twitter.com/starbuxman"> Twitter</a>, or <a href="https://plus.google.com/105805020312347758498/posts">Google+</a>)</P>
</p>
  			<a href="jl/blogPost/repl_vs_unit_tests_misses_the_point.html"><h1>REPL vs. Unit Tests misses the Point</h1></a>
  			<p>20 March 2013</p>
  			<p>
<P> 
  An   interesting thread emerged on Twitter today regarding ways to explore a problem: <a href="http://wikipedia.org/wiki/REPL">REPL</a> or Unit tests?   <A href="https://twitter.com/mtnygard">Michael Nygard (@mtnygard)</a> said:

  </p>
   <blockquote>Exploratory unit tests are a crappy REPL with a really slow response time.</blockquote>
  <P>
  This    - to mine own scripting and interpreted-language friendly ears - sounds 
  about right. 
  
  On the other hand, there's definitely an argument to be made for unit tests, which a lot of people did. To wit, <a href="http://twitter.com/judsonlester">@judsonlester</a> replied:

  
  
 </P>  <blockquote>
  Also: a REPL is a crappy unit test that requires a lot of extra typing and programmer recall.
  </blockquote> 
  <P> This also makes sense! 
	  So, we've got two great perspectives offering competing views. It's important to not to get too lost in the methodology and step back from it.
	  What we have here are two competing perspectives on the <EM>same</EM> agreed upon approach: better programs result from <EM>thinking</EM> about the problem space before trying to solve it.
	  I would argue that - depending on what you're trying to do - there are a lot of valid approaches. 
	  If you're trying to build your own API that others will consume - then exploring possible arrangements in  TextMate for me is far more useful than a unit test or a REPL.
	  
	  If you're trying to explore and kick the tires on an unknown API, then a REPL (if it's available!) gives you more immediate feedback. Once you've gained some facts about the behavior of the API, codify them with a unit test.  
  </p>
  <P>
	  This whole discussion, of course, centers around whether  or not your programming language of choice supports a REPL! I work principally on the JVM, particularly in Java and Scala. 
	  As Java has no REPL, it can be useful to drop into some other shell or language and use that. Groovy is great for this as it is a full featured (more-than fully featured) language
	  that you can interact with in a REPL and that can interface with JVM libraries.  
  </p><P>
In the same vein, years ago, there was a project called <A href="http://www.beanshell.org/"> BeanShell</a>, which provided a REPL for Java.   I confess I haven't heard much about it of late, probably due to   the prevalence of Groovy. 
	There was even <A href="http://jcp.org/en/jsr/detail?id=274"> a JSR (JSR 274) to advance the project</a> to a standard with the expectation that it would one day be folded into the Java platform itself. 
   </p>
   <P> 
 Anyway, I'm just thinking aloud. I thought it was an interesting thread. If you've got any thoughts, I'd love to hear about it on <A href="http://twitter.com/starbuxman">Twitter</a> or <a href="https://plus.google.com/u/0/105805020312347758498/posts">Google+</a>
   </p>
</p>
  			<a href="jl/blogPost/upgrading_to_jdk_7_on_osx.html"><h1>Upgrading to JDK 7 on OSX</h1></a>
  			<p>20 March 2013</p>
  			<p>
<p>
 <img src = "media/18642" width ="400" style = "float: left; margin-right : 10px;"/>
 I just made the jump to JDK 7 on OSX. I know, I know, I'm <EM>very</EM> behind, but when it comes to JDK iterations, I'm always a little behind. I guess I'm just more cowardly as I age... :)
 Anyway, just made the jump. This is the first release of Java on OSX that Oracle - and <EM>not</EM> Apple - is supporitng.  To make it happen, simply grab the OSX JDK from <A href="http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html">the Oracle Java SE Development Kit 7 Downloads</a> page.  
  Once it's downloaded, double click the downloaded bundle and just follow the prompt.. there might have been two prompts, but I'd be surprised if there was, it went so quickly! 
 </p>
 <P> When it's installed, you should just be able to confirm the upgrade by going to the shell and typing <CODE>java -version</CODE>. Interestingly, I didn't even need to reload my shell to see the new version. It all just worked! Nicely done, Oracle (for once)!
 </p>
<P><b>Update</b> if, for example, you wanted to remove JDK 7, <a href="http://reviews.cnet.com/8301-13727_7-57423014-263/how-to-install-and-uninstall-java-7-for-os-x/">this article might help</a>.
  
 </p>
</p>
  			<a href="jl/blogPost/springsource_bag_o_swag.html"><h1>SpringSource Bag &apos;o Swag</h1></a>
  			<p>19 March 2013</p>
  			<p>
<P> We're giving away bags 'o swag! To get some, just follow the instructions on <A href="http://springbagoswag.cloudfoundry.com/">the SpringSource Bag o' Swag website</a>! Oh, did I mention  that you could also win a <A href="http://springone2gx.com/conference/santa_clara/2013/09/home">free ticket to SpringOne2GX 2013</a>? 
 Don't delay, act now! We've given away a <EM>lot</EM> of cool stuff, already! 
</p>
<DIV style = "margin-bottom: 10px;">
<Img src = "media/18635" style = "margin-bottom:10px;" width = "500" /><br/> 
<img src = "media/18636" width = "500" />
</div>
</p>
  			<a href="jl/blogPost/the_apache_hadoop_ecosystem_visualized_in_datameer.html"><h1>The Apache Hadoop Ecosystem, Visualized in Datameer</h1></a>
  			<p>08 March 2013</p>
  			<p>
<p> I just found this amazing graphic <A href="http://blog.cloudera.com/blog/2012/07/the-hadoop-ecosystem-visualized-in-datameer/">visualizing the Hadoop ecosystem in Datameer on the Cloudera blog</a>.  

 
</p>
<Div>
 <A target="_blank" href="http://datameer2.datameer.com/blog/wp-content/uploads/2012/06/hadoop_ecosystem_d3_photoshop.jpg"> <img  width = "600" src = "media/18627" /> </a>
</div>
</p>
  			<a href="jl/blogPost/performance_and_the_restful_web.html"><h1>Multi Client Development with Spring Webinar on March 14, 2013</h1></a>
  			<p>07 March 2013</p>
  			<p>
<P>
 I'm going to be doing a webinar for <A href="http://www.springsource.org">SpringSource</A> on
 March 14th, 2013, called
 <A href="http://www.springsource.org/node/4033"><EM>Multi Client Development with Spring (and Spring MVC)</EM></a>. The webinar will feature an introduction to Spring MVC's basic component model, as well as the principles of <A href="http://en.wikipedia.org/wiki/Representational_state_transfer"><EM>REST</EM></a>.   
Once we've introduced Spring's REST support, we'll look at how to take  your application to your users by building clients that your users want to use with <A href="http://www.springsource.org/spring-mobile">Spring Mobile</a>, <A href="http://www.springsource.org/spring-android">Spring Android</a>, and <a href="http://en.wikipedia.org/wiki/HTML5">HTML5</a>.
 </p>
<P> Be sure to register now and bring questions, ideas, etc.  I look forward to seeing you at there, and we'll look at some of the amazing support  
 Spring offers for building best-of-breed web-centric, RESTful applications.
</P>
</p>
  			<a href="jl/blogPost/spring_mvc_performance_ftw.html"><h1>Spring MVC Performance FTW</h1></a>
  			<p>07 March 2013</p>
  			<p>
<P> We've all seen 
 <A href="http://raibledesigns.com/rd/entry/comparing_web_frameworks_and_html5"> Matt Raible's awesome talk</a>
 comparing  web frameworks with each other. He routinely gives this talk, often updating it as new technologies emerge. More often than not, Spring MVC and Grails emerge as leaders. These sorts of talks of course never have a conclusive winner, but, as I say, more often than not, Grails and Spring MVC emerge near - or at - the top of the stack in terms of community, ease of use, lines of code, performance, features, etc.
</p> 
<P> 
 For a very detailed dissection of performance, you might check out this talk <a href="http://www.java-tv.com/2013/02/11/jsf-gwt-springmvc-and-wicket-compared/">comparing web framework performance</a>. Matt's talk builds on the data amassed from that talk. 
</p>
</p>
  			<a href="jl/blogPost/my_post_on_spring_at_china_scale.html"><h1>My Post on Spring at China Scale</h1></a>
  			<p>06 March 2013</p>
  			<p>
<table cellpadding="0"  style = "margin-bottom:10px;" cellspacing="0" border= "0" valign = "top"><tr><td width = "200">
 <img width="200" src = "media/18616"  /> 
</td><td valign="top"><p>

 Hey guys I put up a post on the SpringSource blog, <A href="http://blog.springsource.org/2013/03/04/spring-at-china-scale-alibaba-group-alipay-taobao-and-tmall/"> 
Spring at China Scale: Alibaba Group (Alipay, Taobao, and Tmall)</a> which details some of the stuff I learned when  I visited TaoBao, TMall, Alipay, etc., under the Alibaba group in December, in China. Check it out! 
</p> 
</td></table>
</p>
  			<a href="jl/blogPost/validating_with_spring_mvc_jsr_303_and_bindingresult_arguments.html"><h1>Validating with Spring MVC, JSR 303, and BindingResult Arguments</h1></a>
  			<p>05 March 2013</p>
  			<p>
<P><B>TL;DR</B>: In your Spring MVC controller handler method, make sure that the <CODE>BindingResult</CODE> argument is immediately after the <EM>command</EM> or <em>model</em> argument. </p>
<P> 
Ran into something of an odd behavior in my Spring MVC application: 
 The following code works fine: requests come in and if there are request attributes whose names map to JavaBean-style properties on the <CODE>SignInAttempt</CODE> POJO, an instance of that POJO is created and populated with the values from the request. This POJO is then made available in the Spring MVC  controller methods that depend on them, like this one below. 

If there is a JSR 303 <CODE>@Valid</CODE> annotation on the  POJO, as in this case, Spring MVC will validate that the POJO itself complies with the constraints. If it <EM>doesn't</EM>, it will bind the errors it finds in the <CODE>BindngResult</CODe>  object, as message keys (like <CODE>Email.signInAttempt.username</code>) which can be used to display errors to the client.
 </p>
<PRE><CODE>public String signin(@ModelAttribute @Valid SignInAttempt signInAttempt, BindingResult result, Model model)</code></pre> 

<p> What <EM>won't</EM> work so well is if you bind position the <CODE>BindingResult</code> anywhere besides immediately after the <em>model</EM> / <EM>command</EM> / POJO itself as we have above. Thus, all of the following configurations will fail with an exception. 
</p> <PRE><CODE>public String signin(@ModelAttribute @Valid SignInAttempt signInAttempt, Model m, BindingResult result  ) 

public String signin(@ModelAttribute @Valid SignInAttempt signInAttempt, @RequestParam String username, BindingResult result  ) 

// etc.
</code></pre> 
 
<P> So, takeaway and rule of thumb: all model object arguments must be succeeded by a
 <CODE>BindingResult</code> in your Spring MVC request handler method.
</p>



</code></pre>
</p>
  			<a href="jl/blogPost/how_to_deploy_cloud_foundry_to_amazon_web_services_using_bosh.html"><h1>How to Deploy Cloud Foundry to Amazon Web Services using BOSH</h1></a>
  			<p>28 February 2013</p>
  			<p>
<p> 
 Today I  was fortunate enough to learn from <A href="http://www.twitter.com/drnic"> Dr. Nic</a> as he  introduced his open source utility, <A href = "https://github.com/StarkAndWayne/bosh-bootstrap"><CODE>bosh-boostrap</CODE></a>, which makes shortwork of the chores of setting up and  deploying BOSH and Cloud Foundry on AWS.   Largely, the steps are reproduced and available on his tutorial <A href="https://github.com/StarkAndWayne/bosh-cloudfoundry/#zero-to-cloud-foundry-in-a-few-hours">which he's put online</a> online.
</P> 
<P>

 BOSH is the orchestration manager for the underlying IaaS component - vSphere, Amazon Web Services or Open Stack.  
</p><P>
 BOSH in turn knows about <EM>releases</EM>, the makeup of some distributed systems, like Cloud Foundry. Cloud Foundry in turn has lots of moving parts and components, like  PostgreSQL, and NATS - the Cloud Foundry message queue.
</p><P>
Since BOSH deploys its own packages of components like PostgreSQL, there is a lot of compiling. This process takes a few hours with Dr. Nic's excellent utility. Most of that, happily, is just wait time as you wait for things to compile and upload or download. If you weren't using the  <CODE>bosh-bootstrap</code> utility, however, you'd spend a <EM>lot</EM> more time setting things up and configuring things. BOSH is very flexible, and overwhelming. <CODE>bosh-bootstrap</code> is opinionated, concise, and surfaces only the things it couldn't possibly devine by itself.  
</p>
<P> Anyway, feel free to ping <a href="http://twitter.com/drnic">Dr. Nic</a> or <A href="http://www.twitter.com/starbuxman"> me</a> on Twitter if you have questions. It was <EM>really</EM> cool to see it all startup and then be able to deploy applications to it. </p><h2> A few words of caution and advance notice: </h2> <P>

 You'll need an Amazon Web Services account. The utility will leave you with 5 very expensive nodes on Amazon Web Services as well as a  <EM>lot</EM> of configured storage. You should <b>stop</b> the instances and storage or just outright delete them when you're done if you don't intend to keep it running. 

 </p> <P> 
Also,  you'll need to have a domain you can point to this. During this process  you'll be given an IP, and you'll need to create an A-name record (for <CODE>*</code>) in your DNS configuration for your hostname and point it to that IP.
</p>
<P>  I got the application presented here on  
 <a href="http://preshavedyak.com/2012/12/09/barebones-cloud-foundry-youtube-post-2-5-ruby/">this Pre Shaved Yak blog post</a>   up and running at starbuxman.org, and a colleague got it working on his private instance as well. 
 <div style = " border:1px solid black ; margin-top: 10px; margin-bottom: 10px; ">
<img src = "media/18608" width = "700" /> 
</div>
 </P>
</p>
  			<a href="jl/blogPost/bubble_wrap.html"><h1>Bubble Wrap</h1></a>
  			<p>20 February 2013</p>
  			<p>
<p>  
  This whole conversation just struck me as being really funny. So, I shall shamelessly re-post it here.  <br/> 

<img src = "media/18600" width = "600"/> </p>
</p>
  			<a href="jl/blogPost/coffee_drinks_in_china.html"><h1>Coffee Drinks in China</h1></a>
  			<p>19 January 2013</p>
  			<p>
<P> 
 My amazing adventure in Shanghai, China is almost up. I return home to the US on January 31, and must  wind down my time here. As part of that, I need to finish my <EM>amazing</EM> stash 
'o iced coffee drinks that I've only found here in China. I don't know if you know this about me, but I <EM>love</EM> coffee. 
 And yes, before you ask, that really is the bedspread they gave me at this hotel in Shanghai. @_@

</P>
<Div style   ="padding-bottom: 10px; ">  <img src   ="media/18596"  width = "500" /></div>
</p>
  			<a href="jl/blogPost/on_damien_katz_the_unreasonable_effectiveness_of_c.html"><h1>On Damien Katz&apos; &quot;The Unreasonable Effectiveness of C&quot;</h1></a>
  			<p>19 January 2013</p>
  			<p>
<P> 
 I loved <a href="http://damienkatz.net/2013/01/the_unreasonable_effectiveness_of_c.html"> Damien Katz' blog on <EM>The Unreasonable Effectivenes of C</EM>. </a></p>
<P> I also really liked commentor <a href="http://www.infoq.com/news/2013/01/C-Language#view_93855"> Mark Peskin's input on the news re-cap of Damien's blog over on InfoQ</a>. I just wanted to offer my 2c from the perspective of someone who's done enough C to have 2c. 
</P> <P>

One thing that Damien noted is that it's rare to see really large, comprehensive framework-like APIs in C. As long you as build small, singly-focused APIs with light domains (a few typedefs / structs and functions as the 'contract') then it's very easy to 'export' the library and re-use it. This, I think, is a sweet spot for C. I would never write something in C for performance, but instead because it's simply easier to do certain things in C (kernel programming, embedded programming, anything working with the hardware, anything relying on APIs that aren't both established and widespread enough as to have warranted an cross-platform 'abstraction' in a higher level language like Java, Ruby, Python etc). 
 </p><P>
I would also try to not write a full blown system in C, simply because it doesn't 'scale' for large projects. The large projects that do use C end up re-inventing a lot of things (like 'objects' and namespacing). IMHO, there are very few domains that truly need to be in C the whole way through. Some very notable exceptions are systems level components like operating systems (Linux) or UIs like GNOME, of course. But for applications, it's easier to build out in a higher level language and 'integrate' with lower level APIs where the higher level language and platform has gaps. Java has many such 'gaps,' though some've been slowly addressed in the last decade as APIs have become commonplace across many different operating systems: event driven IO, file system notifications, file permissions and metadata, etc.
 </p><P>
Mark makes a great point about how to integrate C libraries and modules. He suggests JNI sucks, and to use messaging. I am a big fan of messaging. Fundamentally, successful use of messaging and successful use of JNI both require the same thing: you need to simplify the exported API drastically. 
 </p><P>
When using JNI, I try to never 'leak' any complex C types into my java API and vice versa, always communicating through numeric types and <CODE>char*</code> -&gt; <CODE>jstrings</code>. Even if the native code I'm exposing is C++, I'll still use the C-flavor of JNI (not C++) because it forces this canonicalization that's favorable to interop. If you keep the surface area of the C API very light, and try to avoid threading, it's easy to make it work as a native extension via Java JNI or CPYthon or MRI Ruby, etc. 
 </p><P>
Once you've gone through this process, then exposing the C API via messaging is easier because the message payloads between two systems can't, by definition, be much more complicated than the surface area of the C library. Of course, if you're using messaging, that means either writing messaging code in C, or exposing the C library to some higher level language and doing the messaging there. The nice part about messaging is that insulates your higher-level language code from your C code which - let's be honest - might be flakier than your Java code. I still won't link code written against the imagemagick C APIs directly to my application! There is some black magic in that library...! If the C code dies, the messaging system absorbs the requests until another node running the C code can pick up the slack. On the other hand, if you really are using C for performance, then messaging introduces at least a network hop, not to mention another component in the system, and you might lose any gains you made by writing it in C. In this case, it is possible to use write stable, well-behaved JNI or native extensions, but this again requires keeping the surface area small and understanding the pre-conditions nad post-conditions. No threads. Don't pass around pointers to complex objects between C and Java. Make sure you understand who's supposed to clean up memory, and when. 
</p>
</p>
  			<a href="jl/blogPost/programmer_pet_peeves.html"><h1>Programmer Pet Peeves #242942: Sheraton</h1></a>
  			<p>14 January 2013</p>
  			<p>
<P>
Sheraton's website's got some issues that drive me, a programmer, nuts. 
</p><P>
I tried to look at my past stays so that I could, in theory, get a reference number and then ask for a folio for my expense reports. I logged into the website and was presented with a <CODE>java.util.NoSuchElementException</CODE>, which - for you non-programmers geeks - says that they tried to walk through data and there was none there and they didn't handle that possibility. (Anyone who knows me knows that I've stayed at more than a few Sheratons...)
</p><P>
Then, I figured I'd work around this by talking to someone on the chat, and was greeted with the message 'Invalid ichannel: null,' which also indicates that they attempted to do something behind the scenes on the assumption that something was there that wasn't. 
</p><P>
Sometimes I wonder if people test things before they release it :/ 
</p><P>At least the meatware operator I spoke to was lovely / helpful...</p>
<div style = "margin-bottom:10px;">  <img style ="border:1px solid black" src = "media/18586" width ="500" /> </div>
<div>  <img  style ="border:1px solid black" src = "media/18587" width ="500" /> </div>
</p>
  			<a href="jl/blogPost/super_productive_sick_days.html"><h1>Super Productive Sick Days</h1></a>
  			<p>03 January 2013</p>
  			<p>
<p> I have been super sick these last two days. 
 I ate some bad alcohol or food in my new year's eve celebrations and paid for it by spending the last two days in the bathroom. It has been <em>ugly</em>! 

  </p><P> On the upside, I've lost a lot of weight and I've been  super productive! Submitted for 3 conferences, replied to a backlog of holiday emails, caught up on some reading, setup VPN for my Android phone and iPad thanks to boxpn.com, caught up with amazing people I haven't talked to in a while (owing in part to usual neglect of, and - as I've been sick - my sudden reinterest in) Facebook, started writing some pages on this chapter I've been working on for my next book (Manning's Cloud Foundry in Action), and more!
 In short: I recommend people take more sick days if they want to catch up on work.
 </P>
</p>
  			<a href="jl/blogPost/happy_new_year_and_heres_to_2013.html"><h1>Happy New Year, and Here&apos;s to 2013</h1></a>
  			<p>31 December 2012</p>
  			<p>
<p> I just wanted to state the obvious: I wish you all a wonderful and happy new year, and hope your 2012 has been as awesome as can be. Mine sure was! Here's to 2013! This year I'll ring in the new year in Shanghai, which should be interesting! </p>
</p>
  			<a href="jl/blogPost/they_think_of_everything.html"><h1>They Think of Everything</h1></a>
  			<p>31 December 2012</p>
  			<p>
<p> 
  Just bought some ramen at the store.  I love that it comes with a serving bowl. I know you're thinking, "but, who wouldn't... have.. a bowl?" And the answer is: I didn't have a bowl! But now I do. Problem solved.  The Chinese think of <EM>everything</EM>! 
<div> <img src = "media/18574" width = "400" /></div>
</p>
</p>
  			<a href="jl/blogPost/chinese_weather.html"><h1>Chinese Weather</h1></a>
  			<p>26 December 2012</p>
  			<p>
<p>In related news, I woke up to rain today.  

it's freaking <EM>cold</EM> in China. Northern parts of China - like <a href="http://wikipedia.org/wiki/harbin">Harbin</a> - already cold enough that it's famous for its ice festivals in which amazing and beautiful ice structures are  constructed  in a true winter-wonderland fashion - have seen daytime HIGHS of -22C. Nanjing, which is an hour's train ride from Shanghai, where I am, hit -6 C for daytime lows. And, when the SpringSource team and I were in Beijing for <a href="http://springonechina.cloudfoundry.com">SpringOne Beijing 2012</a> we routinely hit temperatures of -8 or -9C. Brrr! I hope you're warmer, wherever  you are.
</P>
<p> I'm originally from Los Angeles, and sometimes gets, and while I'm now in rainy San Francisco, I'm not used to this kind of cold.  I much prefer the cold to the hot mugginess of a humid summer, however, so I suppose this will just have to do.  
</p>
<p> As you can imagine, slingshotting from Beijing, China (at -8C) to Hyderabad and Bangalore in India, where it's a warm 30 C or so, has not been easy on the immune system. I've got a cold. Oh well..   </p>
</p>
  			<a href="jl/blogPost/christmas_in_shanghai.html"><h1>Christmas in Shanghai</h1></a>
  			<p>26 December 2012</p>
  			<p>
<P> Merry Christmas! Feliz Navidad! Joyeux Noel! Feliz natal! 
 </P>
<p> It's already <a href="http://en.wikipedia.org/wiki/Boxing_day">Boxing day</a>, or - as we call it   in Shanghai, "Wednesday" (I translated that from the original Mandarin for you).</p> 
<p> Christmas was such a trip here in China. It's celebrated like people in the west celebrate St. Patty's day: a chance to shop at discount sales, drink and hang out with friends, and potentially take the day off. And, shop they do. China's economy's growing, while the economies in the US and Europe have slowed. Last year, in 2011, the average affluent Chinese spent the holiday abroad and - in England, for example, spent 1300 pounds for the holiday (avergage). (By comparison, the average wealthy Englishman spent 1200 or so pounds). What an amazing phenomenon. One thing that was a big seller, the 'Christmas Apple', which - as I understand it - sounds in the Chinese language like the words for 'Christmas Eve.' What salesmanship. That said, I've never had a Christmas apple, and I think I should like to try one. I wonder if they'll have after-Christmas sales?
</P>
</p>
  			<a href="jl/blogPost/peppeduporg.html"><h1>PeppedUp.org</h1></a>
  			<p>21 December 2012</p>
  			<p>
<p> I hope you guys will permit me some time on the ol' soapbox. 
  My life is amazing, and I'm <EM> very</EM> fortunate. I haven't really done enough charity this year, though, if I'm honest. 

 It's not like I can't afford a few charitable donations, and my parents always taught me to give to those who need it or aren't so fortunate. 
  I think we all agree that charity is OK. The tension comes when we try to qualify for whom charity is appropriate.  But.. kids with cancer? I'm pretty sure we can all agree that's a pretty rough rap.  So, when I discovered a former colleague - Ron Haberle (himself a cancer survivor) - had started <a href= "http://www.peppedup.org">a charity to support and help kids with cancer</a>, 
    I donated and - since no amount I could possibly donate would be enough - I  ask you to consider donating, to this or something else. 'Tis the season, after all, and even if you're not feeling particularly charitable, I'm pretty sure donations are tax deductible, but you have to get them done before the end of the year!  
</p> <P> If you can contribute, then thanks, and if you can't, then thanks at least for reading! ;-) </p>
</p>
  			<a href="jl/blogPost/pink_people_and_shanghai_french_conne.html"><h1>A Shanghai French Connection</h1></a>
  			<p>17 December 2012</p>
  			<p>
<p>   I'm back  in  Shanghai  after the <EM>amazing</EM> <a href ="http://springonechina.cloudfoundry.com">SpringOne China</a> and <A href="http://springoneindia.cloudfoundry.com">SpringOne India</a> 
    events. Had an odd encounter today. While there are no doubt many visitors to Shanghai, and China in general,  you'd be forgiven for wondering where they are. They tend to be drowned out in the <em>throngs</EM> of locals.  

  Which is awesome. I love the locals! No complaints.  Still, it was not very surprising to learn 
yesterday -  on the news of a proposed new law in China that would let immigrants   (who spend 90 months in 10 years in China on a valid business or student visa) apply for citizenship, 
 granting much of the same rights in China as the American <EM>green card</EM> does in the US - that there have hitherto been only 600,000 legal permanent residents (all of substantial independent financial means) in China thus far. By comparison, the US grants 250,000 green cards <EM>every year</EM>. 
 </p><P>
So, when today on the metro going to the VMWare Shanghai offices I happened upon a lone other caucasoid   like me   who insisted on standing right next to me, I couldn't help but ask, "I wonder if other people think we're together?" He laughed. We chatted for a moment and then I realized he was French! I speak French. So we spoke briefly in French until the train'd arrived at his stop a few a minutes later.  
Then I started thinking about it. Since I arrived in China  on  December 2, <EM>all</EM> the other Caucasoids I've met have been French. In the hotel when I first arrived. At a few different cafes, and now there, on the metro  -- all French! 

</p><P> What does this mean? Absolutely nothing.  I have no idea. Just relaying a curious  observation. Except for the people from SpringOne China, I haven't seen any other Americans. Granted, I'm not <EM>looking</EM> for Americans, or French, or anything. Just... bumping into them.  What a wonderful, small world.

</p>
</p>
  			<a href="jl/blogPost/booking_com_rewrites_the_java_based_yui_compressor_to_perl.html"><h1>Booking.com rewrites the Java-based YUI compressor using Perl</h1></a>
  			<p>16 December 2012</p>
  			<p>
<p> <A href = "http://blog.booking.com/efficient-css-compression-in-perl.html">Booking.com has announced that they've re-written the Java-based YUI Compressor using Perl</a>. I'm used to seeing people talking about rewriting systems written in Java into other languages like Python, C, C#, Haskell, Erlang, Scala, Groovy, etc. If I'm honest I just haven't seen many new Perl programs except buried in people's system administration logic and, of course, <a href="http://puppetlabs.com/">Puppet</a>. 
</p>
<p> The results are impressive though, so this is very cool. And, I expect that this will make the tool more approachable to developers as Perl's still far easier and more pervasive than Java virtual machines on machines of developers who are not Java developers. So... cool!  
</p>
</p>
  			<a href="jl/blogPost/rest_in_peace_ravi_shankar.html"><h1>Rest in Peace Ravi Shankar</h1></a>
  			<p>12 December 2012</p>
  			<p>
<table style   ="margin-bottom: 10px;" cellpadding="0" cellspacing ="0" border="0"><tr><td  valign = "top" width = "200">
<img src = "media/18554"  width = "200"/>
</td><td width = "10"></td><td   valign = "top">
<P>   I'm in India (Bangalore and Hyderabad) and the news today is of the passing  of   Ravi Shankar, the <em>sitar virtuoso</EM> who's music influenced the <EM>Beatles</EM> in the 60s and changed the genre in some ways. 
 The first introduction to him that I had was  through the music of his daughters on   <EM><A href= "http://en.wikipedia.org/wiki/Concert_for_George">Concert for George</A></EM> (Harrison), a tribute concert to honor the late Beatle. From there, I explored his other music and in particular his influence on the <EM>Beatles</EM> and really have a lot of respect for the man.  

He was an amazingly talented musician, and all walks of music owe him a debt of gratitude. RIP <A href="http://en.wikipedia.org/wiki/Ravi_Shankar">Ravi Shankar</a>. 

</p></td></tr></table>
</p>
  			<a href="jl/blogPost/springone_beijing_and_india_trip_report.html"><h1>SpringOne Beijing and India Trip Report</h1></a>
  			<p>12 December 2012</p>
  			<p>
<p>  I  just finished <A href = "http://springonechina.cloudfoundry.com">SpringOne China</a> over the weekend. The show was absolutely amazing and the attendees were, as usual, the highlight of the show. It was such an honor to meet so many wonderful people. 
 
We <a href= "http://springonechina.cloudfoundry.com">finished SpringOne China</a> over the weekend and are today 
	at the first of two events  for  <a href="http://springoneindia.cloudfoundry.com">SpringOne India in Bangalore and SpringOne in Hyderabad</a>. 
	The shows have been really amazing! In particular, I've enjoyed  the food, the sites and the <EM>amazing</EM> community that have turned up in droves!  
 
</p> 
 <p> Tomorrow, I'll join my colleagues at the   SpringOne India Hyderabad event, the second of the two shows in India. </p> 

<table border="0" cellpadding = "5" cellspacing ="0">
  <tr>
    <td  width = "300" valign = "bottom"><span style="padding-bottom: 10px; "><img src = "media/18549" alt="" width = "300"/><br/>An attendee took a shot of me as I was giving a talk on Spring on Cloud Foundry </span></td>
    <td  width = "300"  valign = "bottom"><span style="padding-bottom: 10px; "><img src = "media/18552" alt="" width = "300"/><br/> Dr. Mark Pollack, myself, Gary Russell and Chris Richardson 
    at a restaurant in Beijing </span></td>
  </tr>
  <tr>
    <td width = "300" valign = "bottom"><img src = "media/18551" alt="" width = "300"/>  <br/> I gave a talk in Bangalore and people deluged the stage with questions and greetings. I asked the last wave of people to take a photo with me. </td>
    <td  width = "300"  valign = "bottom"><img src="media/18550" alt="" width="300" height="199" /><br/> Left to Right: Gary Russel, Josh Long, Jennifer Hickey, Jeremy  Grelle, Oliver Gierke, Chris Richardson -- the whole SpringOne India lineup</td>
  </tr>
</table>
</p>
  			<a href="jl/blogPost/shanghai_december_4th.html"><h1>Shanghai, December 4th</h1></a>
  			<p>05 December 2012</p>
  			<p>
<P> This post was written December  4th, but am only now getting a chance to post it as I've got a few minutes stuck on the tarmac in Shanghai waiting to take off. </p>
	<p>
 I arrived in Shanghai on Sunday, December 2 at around 18:30, and was received by a hotel chauffeur who 
 took me to a hotel where I could sleep. The hotel, kindly booked by the rock stars at the VMWare Shanghai team who realized I wouldn't enjoy looking for a place to live on arrival, sleepy and during particularly cold weather, was a great way to go. This morning, I woke up early, checked my email, went to the office and  - with the help of people at the office  - found a <em>service apartment</EM>. A service apartment, of course, is sort of like a long-term hotel, but short term relative to the typical duration of a real apartment or home. 
  </p><P>
	 The <a href= "http://www.booking.com/hotel/cn/shanghai-celadon-theme.html">service apartment</a>  one of my VMware Shanghai colleagues recommended  is ridiculously cheap (I think for a month I'll end up paying something like 4000 CNY, which is roughly 650 USD,  which - I would argue - is well within the reach for a lot of people) and quite effective. Kind of like an idealized hostel in most European cities: 
	 private rooms with a bathroom, adequate internet, TV, air conditioning and heat, an electric kettle and more. The only thing I'm not sure of just yet is whether they have a place to do laundry. I'm sure they must.  And, they don't particularly care if your stays are relatively ephemeral. I'm setting off on the 5th for <A href= "http://springonechina.cloudfoundry.com">SpringOne China</A> and <A href= "http://springoneindia.cloudfoundry.com">SpringOne India</A> and will be gone for 8 days, so, I simply checked out. I won't need to pay for that portion. 
	 The bathroom's nothing fancy, but the shower is quite nice and has refreshingly warm water and - once you find that the toilet paper is on the same platter as the complimentary tea and mugs in the bedroom - the toilet works well enough.  
	
 </P> 
<p> I'm quite enjoying the subway or metro here. Very convenient! 20 minutes to get to the office and I'm only a single metro stop away from <EM>Xin Tian Di</em> which, as I understand it, means "new world." A friendly place for (temporary) expats where lots of Chinese dwell as well. One thing that's taken some time to get used to is the quiet on the metro. Everyone's heads down - headsets on and all - on their mobile phones or tablets. iOS and Android both seem pervasive.  Apparently singers here make more from ringtones than they might from actual record sales. Awesome.
	
	</p>
	
	<P> Curiously, Shanghai is completely dolled up for Christmas. This is most evident in the marketplaces. For a country that has a statistically insignificant  population of Christians, this place sure does Christmas decorations well! 
		</p>
<p> Anyway, will continue tracking my progress as time permits on this blog.  For now onward to <A href="http://springonechina.cloudfoundry.com">SpringOne</a>! </p>
</p>
  			<a href="jl/blogPost/living_in_china_for_2_months.html"><h1>Living in China for 2 Months</h1></a>
  			<p>01 December 2012</p>
  			<p>
<p>Today, I'll begin another adventure, going to work in Shanghai, China, for two months where I'll be able to work with the Cloud Foundry Shanghai teams and more fully take in life in the next <em>empire</em>.
I'm not sure if this blog will be available there, but if it is, I'll try to post updates as often as I can. If you can read this in China, feel free to reach me at josh (at) joshlong (dot) com. I'd love an opportunity to potentially talk to your organization about how you're using Spring and / or Cloud Foundry, or - if you're running an event or meet-up or conference and would like a speaker, I'd also be interested in hearing from you.</P><p>And of course, I look forward to meeting any and all of you in the near future at both SpringOne India and SpringOne China events, both of which I'll be at during my time in China!</p><p>
Wish me luck! 
</p>
</p>
  			<a href="jl/blogPost/the_kettle_in_manhattan_beach_los_angeles_at_4am.html"><h1>The Kettle in Manhattan Beach, Los Angeles, at 4am</h1></a>
  			<p>27 November 2012</p>
  			<p>
<P> This is a picture of <A href= "http://www.thekettle.net/">The Kettle</A> in Los Angeles' Manhattan Beach area at 4AM. So surreal. The Kettle, by the way, is an amazing restaurant that's open 24/7 in Los Angeles and situated a block away from the Pacific Ocean. Beautiful and fun during the day. Downright amazing at 3am.  <DIV style = "margin-top: 5px;" >  

  <img  src = "media/18534" width = "800" /></DIV>
</p>
</p>
  			<a href="jl/blogPost/nice_application_to_enumerate_the_cloud_foundry_environment_properties.html"><h1>Nice Application to Enumerate the Cloud Foundry Environment Properties</h1></a>
  			<p>25 November 2012</p>
  			<p>
<P> I found <a href= "https://gho-env.cloudfoundry.com/">a nice application on Cloud Foundry that enumerates the  
         environment variables</a> in Cloud Foundry with the values for this particular application.  
 </p>
</p>
  			<a href="jl/blogPost/spring_data_mongo_transaction_synchronization_does_not_find_a_bound_db.html"><h1>Spring Data Mongo transaction synchronization does not find a bound DB</h1></a>
  			<p>25 November 2012</p>
  			<p>
<p> 
There's an issue with Spring Data Mongo   when used in the context of an application with existing <code>PlatformTransactionManager</code>-based transaction management setup, where Spring's <code>TransactionSynchronizationManager</code> tries to find the bound Spring Data Mongo <CODE>DB</code>  instance, but fails and throws an exception. </p><P>

  The issue  is <a href= "https://jira.springsource.org/browse/DATAMONGO-546"> <em>resolved</em></a>, but you wouldn't know that if you checked the <A href= "http://www.springsource.org/spring-data/mongodb">Spring Data MongoDB</a> web site  because there is no mention of the later releases.  This issue is fixed in the latest releases, however, versions, <CODE>1.1.1.RELEASE</CODE>.
</p>
<P> If you're using Maven, you can specify the latest revision with the following Maven coordinates: 
 <PRE>
 &lt;dependency&gt;
    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
    &lt;artifactId>spring-data-mongodb&lt;/artifactId&gt;
    &lt;version>1.1.1.RELEASE&lt;/version&gt;
  &lt;/dependency&gt;
</PRE>
 </p> 

<p> The error looks like this:
 <pre>
<b>java.lang.IllegalStateException: No value for key [Mongo: localhost:27017] bound to thread [1128017935@qtp-1027055145-3]</b>
at org.springframework.transaction.support.TransactionSynchronizationManager.unbindResource(TransactionSynchronizationManager.java:209) ~[spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.transaction.support.ResourceHolderSynchronization.beforeCompletion(ResourceHolderSynchronization.java:69) ~[spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.transaction.support.TransactionSynchronizationUtils.triggerBeforeCompletion(TransactionSynchronizationUtils.java:106) ~[spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.transaction.support.AbstractPlatformTransactionManager.triggerBeforeCompletion(AbstractPlatformTransactionManager.java:937) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:738) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
 </pre>
</p> <p> Hat tip to the one and only  <a href= "https://twitter.com/olivergierke">Oliver Gierke</a> for helping me with this! </P>
</p>
  			<a href="jl/blogPost/devoxx_2012_trip_report.html"><h1>Devoxx 2012 Trip Report</h1></a>
  			<p>16 November 2012</p>
  			<p>
<div style = "margin-bottom:10px;"><table cellpadding = "0"  cellspacing ="0" border="0"><tr><td  width ="400"><img  src = "media/18507" />  
</td><td style = "padding-left:10px;" valign = "top"><p>
 
I had a really good - (if exhausting!) - time  at <A href= "http://devoxx.com/display/DV12/Home">Devoxx</a> this year. 
 </p><P>
The show was bigger and better than ever, and - of course - I'm happy to find that Devoxx will be again returning to Paris, but also - this time - to London! 
 I helped man the <A href = "http://www.springsource.org"> SpringSource</a> / <a href ="http://www.cloudfoundry.org">Cloud Foundry</a> booths, and then gave a 15 minute talk on Cloud Foundry, and another talk on the Spring framework.

</p><P> I also enjoyed running the Spring BOF, though I wish it had been held a little earlier in the evening! 

 That said, I'm glad it wasn't! The trip from Sofia, Bulgaria - where I was a speaker in the Cloud Foundry Open Tour event in Sofia, Bulgaria - was harrowing, to say the least! I left Sofia, flew to Frankfurt, then took my connection to Brussels, which meant I still had a 40 minute train ride into Antwerp. From there, I ran to the hotel, found a cab then raced to get to Devoxx in time to run the Spring BOF. Just made it! And that's how Devoxx <em>started</EM> for me!   It only got crazier as the week rolled on. 
</P> <P> This show is also one of the best on earth to connect with friends  and users of the Spring framework from all around the world.  We were so busy on the SpringSource and Cloud Foundry teams that  I - at least - had only a few wonderful Belgian beers this time!  I'll try to fix that before I go! 
I can't wait until next year.   Although, I'm not sure if I'll be recovered by then... </p>  

</td></tr></table></div>
</p>
  			<a href="jl/blogPost/getting_started_with_cloud_foundry_for_java_and_spring_developers.html"><h1>Getting Started with Cloud Foundry for Java and Spring Developers</h1></a>
  			<p>16 November 2012</p>
  			<p>
<P> 
   I received the following (very awesome) e-mail the other day:
</p><BLOCKQUOTE>
<p>	Josh-  </p><P>I have been watching a couple of your videos on YouTube, and I have some questions that are decidedly remedial, which I recognize, but i am also having trouble getting answer to them.
</p>
<p>	I am not a developer - I have managed  a bunch of Wordpress sites, and have built 8-10 sites with Dreamweaver, leveraging CSS and basic functionality.  I understand the basics of HTML web development, and have even built a .NET application using Visual Studio.  But I am not a developer - you could call me a hobbyist and have some nominal experience around building websites using HTML and Dreamweaver.
</p><P>
	However, I am running into more and more situations where knowing how to write real web applications will be beneficial...  I have installed the latest rev of STS, signed up for CloudFoundry, even configured the micro cloud on my macbook.... but now I don't know how to get started!  what do I do?  how do I build a database (vPostgres, MySQL, I don't care), and connect to it with a web application?  I can't seem to find the tutorials that are remedial enough for me.
</p><P>
	Any suggestions?
<br/>
	Thanks, Josh -... </strong>
	</p>
	</BLOCKQUOTE>
	<P>A few points: he is referring to <A href= "http://youtube.com/SpringSourceDev">the SpringSourceDev YouTube channel</a>, where I have a few videos (and where you can find a slew of content from other great presenters on all things SpringSource). Additionally, I omitted his name from this email. 
		
  </P> 
 <P>So, what we have here is an essentially tech-minded, but not particularly advanced, developer looking to take the plunge into the wide world of web development, and he wants to get started with <A href= "http://cloudfoundry.org">Cloud Foundry</a>.  This is an <EM>awesome</EM> (and increasingly common) occurence. <A href = "http://www.cloudfoundry.com">Cloud Foundry</a> gives an outlet to all the people and departments that want to get things on the web and in production quickly.  The cloud is an important next step, not only for the hard core developers out there, but also for the infinite many   that need technology in place, quickly, and can't or won't wait for IT to deliver it. 
	              This happens a lot with what <A href= "http://twitter.com/chanezon">Patrick Chanezon</a> and others refer to as <A href ="http://en.wikipedia.org/wiki/Situational_application"> <EM>situational applications</EM></a>. 
	
	</p> <P>  I've updated and included my initial response to him below in the  hopes that it will help others.
	 	</p>
 <blockquote>
<p> You say <EM>remedial</EM> like it's a bad thing! We all get started at some point.
 </p><P>
Cloud Foundry is a good way to get started (and continue to mastery!) with web development. </p>
<P> An  important tool is the <code>vmc</code> command line tool. <CODE>vmc</code> is the simplest way to get started with
this stuff. Setup vmc and interact with the command line and
understand the tool's capabilities. Here are some <a href ="http://docs.cloudfoundry.com/tools/vmc/installing-vmc.html">docs on getting
started with vmc </a> and the <a href= "http://docs.cloudfoundry.com/tools/vmc/caldecott.html">vmc tunnel</a>. If you have questions
don't hesitate to reach out to me. Once you've got <code>vmc</code>  and the tunnel  installed, there's a lot you can do! </p>
<P>If you're doing Java development, specifically, then <A href= "http://www.springsource.org/sts">the SpringSource Tool Suite (STS) is a  
huge start</a>. 
STS is a free, Eclipse-based distribution. It is a super set of the Java EE distribution of Eclipse, and includes a slew of handy plugins pre-installed, including  Maven support. Maven is a tool that lets you easily compile your code. While you can install STS's plugins on top of an existing Eclipse distribution, you won't get the Maven support, and that's required for this tutorial. </P><P>

Cloud Foundry lets you run and manage web applications. You don't need
to worry about the hard disk, servers, databases, RAM, etc. However,
the compromise is that you can only run well known application stacks. <a href = "http://cloudfoundry.com">Cloud
Foundry.com</a> supports Java (including Spring applications, and anything
else you might want to run on a command line or inside of Tomcat 6),
Ruby, Node.js, and Scala. Other ecosystem partners have taken the code and run their own version of Cloud Foundry, and often include extra features.
 For example, <A href = "http://www.appfog.com">AppFog</a> has support for Python and PHP, above and beyond what  Cloud Foundry offers. 
	<a href="http://www.tier3.com/">Tier3</a> and <a href="http://uhurusoftware.com/">Uhuru</a> both support .NET on their derivatives. 
 So, what type of language will you use? I've written the following assuming you're going to use Spring and Java, a very common combination.  
 </p><P>
  
To make sure that everything is easy to find in STS for this tutorial,
use the <code>Window </code>-> <code>Reset Perspective</code> command.
</p>
  <img width ="800" src = "media/18523"/>
 
<P>
If you're using STS (which is an Eclipse -based distribution) you'll
need to install the Cloud Foundry WTP (web tools project) connector. Go to the <CODE> Help</code> -> <code>Eclipse Marketplace</code>. Search for "CloudFoundry" and you'll
find the "Cloud Foundry integration for Eclipse." Install it if you
haven't already.   </p> 
 <img src = "media/18512" width = "800"/>
<P> Once installation finishes, right click on the white space in your Servers panel,
and choose <code>New Server.</code>  
	</p>

		 <img src = "media/18520" width = "800"/>
	
 <P>  Then choose  <code>VMWare</code>  -> <code>Cloud Foundry</code>.  </p> 
		 <img src = "media/18514" width = "800"/>
 
	<p>
Click <CODE>Next</CODE> on the first screen (there's no need to change anything
there.) and then enter your credentials to log in to the cloud. </p>
 <img src = "media/18517" width="800"/>
<P> You can verify your credentials by clicking <CODE>Validate Account</CODE>. Then,
click <code>Finish</code>. 
</p>
 <P> Once installed, you can double click on the Cloud Foundry server to see what's going on in your account, just as you would from the <code>vmc</code> command line tool. The tab that presents itself can take up some serious screen real estate, so you might close the <CODE>Spring Explorer</code>,   <CODE>Outline</CODE>, and <CODE>Task List</CODE> panels, as I have. The Cloud Foundry tab has two sub tabs at the bottom: one called <CODE>Overview</code>, and another called <CODE>Applications</CODE>. You can click on an application to see the resources provisioned for the application, including which  <em>services</em> (databases, message queues, etc) have been apportioned for it and how much RAM and CPU the application is taking. </p>
	
<table><tr><td>	<img src = "media/18513" width = "400"/></td><td>
	 <img src = "media/18510" width = "400"/>
	
</td></tr></table>
<P> 

To create an application, go to the <CODE> File</code> menu, choose  <CODE>New</code> ->  <CODE>Spring 
Template Project</code>. </p>
 <img src = "media/18511" width = "800"/>
 <P>  Then choose  <CODE>Spring MVC project</code> and click  <CODE>Next</code>.
	</p>
	 <img src = "media/18519" width = "800"/>
	<P>
It might ask you to download a few kilobytes to get the tutorial if you haven't already downloaded this before. 
If so, click <code>Yes</code>.
</p>
 <img src = "media/18521" width ="800"/>
 <P>
 Then fill in an application name and a top-level package. The
wizard requires 3 tokens in the top-level package name, so
 <CODE>com.joshlong.cloudfoundrydemo</code> would work, but  <CODE>com.joshlong</code> won't.
	</p>
   <img src = "media/18516" width   ="800"/>
	<P>

Once you have an application, it's easy enough to deploy it to Cloud
Foundry. Simply drag the project from the <CODE> Project </code> panel onto the  Cloud
Foundry server in the  <CODE> Servers </code> panel. It'll ask you to specify
information about the application: what runtime, what language, etc.
The defaults are good enough in this case, so just leave them as-is  and click <CODE>Next</code>.
</p>
 <img src = "media/18522" width = "800"/>
<p>Next, you'll  be asked to specify the URL for the application as well as how much memory to allocate. Again, the defaults are fine in this case.</p>
<br/> <img src = "media/18518" width = "800"/>
<P>
The application will deploy, and - if you open the URL given in a browser window - you'll be greeted with a new
application on Cloud Foundry!


 </p> <img src = "media/18515" width = "800"/>
 <P> Getting started with programming Spring is another story for another blog post   at least! 
	 In the meantime, <A href= "http://blog.springsource.org/category/green-beans/">you might checkout the <EM>Green Beans</EM> blogs on SpringSource.org</a>
	</P>
 </blockquote>

<p> I hope this post has been helpful. If not, always feel free to reach me at <a href= "mailto:josh.long@springsource.com">my email</a>. </p>
</p>
  			<a href="jl/blogPost/devoxx_2012.html"><h1>Devoxx 2012</h1></a>
  			<p>12 November 2012</p>
  			<p>
<P> 
 Are you guys going to be in Antwerp, Beglium for Devoxx? If so, feel free to reach out to me. I'll be speaking on <A href = "http://www.devoxx.com/display/DV12/Josh+Long">Spring (including a look at Spring 3.1 and 3.2)</A>, Cloud Foundry, and much more. 

This will be my third year at Devoxx and, as usual, I'd love to grab a beer (or two!)    
    and chat with anybody and everybody about Spring, Cloud Foundry,  big data, the cloud and much more.   Also, feel free to ping me on <A href= "http://www.twitter.com/starbuxman">@starbuxman on Twitter</A>. 
</P>
 <P>
 Last year was an amazing event for me. I was very sick and gave 5 talks, but still had a heck of a lot of fun. This year I expect I'm feeling great (I'm in Sofia, Bulgaria, at the moment and will head to Antwerp tomorrow), and I only have 3 talks, so it should be a very relaxing, entertaining trip indeed. As usual, SpringSource and Cloud Foundry will have a booth, as well. So feel free to drop by - I'm sure you'll find me there, as well. 
 </P>
</p>
  			<a href="jl/blogPost/cloud_foundry_open_tour_sofia_bulgaria.html"><h1>Cloud Foundry Open Tour, Sofia, Bulgaria</h1></a>
  			<p>10 November 2012</p>
  			<p>
<p> I'm excited to report that i'll be speaking at the <A href = "http://opentour.cloudfoundry.com/2012/sofia">Cloud Foundry Open Tour event in Sofia, Bulgaria</A>! This event's sure to be fun, and it'll be my <EM>second</EM> trip to Bulgaria in <a href="http://joshlong.com/jl/blogPost/java2days_2012_trip_report.html">two weeks</a>!  If you're in Sofia, Bulgaria, and want to talk Spring, and Cloud Foundry, please be sure to drop by! I'll be joining several other world-class speakers to talk about application development on Cloud Foundry with various technologies.
</p> <P> If you want the slides to the talk, they're available <a href="http://www.slideshare.net/joshlong/multi-client-development-with-spring-14902171">on my SlideShare account</a>. Additionally, 
   the code is all available on <a href="https://github.com/joshlong/a-walking-tour-of-all-of-springdom">on the A Walking Tour</a> project on my  GitHub account. Specifically, check out the <b>android</b> and <b>mobilemvc</b> modules. Enjoy!
</p>
</p>
  			<a href="jl/blogPost/java2days_2012_trip_report.html"><h1>Java2Days 2012 Trip Report</h1></a>
  			<p>31 October 2012</p>
  			<p>
<p> I've just returned from one of my all-time favorite conferences, the amazing <a href="http://2012.java2days.com/">Java2Days conference in Sofia, Bulgaria</a>. This was my fourth year speaking there. I've had the unique, and rare privilege of having been there every year since the show started in <a href="http://joshlong.com/jl/blogPost/the_last_2_crazy_months.html">2009</a>. Here's my post of the show from <A href="http://joshlong.com/jl/blogPost/java2days_2010.html">2010</A>.   
	 Each year, the show gets better and better.  This year was no exception. I gave two talks - my <EM><A href="http://www.slideshare.net/joshlong/multi-client-development-with-spring-14902171">Multi Client Development with Spring MVC</a></EM> (which is mainly about  connecting clients (Android, native, HTML5) to your services with REST) and <EM><A href="http://www.slideshare.net/joshlong/the-cloud-foundry-bootcamp">The Cloud Foundry Bootcamp</a></EM>.   (Those links are to the slides on my SlideShare account, if you're interested..)
		 
		</P> 
 <DIV> 
	 <img   width = "500"  src = "media/18502" />	
<p class = "caption">Group shot of me with several of the speakers at this year's  event.  
  </p>  
<img  width = "500" src ="media/18501"/>   
 <P class = "caption">   Compare and contrast with   this photo from 2009 </P>
</DIV> 
<Div>		
		<img width = "500" src = "media/18503"/>
   <P class = "caption">
Twitter follower <A href = "http://twitter.com/ivelina">@Ivelina</a> took this shot of me from the audience  </P>
  </div>
		<P>I enjoyed this year like crazy, and - as usual - can't wait until next year!
			 Thanks again to the Java2Days team for putting on such a magnificent show! 
			</P> 
		
		 <P>I would be remiss if I didn't mention, in this particular instance, that I'll be <EM>back</EM> in Sofia, Bulgaria in a few weeks for the <A href="http://opentour.cloudfoundry.com/2012/sofia">Cloud Foundry Open Tour</a> event Sofia! 
			If  you're in the region and want to talk Spring and  cloud computing on Cloud Foundry, the open source PaaS from VMware, then drop by and see me!
			</P>
</p>
  			<a href="jl/blogPost/java2days_2012.html"><h1>Java2Days 2012</h1></a>
  			<p>23 October 2012</p>
  			<p>
<p> Again this year ill return to my favorite conference in eastern Europe, the <a href ="http://2012.java2days.com/">Java2Days</a> conference in Sofia, Bulgaria, where I'll give my talks on multi client development with Spring MVC and on getting started with Cloud Foundry, the open source PaaS from VMware. If you're in the region (Turkey, Greece, Armenia, Bulgaria, etc.), then join 

<A href="http://www.twitter.com/starbuxman">me</a> and we'll talk Spring and Cloud Foundry over<em> rakija</em></a>!
</p>
  			<a href="jl/blogPost/arlington_va_cloud_foundry_dev_day_2012.html"><h1>Arlington, VA Cloud Foundry Dev Day</h1></a>
  			<p>19 October 2012</p>
  			<p>
<P>  Fresh from SpringOne2GX, I'm in Arlington, VA, working with developers who want to get started with Cloud Foundry. This is a hands on event, and many of my colleagues and I are here to help developers get started. 
</p><P>
There are two tracks -- one track focusing on application development using Cloud Foundry: getting started with the tools, setting up the environment, pushing applications to the cloud, and managing the application once it's there. The other track    focuses on Cloud Foundry internals and architecture. The turn out has been great, and it's great to see so many developers using the technology so enthusiastically.    People are already pushing and migrating their existing, sophisticated Spring based applications to Cloud Foundry!   

</p>
<DIV style = "margin-bottom:10px;"> 
 <img   src = "media/18485" />  
  </DIV> 
<div > <caption>
  My colleagues <A href = "http://twitter.com/ebottard">Eric Bottard</A> and <A href = "http://twitter.com/andypiper">Andy Piper</A> co-leading a developer hands-on session.  </caption>
</div>
</p>
  			<a href="jl/blogPost/spring_integration_and_spring_batch_on_cloudfoundry_talk_from_javazone_2012.html"><h1>Spring Integration and Spring Batch on CloudFoundry talk from JavaZone 2012</h1></a>
  			<p>19 October 2012</p>
  			<p>
<p> My talk from <A href ="http://www.javazone.no"> JavaZone</A>  is now available online. I co-presented with <a href="http://www.twitter.com/z_oleg">Oleg Zhurakousky</A>, colleague and co-committer on  <a href="http://springsource.org/spring-integration">Spring Integration</A>. If you'd like a quick look, <a href="http://vimeo.com/49477307">check it - and all the other great videos on the JavaZone Vimeo page - out</A>! 
 
 <DIV> <iframe src="http://player.vimeo.com/video/49477307" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> <p><a href="http://vimeo.com/49477307">Enterprise Integration and Batch Processing on Cloud Foundry</a> from <a href="http://vimeo.com/javazone">JavaZone</a> on <a href="http://vimeo.com">Vimeo</a>.</p> </DIV>
</p>
</p>
  			<a href="jl/blogPost/springone2gx_2012_trip_report.html"><h1>SpringOne2GX 2012 Trip Report</h1></a>
  			<p>18 October 2012</p>
  			<p>
<p> 
<DIV style = "float :left;  margin-right :10px;" >
<div>	 <img 
	src = "media/18482" width = "300" /></DIV>
 
 <img src = "media/18483" width = "300" />


</dIV>		 <div style = "float: right ; margin-left:10px;"> 
<div> <img src = "media/18480"/> </div><DIV> <img src = "media/18478"/> 
	</div><DIV><img src = "media/18479"/> </div><DIV><img src = "media/18481"/> </div> 

</div>  <IMG src = "media/18474" width = "400"/>   <br/>

And so concludes <A href ="http://www.springone2gx.com">SpringOne2GX 2012</A>! 

  This  year's event was <em>even crazier</EM> and more wonderful than last year.   
	
 
 The opening day keynote saw SpringSource CTO <A href="http://springone2gx.com/conference/washington/2012/10/speakers/adrian_colyer">Adrian Colyer</a>   
	  kick off the show along with <a href="http://springone2gx.com/conference/washington/2012/10/speakers/juergen_hoeller">Juergen Hoeller</a> (pictured above), <a href="http://springone2gx.com/conference/washington/2012/10/speakers/mark_pollack">Dr. Mark Pollack</a>, <a href = "http://springone2gx.com/conference/washington/2012/10/speakers/graeme_rocher">Graeme Rocher</A>, and 
	
  This is the premier event for JVM developers, featuring <a href = "http://springone2gx.com/conference/washington/2012/10/schedule">great speakers from VMWare, SpringSource, TypeSafe, Neo4j, and many others</a> speaking on all manner of topics.  I thoroughly enjoyed giving my talks on <A href= "http://www.slideshare.net/joshlong/the-cloud-foundry-bootcamp-talk-from-springone-on-the-road-europe">Cloud Foundry</a>, <A href= "http://www.slideshare.net/joshlong/integration-and-batch-processing-on-cloud-foundry">Spring Integration and Spring Batch, and RabbitMQ</a>.  
		</p>
</p>
  			<a href="jl/blogPost/my_dear_aunt_sandra.html"><h1>My Dear Aunt Sandra</h1></a>
  			<p>15 October 2012</p>
  			<p>
<p> <img src  = "media/18467" style = "margin-bottom: 10px;"   /> <br/> My aunt Sandra passed gentle into that good night, yesterday morning, from complications of <a href ="http://www.ncbi.nlm.nih.gov/pubmedhealth/PMH0001708/" height = "400">ALS</a>. Sandra raised my sister and I as children like her very own every summer for years and years in her home of Salem, Oregon. She raised her own beautiful family. She worked her entire life and made a good living for herself all the while donating substantial time and money to church and charity. She took students in as part of foreign exchanges, mentored children at schools and at the YMCA, where she was a swimming teacher and swam thrice weekly up until last year, in her late 70s. She took me to Paris and London for the first time, and showed me what a quick flight across the ocean could do. She's the reason I speak French (and other languages), and the reason I enjoy so many privileges in this life. Sandra was brave and adventurous. She'd visited by cruise or by plane almost all the ports on earth and over 75+ different countries in her long life. She never went into anything with assumptions. She never let a bad situation stand, always attempting to fix it or better it. She was unpretentious. The matriarch of my dad's side of the family. A true family Matriarch. Sandra was the best of us, and I'll miss her with all my heart. RIP Aunt Sandra.
 </P>
</p>
  			<a href="jl/blogPost/springone2gx_2012.html"><h1>SpringOne2GX 2012</h1></a>
  			<p>15 October 2012</p>
  			<p>
<p>  <div style = "float:left;margin-right:10px;">
 <img src = "media/18460"/> <img src = "media/18462"/> <img src = "media/18459"/>
 <img src = "media/18461"/> </div>It's my favorite time of year! SpringOne2GX kicks off tomorrow. I'll be <A href="http://springone2gx.com/conference/washington/2012/10/speakers/josh_long">giving two talks</a> -- the Cloud Foundry Bootcamp, introducing Cloud Foundry for the Spring developer, and my talk on enterprise application integration and batch processing on Cloud Foundry.  This year's already more exciting than ever before, with talks on Spring, Cloud Foundry, Grails, Hadoop and Scala, and much more.  If you're around, feel free to find me roaming the halls <a href="http://www.twitter.com/starbuxman">or ping me on Twitter</a>!   
  
 </P>
</p>
  			<a href="jl/blogPost/anders_hejlsberg_introducing_typescript.html"><h1>Anders Hejlsberg Introducing TypeScript</h1></a>
  			<p>10 October 2012</p>
  			<p>
<p> 

<img src = "media/18457" style = "margin :10px; margin-left: 0px; float : left"/>
I was in Aarhus, Denmark last week and gave my talk on using Cloud Foundry, and then spoke in the evening at the local Java User Group as a special guest, which was <EM>awesome</EM>.  The only regrettable thing was that Anders Hjelsberg was concurrently giving his talk  introducing TypeScript, which meant I couldn't see it.  So, I watched it today in the background while I was wrestling with expense reports. Check  out the link to <a href="http://channel9.msdn.com/posts/Anders-Hejlsberg-Introducing-TypeScript">Microsoft's Channel 9 where you can watch the video</A>.  

 TypeScript is not the first technology to  <em>solve</EM> the static-language-to-JavaScript problem, following the most recent introduction into the  market, <A href="http://en.wikipedia.org/wiki/Dart_(programming_language)">Google's Dart</A>. Before that, of course, we had CoffeeScript, ScriptSharp, GWT, etc. I could actually see myself using this one, though.  My one twinge of discord is that I think a lot of the complaints he identifies as inhibiting large application development (such as the  lack of strong  types) are less of a problem with a good organizational framework in place. An MVC framework like <a href="http://backbonejs.org/">backbone.js</a> or <A href="http://angularjs.org/">Angular.js</a> let you plugin the missing pieces which means that no single component is going to be so big that it might see substantial benefit by having a stronger type system, and coordination between the components is handled by the more rigorously tested framework.  

</p>
</p>
  			<a href="jl/blogPost/mysterious_algorithm_responsible_for_4_percent_of_all_trading_activity_last_week.html"><h1>Mysterious Algorithm Responsible for 4 Percent of All Trading Activity Last Week</h1></a>
  			<p>10 October 2012</p>
  			<p>
<p>
 <img src = "media/18451" style = "float:left; margin-right :10px;"/> 
 <a href ="http://www.cnbc.com/id/49333454">According to CNBC, a mysterious algorithm was responsible for 4% of trading activity last week</a>.  

 I'm not sure what's more impressive: the single algorithm that generated the noise, or the company whose monitoring algorithm saw the aberration..
</p>
</p>
  			<a href="jl/blogPost/san_francisco.html"><h1>San Francisco</h1></a>
  			<p>09 October 2012</p>
  			<p>
<p>I've moved to San Francisco, CA!  Found a nice place in Nob Hill for the king's ransom of 300% of what I was paying in Pasadena, CA, just a few weeks earlier. 
   Anyway... I only mention this because... I'm in town. Let's grab a drink and talk <A href ="http://www.springsource.org">Spring</A> and <A href="http://cloudfoundry.org">Cloud Foundry</A>. JUGs? Meetups? Hackathons? Let's do <EM>all</EM> the meetups.   Plus, this has  the additional benefit of putting me  in town for more of the awesome events / meetings with my SpringSource colleagues! 
 Life is <EM>so</EM> good sometimes.
 
</p>
</p>
  			<a href="jl/blogPost/spanner_the_goldilocks_database.html"><h1>Spanner, the Goldilocks database</h1></a>
  			<p>09 October 2012</p>
  			<p>
<P> The other N.*?SQL shoe has dropped. Google seems to have discovered the  Goldilocks database: it's fast, <EM>and</EM> transactional.  In short, it's <EM>juuuust</EM> right.  I haven't had the time to read the paper, but it seems <em>very</EM> interesting!  

 Check out the <a href="http://highscalability.com/blog/2012/9/24/google-spanners-most-surprising-revelation-nosql-is-out-and.html">High Scalability</A> post for more.
</P>
</p>
  			<a href="jl/blogPost/lanyrd.html"><h1>Lanyrd</h1></a>
  			<p>01 October 2012</p>
  			<p>
<P> If you guys want to know when and where I'll be speaking next, feel free to check out my <A href ="http://lanyrd.com/profile/starbuxman/">Lanyrd.com</a> page, which usually has information about which shows I'll be at and where. In fact, some times <EM>I</EM> check it out and learn of my obligations before I've been told!  <br/> <img  width = "800" style = "margin-top:10px;" src = "media/18436"/>

 </P>
</p>
  			<a href="jl/blogPost/speaking_at_the_aarhus_denmark_java_user_group.html"><h1>Speaking at the Aarhus, Denmark Java User Group</h1></a>
  			<p>01 October 2012</p>
  			<p>
<P> I'll be speaking at <a href="https://secure.trifork.com/aarhus-2012/freeevent/index.jsp?eventOID=4609">the Aarhus, Denmark Java User Group on Tuesday, October 2, 2012 from 17:00-19:00</A>. I'll be talking about Spring and Multi Client Development and giving a Cloud Foundry Bootcamp. I hope to see you there! </P>
</p>
  			<a href="jl/blogPost/goto_conference_in_aarhus_denmark_2012.html"><h1>GOTO conference in Aarhus, Denmark, 2012</h1></a>
  			<p>27 September 2012</p>
  			<p>
<P> <img  src = "media/18429"/> <br/> I'll be speaking at the GOTO conference in Aarhus, Denmark, from October 1-3 talking about <a href ="http://gotocon.com/aarhus-2012/presentation/Spring%20and%20Cloud%20Foundry:%20a%20Marriage%20Made%20in%20Heaven">Cloud Foundry, the open-source PaaS from VMWare</a>. If you're at the show, I'd love to meet you! We can talk all things Spring, and Cloud Foundry, or just throw back a beer. Ping me <a href ="http://www.twitter.com/starbuxman">on Twitter (@starbuxman)</A></p>
</p>
  			<a href="jl/blogPost/this_guy.html"><h1>This guy!</h1></a>
  			<p>21 September 2012</p>
  			<p>
<p>  "Who loves Spring and has two thumbs? ...This guy!"
</P>

 <div><img src = "media/18426"/> </div>

<P>  
A photo of me from <A href ="http://oscon.com">OSCON 2012</A> by
 <A href ="http://twitter.com/andypiper">my pal (the one and only) Andy Piper</A>.  
 </p>
</p>
  			<a href="jl/blogPost/how_to_learn_a_framework.html"><h1>How to Learn a Framework</h1></a>
  			<p>18 September 2012</p>
  			<p>
<P>
I was asked recently how I might suggest going about learning a framework (like Spring). 
 I replied in an email and I reproduce most of that email below.
</p>
<blockquote>Basically, <EM>don't</EM> learn a framework first. Learn how to solve the problem.   Once you learn how to solve the problem, identify common design patterns that will help you solve the problem. 
 <EM> Then</EM>, find the framework that lets you work with those design patterns. 
  If you're trying to build a web application - learn what principles people use in building web applications. One common pattern when building web applications is MVC. Spring MVC makes it very easy to build MVC-based applications. 
  If you're trying to build a service, you will typically learn about data-access technologies and repositories and ORM. Spring and Spring Data have great support for building service objects (a pattern) and repositories or data access objects (DAOs). 
  If you're trying to build an application that has many layers - services, web tier, repositories, unit tests, etc.- then it is helpful to have dependency injection, which is another pattern that Spring also supports.
  That is the 'correct way' to learn new technologies, in my opinion. If you understand the problem you're trying to solve, and you've identified a good technology, then looking at other people's code can be VERY helpful. This is one of the reasons I love open source so much. You can look at so many other peoples' code.<A href = "http://www.github.com">GitHub</A> is an amazing place. Look at <a href = "http://github.com/SpringSource/">the SpringSource repository</A>  and you'll see the source code for many different projects. If you look, you will often find '-samples' projects inside of <a href ="http://github.com/SpringSource">the SpringSource project</A>. Also, <A href ="http://github.com/CloudFoundry-Samples">the Cloud Foundry Samples repository</a> provides great, multi-language samples that you can refer to for getting started on <a href = "http://www.cloudfoundry.org">Cloud Foundry</a>. These projects show how to use the patterns. 
 
<a href ="https://github.com/CloudFoundry-Samples/springmvc-hibernate-template">The Spring Hibernate Template</A> shows a good example of building an application on Spring MVC and Spring that works on Cloud Foundry.
 
In addition to looking at source code and looking at design patterns, you should always ask questions. If you have a chance, go to the Java User Groups in your area. Ask questions on <a href ="http://forums.springsource.org">the SpringSource forums</A> or Stack Overflow. And, of course, i am always happy to help answer questions, too ;-)  
</blockquote>
</p>
  			<a href="jl/blogPost/cloud_foundry_system_integrators_tour_india_archsummit_and_oschina_in_india_and_china_august_2012.html"><h1>Cloud Foundry System Integrators Tour in India, ArchSummit, OSChina in China, August 2012</h1></a>
  			<p>16 September 2012</p>
  			<p>
<p> If you've been following <a href= "http://www.twitter.com/starbuxman">my tweets</a> in the last two months, you know I've been bouncing around India and China.  Actually, in China, you would've noticed the <EM>lack</EM> of tweets, as Twitter's blocked there. 
	
	</P> 
	
	<P>  I went to India early in August to visit system integrators and talk to them about the about the promise and potential <a href = "http://www.cloudfoundry.org">of Cloud Foundry, the Open Source PaaS from VMWare</a>.  
		
		
 System integrators are the   first frontier - these guys are often 50,000+ employees   strong and service  customers all around the world! It's no surprise that they would want to know about a on-premise, open source solution  like Cloud Foundry! 
	 The feedback and enthusiasm there is very exciting, and - of course - there is a huge story for support for Spring in the cloud, which they wanted as well. 
	
	</p> 
	 <P> Then, I went to various cities in China on a mini-tour. I visited Shenzhen, China (for the <a href ="http://www.archsummit.com/">InfoQ ArchSummit conference</a>), where I gave a keynote lecture to a thousand enigmatic developers with simultaneous translation.  My colleagues from VMWare Shanghai  were there and gave a few talks on Cloud Foundry as well. The reception was, as you can imagine, very good. I am particularly grateful for my VMWare colleagues, who sort of played tour guide for me while I was there. There can be no  doubt - the Chinese are learning English. It is part of the country, now. But not all speak it conversantly, and so I really appreciated the help. I got pretty good at charades, though!   Then, it was off to Nanjing, China where I gave a talk  introducing Cloud Foundry to the <EM>amazingly</em> enthusiastic developers at <a href ="">OSChina</A>.  At one point the air conditioning died and the room was left - 200+ people and packed! - in a sweltering standing heat.  <EM>I</EM> would've left!  I was 
		<EM>shocked</EM> no one else did, and it was really gratifying to be able to talk to them. I know they weren't comfortable, but the content from all the speakers was good, and the developers were the kind of people all conferences want: inspired, passionate. 
		
		Truly inspiring.  I imagine I walked away from the conference as inspired as anybody. 
		 
		</p> <P>
			  Finally, I went back to Shanghai to speak at an all but impromptu Spring and Cloud Foundry meetup. A few dozen developers gathered around and I gave my <EM><a href = "http://www.slideshare.net/joshlong/sawt/">Spring, a Walking Tour</a></EM>.
		</P>
		<P> I'd been to India before, (three times this single year, at this point!), so while I was very happy to be there, I was particularly enamored with my trip to China. I feel humbled and, as  with China, feel like I made some real friends. 
			 </P>
		<P>  I really enjoyed my time in both India and China, and look forward to my next occasions to visit there! 
			  If you're in China, by the way, you can follow <a href = "http://www.weibo.com/SpringSource">the SpringSource Weibo account!</a>
			</P>
	 <table width="600" border="0" style = "margin-bottom:10px;" cellspacing="0" cellpadding="0">
  <tr>
    <td><img src="media/18417" width="300" /></td>
    <td><img src="media/18416" width="300" /></td>
 
  </tr>
  <tr>
    <td><img src="media/18415" width="300" /></td>
    <td><img src="media/18418" width="300" /></td> 
  </tr>
  <tr>
    <td><img src="media/18414" width="300" /></td>
    <td><img src="media/18413" width="300" /></td> 
  </tr>
</table>
</p>
  			<a href="jl/blogPost/cloudfoundry_opentour_india_2012_pune_and_bangalore.html"><h1>The Cloud Foundry Open Tour 2012 in Pune and Bangalore, India</h1></a>
  			<p>16 September 2012</p>
  			<p>
<p> I just returned from the <EM><a href ="http://opentour.cloudfoundry.com/"> Cloud Foundry Open Tour</a> </EM>  in India (in <A href ="http://opentour.cloudfoundry.com/2012/pune">Pune</A> and <a href = "http://opentour.cloudfoundry.com/2012/bangalore">Bangalore</A>) where I gave my talk <a href = "http://www.slideshare.net/joshlong/multi-client-development-with-spring-12804373">Multi Client Development with Spring MVC</a> and helped with the bootcamp (along with my pal <A href = "http://twitter.com/rajaraodv">Raja Rao</A>). The trip was astonishing - my third trip to India this year! - and the food was even better. We spent a lot of time talking to  people about building modern applications, including how  to architect applications for cloud-scale.  
	
The show had the same format in each of two cities:  for the first several hours it was individual talks. Then, at 3pm, Raja and I took the stage and kicked off the bootcamp, as a separate event (people who had come for the individual talks may not have wanted to stay for the bootcamp). The bootcamp was amazingly satisfying because most people walked away from the event having pushed something to the cloud and - in the case of a few dozen teams - having built something really awesome on Cloud Foundry and deployed it to production! Nice job, and I hope to see a lot more of this. 
 </P>
 <table cellpadding="0" style = "margin-bottom:10px;" cellspacing="0" border ="0"> <tr>
 <td valign = "top">  <div style = "margin-bottom:10px;"> <img  width = "300" src   = "media/18406"/> 	  </div>
 <img width = "300" src   = "media/18404"/>  
</td> <td width = "10"></td>
 <td valign = "top"> <img  width = "300" src   = "media/18405"/>  
</td></tr></table>
</p>
  			<a href="jl/blogPost/huh.html"><h1>WTF</h1></a>
  			<p>16 September 2012</p>
  			<p>
<p> <img src = "media/18420" width = "500" /> </P>
</p>
  			<a href="jl/blogPost/a_walking_tour_of_spring_31.html"><h1>A Walking Tour of Spring 3.1</h1></a>
  			<p>08 March 2012</p>
  			<p>
<P> I put together a quick walking tour of Spring 3.1. The code is available on <a href = "https://github.com/joshlong/a-walking-tour-of-spring-31">my GitHub account</A>. It runs on a Servlet 3 container, and demonstrates how to build a completely XML free (no <CODE>persistence.xml</CODE>, no <CODE>web.xml</CODE>, no <CODE>orm.xml</CODE>, etc.) application that uses Hibernate 4, Spring 3.1, and Spring MVC 3.1. It shows how to build everything from a transactional service to a RESTful endpoint.   </P>
</p>
  			<a href="jl/blogPost/my_trip_to_jfokus_vaadin_dev_day_and_spring_io_with_my_dad.html"><h1>My trip to JFokus, Vaadin Dev Day, and Spring I/O with my Dad</h1></a>
  			<p>21 February 2012</p>
  			<p>
<P> <div>

 <table border="0" style = "margin-bottom:10px;" cellpadding="0" cellspacing="0"><tr><td valign="top"><img src = "media/17837" width="400" /><br/><img src = "media/17840" width="400" /><br/><img src = "media/17839" width="400"  /> 
  <div class= "caption" style = "margin-top:10px;">
 <b>Top</b>:  <a href = "http://www.twitter.com/sergialmar">@sergialmar</a>,
  <a href = "http://www.twitter.com/starbuxman">me</a>, and
   <a href ="http://www.twitter.com/neodevelop">@neodevelop</a>.
 <br/> <div class= "caption" style = "margin-top:10px;">
  <strong>Bottom two</strong>: beautiful Photos of Madrid! </div>
  </div>

 </td> <td valign="top">
 
<img src="media/17838" width = "400" /><br/><img src="media/17841" width = "400" /><br/><img src="media/17836" width = "400"   /> 
 <div class= "caption" style = "margin-top:10px;">
 <strong>All three photos:</strong>  una manifestaci&oacute;n!
 
 </td></tr></table>
 
 
</div>
 
This was my first time in Madrid, Spain, for the <a href = "http://www.springio.net/">Spring IO conference</a>. 
	I enjoyed the people, the culture (<EM>y las bebidas!</EM>) and  more. I brought my dad with me on this trip, since he's never been abroad, and I wanted him to see Europe with me. We had talked about this when I went to <a href = "http://www.javazone.no">JavaZone</A>, last year, and I described to him that there were <a href = "http://en.wikipedia.org/wiki/Fjord"><EM>fjords</EM></A> and plenty of beautiful wildlife and vast expanses of nature's beauty. That trip, for reasons not that relevant here, never panned out for us (although I quite enjoyed it!). 
	JavaZone came and went, but he was still interested in Scandinavia and experiencing that type of culture. 
	When this trip (first to Stockholm, Sweden, for <a href = "http://jfokus.com">JFokus</A>, and then to Madrid, Spain, for <a href = "http://www.springio.net">Spring I/O</A>) materialized, dad jumped at the chance. I bought his tickets (a late birthday gift - we share the same birthday!) and I asked him to secure a passport, which he did. 
	</P><p>
 He was most looking forward to visiting Stockholm. Stockholm is every bit as lovely as he imagined it would be, having seen <a href = "http://www.imdb.com/title/tt1132620/"><EM>The Girl with the Dragon Tatoo</EM></A>.
	
	</P><P>
	But, dad fell ill - something he ate didn't agree with him (probably the airline food!) - and he was trapped in the hotel for a few days, and very weak. This made moving around a bit more problematic than it should have been as we made the subsequent trip to Madrid, Spain.     
	
	 One thing we <em>did</EM> learn: getting sick in a hotel room's a good idea, especially in Stockholm.  
		The staff at the hotel we stayed at - the lovely <a href="http://www.radissonblu.com/waterfronthotel-stockholm">Radisson Blu Waterfront</a> in Stockholm, right next to the JFokus venue -
		treated him exceptionally.  
		
	 It seemed as though the staff was almost rooting for him to recover! Somebody even <EM>checked in</EM> on him for me, while I was tending to my obligations as  a speaker at the conference! Talk about great service.  	
	</P> 
    
    <P> During all of this, I took a quick jaunt (a train, then a flight, then a cab) from Stockholm, Sweden to Helsinki, Finland's port, where I jumped on a cruise headed <EM>back</EM> to Stockholm! This cruise, in particular was the vessel on which the Vaadin Dev Days took place. It was an amazing, enthusiastic group of programmers, and you couldn't ask for a more interesting venue. I enjoyed everything, and particularly, I enjoyed giving a talk against the background sound of ice breaking as the ship plowed onward, through the frozen waters. Adding that to the list of things that I can't beleive I got to do... </P>
    <P>
 We finally made it to  Madrid. By that point dad was on the mend, and  the temperature in Madrid was more favorable to people of, em,  superior years. It was a <Em> lot</EM> warmer than in Stockholm. Madrid seems like it was realized from a story book  illustration: nice people, great food and - most manifestly for an American like my dear dad, never before abroad in his 75+ years of life -  full of <EM>beautiful</EM> architecture!
	 Madrid ended up being his favorite city.  
	</p>
<P>
		
		It didn't hurt that  the conference coincided with <EM>carnivale</EM>, which was being celebrated in some form or another  in many different Catholic countries world-wide. The streets were abuzz with music, debauchery and crowds of people.  Dad and I went outside, took in some of the scenery and had to find a place to sit when one of the <a href  = "http://es.wikipedia.org/wiki/Manifestaci%C3%B3n"><em>Manifestaci&oacute;n</EM></A>s <a href = "http://www.ft.com/cms/s/3386ce2e-5b29-11e1-a2b3-00144feabdc0,Authorised=false.html?_i_location=http%3A%2F%2Fwww.ft.com%2Fcms%2Fs%2F0%2F3386ce2e-5b29-11e1-a2b3-00144feabdc0.html&_i_referer=">plowed</a> <a href = "http://latimesblogs.latimes.com/world_now/2012/02/hundreds-of-thousands-of-spaniards-protest-new-work-rules.html">through</A> <a href  = "https://news.google.com/news/story?ncl=dMYiSTv25wTOfTMZl-DHtPx4bvXCM">the center</A> where we were! What an incredible thing to behold! We missed the memo, evidently, where it was announced that the entire walking population of Madrid would go on a walkabout! 
			
</P>
    <P>I really enjoyed JFokus, the Vaadin Dev Days, and finally Spring IO both because they were great events with enthusiastic developers, but also because I got to go with my dad, who got to experience Europe for the first time with me. We learned a lot. I'll be back in Europe next month for <a href = "http://2012.33degree.org/">33rd Degree</a>, and I'll be in Sweden, <EM>again</EM>(!), and in numerous other countries in April for <a href = "http://www.scandevconf.se/">ScanDevConf</a> and the <a href="http://opentour.cloudfoundry.com/">Cloud Foundry Open Tour</a> (which we'll talk about a bit later), respectively, and I'll be sure to approach those trips in the same  way as my dad did: full of a (renewed) curiousity. 
</P>
</p>
  			<a href="jl/blogPost/jfokus_and_vaadin_2012.html"><h1>JFokus and Vaadin 2012</h1></a>
  			<p>17 February 2012</p>
  			<p>
<P> 
	<img src = "media/17889" width = "300" style = "float: left; margin-right:10px;" /> 
	<img src = "media/17888" width = "200" style = "float: right; margin-left:10px;" /> 
	
	Hey guys, are you going to be at JFokus' <a href = "http://www.jfokus.se/jfokus/page.jsp?lang=en&id=tutorial">University day tomorrow</A>? Come see <a href = "http://www.springone2gx.com/conference/speaker/chris_richardson">Chris Richardson</A> and <a href = "http://www.springone2gx.com/conference/speaker/josh_long">I</a> talk about building better Spring applications on Cloud Foundry at 9AM tomorrow morning. 
 
 If you're in Helsinki, might I recommend  <a href = "https://vaadin.com/meetup/jfokus-2012">the JFokus with Vaadin</A> cruise which leaves from Helsinki aboard the <a href = "http://en.wikipedia.org/wiki/MS_Silja_Symphony">MS Silja Symphony</A> at 17:00 EET, and then works it way to Stockholm, where of course you're then free to attend JFokus. I'll be there, giving a talk on getting to production quicker with technologies like <a href = "http://www.cloudfoundry.org">Cloud Foundry</A>, <A href = "http://www.springframework.org">Spring</A> and <A href = "http://www.vaadin.com">Vaadin</A>. The deck from the  <a href = "http://www.slideshare.net/joshlong/cf-vaadin">talk from the Vaadin dev meetup on Spring, Roo and Vaadin  is available</A>, and so is the  deck from the <a href= "http://www.slideshare.net/joshlong/a-running-tour-of-cloud-foundry">JFokus Cloud Foundry quickie is available here</a>.
	</P>
</p>
  			<a href="jl/blogPost/spring_io_2012.html"><h1>Spring IO 2012</h1></a>
  			<p>17 February 2012</p>
  			<p>
<P> 
 <img src = "media/17885" style = "margin-right:10px;float:left;" width  = "300"/>
Looking forward to presenting my talk on  <a href ="http://www.springio.net/agenda">Integration and Batch Processing with Cloud Foundry</A> tomorrow at Spring IO 2012.  
	
	RabbitMQ, Spring Integration and Cloud Foundry are Natural Vehicles for applications that handle large workloads and scale well. In this talk, I'll introduce common architectural patterns to  better scale, using Spring Integration and Spring Batch, using RabbitMQ as the communication fabric.  For those of you who want the deck, <a href = "http://www.slideshare.net/joshlong/enterprise-integration-and-batch-processing-on-cloud-foundry">it's available here</a>.
</P>
</p>
  			<a href="jl/blogPost/a_google_music_api_please.html"><h1>A Google Music API, Please?</h1></a>
  			<p>26 January 2012</p>
  			<p>
<P>You know what I want? A Google Music API.  
	 I feel like Google Music's still the leader. Apple's iCloud just kind of leaves me cold. It not only stinks of lock -in, but it's not even particularly flexible. Where's my <CODE>.ogg</CODE> support?
	</P><P>
The things I would do... 
</P><P> The Google Music App doesn't do the right thing a lot. I plug it into the car and hit play, thinking it'll either playing all songs after it, or the whole album, and often it just plays one song. Even worse, the shuffle function's odd. Google Music has weird behavior when you run the Navigation app and have to share the audio with other apps. Sometimes when Google Music gets the control back, it doesn't pick up and go, again. 
</P><P>
Finally, I want Google Music on Roku, and on other devices. Otherwise, I still don't feel like I could just throw away my CDs, yet. And, while I appreciate that there's a "offline" mode for Google Music, I still don't see a way for me to get my original music back. Where's my <a href = "http://www.dataliberation.org/">liberated data</a> section for my music?</P>
</p>
  			<a href="jl/blogPost/supporting_your_own_field_or_method_injection_annotation_processors_in_spring.html"><h1>Supporting Your Own Field or Method Injection Annotation Processors in Spring</h1></a>
  			<p>01 January 2012</p>
  			<p>
<P>
	
		 So, I had a use case the other day - I wanted to support a custom annotation for denoting injection at the class level.  
		Spring users will know that Spring already supports  
		 Spring's native 
		<CODE>@Autowired</CODE>, JSR 330's <CODE>@javax.inject.Inject</CODE>, and JSR 250's '<CODE>@javax.resource.Resource</CODE>.  
		
		These annotations, when placed on a setter, or a field, signal to Spring that  		
		a value should be injected at the site of the annotation. These annotations 
		are synonyms for the same thing.
		
		Spring also supports other annotations - like the JPA 1.0 <CODE>@javax.persistence.PersistenceContext</CODE>  
		annotation. The annotation is used in a special circumstance, when you want Spring to inject an <CODE>EntityManager</CODE> or an <CODE>EntityManagerFactory</CODE>.
		 Here are some examples. 
		</p>
<PRE><CODE>
	@javax.inject.Inject 
	private DataSource dataSource ;
	
	@Autowired  
	public void setDataSource(DataSource ds){
	  this.datSource = ds ;
	}
	
	@PersistenceContext 
	private EntityManager entityManager; 	
</CODE></PRE>		
		<P>  
		 To "teach" Spring what to do with a custom annotation like <CODE>@PersistenceContext</CODE> is fairly easy once you know the actors involved. 
		 The work is typically done inside of a special <CODE>BeanPostProcessor</CODE>.  What we want is a framework hook to inspect the beans after the bean's have been created, but before they've been populated with properties. 
	 The <CODE>BeanPostProcessor</CODE> interface is powerful, but not quite what we need. What we actually need 
	is a combination of the the more specialized <CODE>InstantiationAwareBeanPostProcessor</CODE> and <CODE>MergedBeanDefinitionPostProcessor</CODE>.  
	
<CODE>InstantiationAwareBeanPostProcessor</CODE>   
  provides the following callback method: </P><PRE><CODE>PropertyValues postProcessPropertyValues( PropertyValues pvs, PropertyDescriptor[] pds, 
		                       Object bean, String beanName) throws BeansException;</CODE></PRE>  
	The callback hook  lets you  stipulate a value for a properties on the bean. We can use that to inject custom values.
		
		It turns out that Spring already provides a convenient framework object that you can use to handle the duty of injection called <CODE>InjectionMetadata</CODE>. The metadata represents information about the injection sites. You can extend this class and provide specific metadata about the call site - perhaps by caching the contents of the annotation that you're dealing with - and then use that to actually perform the injection. It is up to you to crawl the beans - including the super classes and so on - to gather the fields and property setters and then provide the relevant <CODE>InjectionMetadata</CODE>. 
		
 There's a lot of expectations here, but it's pretty simple to implement. I have provided a reusable base class (below) that generalizes all but the specific concerns. This code is written in Scala, but it can be reused from Java, once compiled. Alternatively, it wouldn't be hard to translate to Java. The only thing that wouldn't map nicely into Java are the uses of callback methods, which can be expressed nicely in Scala, but would require an object with a callback method. (I probably should re-write it in Java and provide callback interfaces  in lieu of the various callback methods or provide an abstract base class with well known, abstract callback methods) 
Anyway, you can basically ignore the implementation - it's presented so you can include it in your project (under the Apache 2 license, of course). 
See you after the example to 
    see how to implement it.
		
	 </P>
   <PRE><CODE>
	package com.joshlong.spring.util 
	import org.springframework.beans.factory.support.{RootBeanDefinition, MergedBeanDefinitionPostProcessor}
	import org.springframework.beans.factory.annotation.InjectionMetadata
	import org.springframework.beans.factory.BeanCreationException
	import java.beans.PropertyDescriptor
	import org.springframework.beans.factory.config.InstantiationAwareBeanPostProcessor
	import org.springframework.beans.PropertyValues
	import java.util.LinkedList
	import java.lang.{String, Class}
	import java.lang.reflect.{Method, Field, Member, Modifier}
	import org.apache.commons.logging.LogFactory
	class AnnotatedSiteInjectionPostProcessor [T &lt;: AnyRef, X &lt;: java.lang.annotation.Annotation]
	  (annotation: Class[X], fieldMetadataCallback: (X, Field) => InjectionMetadata.InjectedElement, methodMetadataCallback: (X, Method) => InjectionMetadata.InjectedElement)
	  extends InstantiationAwareBeanPostProcessor with MergedBeanDefinitionPostProcessor {
	  val logger = LogFactory.getLog(getClass)
	  def postProcessBeforeInstantiation(beanClass: Class[_], beanName: String) = null
	  def postProcessBeforeInitialization(bean: AnyRef, beanName: String) = bean
	  def postProcessAfterInstantiation(bean: AnyRef, beanName: String) = true
	  def postProcessAfterInitialization(bean: AnyRef, beanName: String) = bean
	  def postProcessMergedBeanDefinition(beanDefinition: RootBeanDefinition, beanType: Class[_], beanName: String) {
	    if (beanType != null) {
	      var metadata: InjectionMetadata = findInjectionSiteMetadata(beanType)
	      metadata.checkConfigMembers(beanDefinition)
	    }
	  }
	  def postProcessPropertyValues(pvs: PropertyValues, pds: Array[PropertyDescriptor], bean: AnyRef, beanName: String): PropertyValues = {
	    try {
	      logger.debug("about to attempt injection for class "+ bean.getClass )
	      val metadata = findInjectionSiteMetadata(bean.getClass)
	      metadata.inject(bean, beanName, pvs)
	    } catch {
	      case ex: Throwable =>
	        throw new BeanCreationException(beanName, "Injection of persistence dependencies failed", ex)
	    }
	    pvs
	  }
	  private def doWithMembers[T &lt;: Member](clazz: Class[_], filter: T =&gt; Boolean, fieldsFactory: (Class[_]) =&gt; Array[T], doWith: T =&gt; Unit) = {
	    var targetClass: Class[_] = clazz
	    do {
	      fieldsFactory(targetClass).filter(filter).foreach(doWith)
	      targetClass = targetClass.getSuperclass
	    } while (targetClass != null &amp;&amp; !targetClass.equals(classOf[AnyRef]))
	  }
	  private def findInjectionSiteMetadata(clazz: Class[_]): InjectionMetadata = {
	    val currElements = new LinkedList[InjectionMetadata.InjectedElement]
	    doWithMembers[Field](clazz, f => !Modifier.isStatic(f.getModifiers) &amp;&amp; f.getAnnotation(annotation) != null, c => c.getDeclaredFields, f => {
	      val fieldAnnotation = f.getAnnotation(annotation)
	      val injectedElement = fieldMetadataCallback(fieldAnnotation, f)
	      currElements.add(injectedElement)
	    })
	    doWithMembers[Method](clazz, f => !Modifier.isStatic(f.getModifiers) &amp;&amp; f.getAnnotation(annotation) != null, c => c.getDeclaredMethods, m => {
	      val methodAnnotation = m.getAnnotation(annotation)
	      val injectedElement = methodMetadataCallback(methodAnnotation, m)
	      currElements.add(injectedElement)
	    })
	    new InjectionMetadata(clazz, currElements)
	  }
	}
	</CODE></PRE>
	
<p>
	
	This class takes care of crawling the beans and performing the injection for you. All it needs from you is a subclass of  <CODE>InjectionMetadata.InjectedElement</CODE>, which you provide. That object in turn is responsible for ultimately providing the reference to the object that you want to be injected based on the metadata available. To make this easy, this particular responsibility is factored out as callback functions which you provide in your concrete implementation. 
	
 To do its work, you need to tell this class which annotation to match, and the type of object you'd like to inject (you could stipulate just a regular  <CODE>java.lang.Object</CODE>, or, in Scala terms, an <CODE>AnyRef</CODE>.).  
	</P>
 <P> 
	In this particular example, I want an annotation that can be used to lookup, and inject, a reference to an 
	<a href = "http://akka.io">Akka</a> actor, called a <CODE>ActorRef</CODE> in Akka parlance. Akka actors can live locally, or remotely, and when injected you can lookup an Actor by a logical name or by a path, which itself can be absolute, or relative, as Akka actors form supervisory hierarchies which map very much like a file system. For more information on the supported addressing scheme, check out <A href ="http://akka.io/docs/akka/2.0-M1/general/addressing.html">ths document from the Akka documentation</A>.
</p>
<P> So, the example (in Java) might look like this:</P>
<code><pre>@ActorReference("akka://my-system@serv.example.com:5678/app/service-b") private ActorRef actorRef ; </pre></CODE> or (in Scala)
	<code><pre>@ActorReference("akka://my-system@serv.example.com:5678/app/service-b") private var actorRef: ActorRef = _  </pre></CODE> 
	
Let's see how to implement this using the base class described above.
 </P>
<P> First, we need to extend the base class, and provide the callback hooks that tell the base class what to do with a field or property (a setter method).  In our case, this is pretty simple, and straight forward:
</p>
<PRE><CODE>class ActorReferenceAnnotatedSiteInjectPostProcessor(actorSystem: ActorSystem)
  extends AnnotatedSiteInjectionPostProcessor[ActorRef, ActorReference](
    classOf[akka.spring.ActorReference],
    (ar: ActorReference, f: Field) => new ActorReferenceInjectedElement(actorSystem, ar, f, null),
    (ar: ActorReference, m: Method) => new ActorReferenceInjectedElement(actorSystem, ar, m, BeanUtils.findPropertyForMethod(m)))
</CODE></PRE>
  <P> In this class, we extend the base class and call the constructor, passing in the class of the annotation to detect, a callback method which accepts an instance of the annotation and a particular instance of a field, and another callback method and a particular instance of a method.  The contract is that, given the instance of the annotation and matching field or method, you will return an instance (or sublcass of) the <CODE>InjectionMetadata.InjectedElement</CODE> class.  So, that's what we do, constructing an instance of <CODE> ActorReferenceInjectedElement</CODE> with the <CODE>ActorSystem</CODE> reference given in this subclass' constructor and the detected  <CODE>ActorReference</CODE> annotation, and the detected class member to which the annotation was attached, a <CODE>java.lang.reflect.Field</CODE> or <CODE>java.lang.reflect.Method</CODE> as well as the annotation itself.
	
	</p>
	 <P> The <CODE>ActorReferenceInjectedElement</CODE> is where the important work happens. 
	       Let's take a look at that class. 
	 </P>
	<PRE><CODE>class ActorReferenceInjectedElement(
  actorSystem: ActorSystem, 
  annotation:ActorReference, 
  member: Member, 
  propertyDescriptor: PropertyDescriptor) 
extends InjectionMetadata.InjectedElement(member, pd) {
			
  override def getResourceToInject(target: AnyRef, requestingBeanName: String) = actorSystem.actorFor(annotation.value() )
}
	</PRE></CODE>
	<P>If you read Scala, then this is a pretty simple class. The constructor (the prototype of which is included inline in the class declaration, at the top) expects an <CODE>ActorSystem</CODE>, a reference to the <CODE>ActorReference</CODE> annotation, a <CODE>java.lang.reflect.Member</CODE> (the common base class of both <CODE>Field</CODE> and <CODE>Method</CODE>), and a <CODE>PropertyDescriptor</CODE>. We don't use the <CODE>PropertyDescriptor</CODE> in this code (except to invoke the super constructor), but it's nice to know that we have it available. It might be <CODE>null</CODE>, however, if we're looking at a <CODE>java.lang.reflect.Field</CODE>. The unspoken bit is that the constructor arguments implicitly become class variables, and so are reference-able from other methods. 
		</p>
		<P>  In the class, we override the <CODE>getResourceToInject</CODE> method, providing the object to be injected. 
 We simply need a reference to the actor, so call <CODE>actorSystem.actorFor</CODE> with the String that was provided as part of the annotation (the <CODE>value()</CODE> field). We could, for example, provide a wrapper object  instead of the reference itself.  This is what happens when you use the <CODE>@PersistenceContext</code> annotation. It injects an <CODE>EntityManager </CODE> proxy that in turn manages thread-local  
 <CODE>EntityManager</CODE>s so that no matter which thread you call a method on, if it accesses the class <CODE>EntityManager</CODE>, it's guaranteed to be thread-safe. We don't do anything fancy like that in this case, but it's easy to see the potential there.
			</P>
			<P>Now, all that's left to do is register the <CODE>ActorReferenceAnnotatedSiteInjectPostProcessor</CODE> 
				 in your Spring configuration.  It's just a regular bean with constructor arguments. Spring detects the interfaces and calls the appropriate methods. Here's a code configuration based example (written in Scala):
				</p>
				<PRE><CODE>
@Configuration 
class MyAkkaConfiguration  {
  @Bean def actorSystem = ... // provide your own reference 
	
  @Bean def actorReferenceAnnotatedSiteInjectPostProcessor = 
    new ActorReferenceAnnotatedSiteInjectPostProcessor( this.actorSystem())	
	
  @Bean("sample") def someBeanThatDependsOnActors =
    new Object {  // anonymous inline object just to show you what a usage might look like 
      @ActorReference("myActor") 
      var someActor:ActorRef = _ 	
    }
} 					
object Main {
  val ac = new AnnotationConfigApplicationContext(classOf[MyAkkaConfiguration])
  val sample  = ac.getBean("sample")
  Assert.notNull( sample.actorSystem )	
}
		
</code></pre>
</p>
  			<a href="jl/blogPost/the_week_spring_31_went_ga_or_the_holidays_begin_now.html"><h1>The Week Spring 3.1 Went GA, or, The Holidays Begin Now!</h1></a>
  			<p>17 December 2011</p>
  			<p>
<P> 
  This week has been nothing short of a rollercoaster! 
 The week started with Spring 3.1 debuting, chock full of new features. From the release announcement, 
</p> 
<p>
 </P>
 <OL> <LI> The environment abstraction and the associated bean definition profiles, along with centrally configurable property sources for placeholder resolution.  </LI>
	<LI> Java-based application configuration based on @Enable* annotations on configuration classes, allowing for convenient container configuration: e.g. using @EnableTransactionManagement to activate declarative transaction processing.
		</LI>
		<LI>
			
 The cache abstraction with our declarative caching solution (@Cacheable etc) on top, focusing on convenient interaction between application code and cache providers.
</LI>
<LI> The Servlet 3.0 based <CODE>WebApplicationInitializer</CODE> mechanism for bootstrapping a Spring web application without web.xml! This is a key piece in Spring's web configuration story, providing a rich alternative to XML-based bootstrapping.
	</li>
 <LI> Revised MVC processing with flash attribute support, a new <CODE>@RequestPart</CODE> annotation, and further REST support refinements. This new <CODE>HandlerMapping</CODE>/<CODE>HandlerAdapter</CODE> variant is also highly extensible for custom MVC needs.
Beyond the above major themes, we invested into our O/R Mapping support, allowing for JPA package scanning without <CODE>persistence.xml</CODE>, and supporting Hibernate 4.0 (CR7 at this time - we will fully support Hibernate 4.0 GA once released). </LI>
<li>Last but not least, this is the first Spring release with first-class Java 7 support. While older Spring versions run perfectly fine on Java 7, Spring 3.1 goes the extra mile and fully supports JDBC 4.1 as well as convenient <CODE>ForkJoinPool</CODE> setup and injection.
	</li> 
	<LI> As usual, this release also includes many recent bug fixes. Spring 3.1 is fully compatible with Spring 3.0 and continues to have Java 5+ and Servlet 2.4+ as minimum system requirements. We recommend a Spring 3.1 upgrade to all Spring 3.0.x users. </LI>
	</ol>
	<P> 
 That was Tuesday. The web reacted as expected, with news announcements aplenty, <a href = "http://www.theserverside.com/news/thread.tss?thread_id=63370">on TheServerSide</a>, on <A href = "http://www.infoq.com/news/2011/12/spring31">InfoQ</a>, and on <a href= "http://www.dzone.com/links/r/spring_31_goes_ga.html">Dzone</a>, and <a href= "https://www.google.com/search?ix=heb&sourceid=chrome&ie=UTF-8&q=spring+3.1+goes+GA">on a zillion other sites, too</a>.
	</P>
	
	<P> Then, Costin Leau, who I'm pretty sure never sleeps, shipped  
		<a href= "http://www.springsource.org/node/3336">Spring Data Gemfire 1.1.0</a>, and <a href= "http://www.springsource.org/node/3337">Spring Data Redis 1.0.0</a>, 
   both of which have many new features and are compatible with Spring 3.1. 
 
</P>
<P> Then, <a href= "http://feedproxy.google.com/~r/SpringSourceTeamBlog/~3/YZic2TTMh1A/">Grails 2.0 was released</a>, also compatible with Spring 3.1. </P> 
 <P> <EM>Then</Em>,  <A href = "http://www.springsource.org/node/3338">vFabric SQLFire 1.0 was Released</a>!
	
	SQLFire, for those of you who haven't heard about it before, is an SQL92 compliant database that runs on top of GemFire, the distributed data grid product from VMware. It can be used to run, unchanged, a good many existing RDBMS applications and acheive drastic improvements in speed immediately.  This has little to do with Spring 3.1, but is instead a release of its own import, also released in the last week. 
	 </P>
	<P> Then, Spring Social 1.0.1 was released, <em>also</em> compatible with Spring 3.1! Spring Social's release is important too because other projects depend on it. So, we can expect to see the floodgates open even more soon with more releases, all because Spring 3.1 was released. 
		</p> 
		<P> To top things off, <a href= "http://www.springsource.org/node/3340">Oleg Zhurakousky's interview at JavaOne with InfoQ on messaging, Spring, and the cloud</a> is now available, and so is  <a href = "http://www.infoq.com/presentations/Making-the-Mobile-Web-Native-with-PhoneGap">Roy Clarkson and Keith Donald's SpringOne2GX talk on Making the Mobile Web Native with PhoneGap</a>. 
			</P> <P> Awesome. </P> 
			
			<P> I for one, need a breather. Can't wait until this weekend. 
				</P> 
			
			<P> 
				 Next week's going to be crazy, as well. I'll be at the <a href= "http://www.sdjug.org/">San Diego JUG on December 20th</a>, talking about all things Spring and Cloud Foundry. There are actually two talks, one on Spring and Cloud Foundry, and another still on Tailoring Spring for Custom Usage. 
				 Hope to see you there!
 
			</P>	
			
				
			
			
</p>
  			<a href="jl/blogPost/mamacita.html"><h1>Mamacita...</h1></a>
  			<p>10 December 2011</p>
  			<p>
<P> Yeah, so <em><a href="http://www.youtube.com/watch?v=N3eAaxQVaHE">this</a></em> is stuck in my head. <em> Sigh</em>. It's really catchy... the first twenty or thirty times.</P>
</p>
  			<a href="jl/blogPost/simple_things_i_do_to_os_x_itself_whenever_i_set_it_up.html"><h1>Simple things I do to OS X itself whenever I set it up</h1></a>
  			<p>03 December 2011</p>
  			<p>
<P> I do a few things to every OS X installation to make them more useful. Most of the things I mention below are things you can do to OS X itself, some are third party applications that are generally useful. I hope they help you, but really I'm listing them here so  I don't have to rediscover this stuff again next time I'm doing a fresh OS X installation. ;-)   My hope is that these are general, generic and useful enough to be applicable for everybody, not just software developers with a penchant for photography like myself. 
	
	
	I've put all the things I could remember here, but I'm sure I've probably forgotten a few, too. I'l follow up if I think of anything. 
</P>
<OL> <LI> <b>Enable Remote Login</b>  Go to <EM>System Preferences</EM> &gt; <EM>Sharing</EM> &gt; and then enable <EM>Remote Login</EM>. This will give you SSH access to your machine, which of course should need  no justification. 
	</LI>
<LI>  <B>Add a Login menu to the Finder</b> Go to <EM>System Preferences</EM> &gt; <EM>Users &amp; Groups</em> &gt; and select the <EM>Login Options</EM> item on the left, with the picture of the house next to it. Then, choose <EM>Show Input menu in Login Window</EM> and select <EM>Show fast User Switching Menu as [Full Name]</EM>.
	 This is useful as a quick way to lock the screen, as well as change accounts. You can, of course, use Hot Corners to trigger the login screen, but I found I kept accidentally triggering them.
	
</LI>
<LI>  <B>Show a Full Date </B>  Go to <EM>System Preferences</EM> &gt; Date &amp; Time &gt; and then choose <EM>Show the day of the week</EM>, <EM>Show date</EM>, <EM>Use a 24-hour clock</EM>, and <EM>Display the time with seconds</EM>. I also <u>uncheck</u> <EM>Flash the time separators</EM>.	
	 </LI> 
	<LI> <B>
	 Make the Dock Less Obtrusive</B>	Go to <EM>System Preferences</EM> &gt; Date &amp; Time &gt; and select <EM>Minimize windows into application icon</EM>, <EM>Automatically hide and show the Dock</EM>, and <EM>Show indicator lights for open applications</EM>.  Finally, drag the divider - it looks like a broken, vertical line that narrows towards the top - between the dock and the rest of the icons and make the dock as small as you're comfortable seeing with and could still reach with some accuracy with a flick of the mouse. 
		 </LI>
		<LI>  <B>Know Your Shortcuts</B> While OS X's Finder is pretty shortcut-phobic, it does have some pretty useful ones. 
			
			<TABLE border="0"  cellpadding="0" cellspacing="5">
				<TR> <TD width = "100" align="right">Home Directory</TD>
				  <TD width = "10">&nbsp;</TD>
			    <TD>COMMAND + SHIFT + H</td></tr>
				<TR> <TD align="right">Applications Directory</TD>
				  <TD>&nbsp;</TD>
			    <TD>COMMAND + SHIFT + A</td></tr>
				<TR> <TD align="right">Utilities Directory</TD>
				  <TD>&nbsp;</TD>
			    <TD>COMMAND + SHIFT + U</td></tr>
				<TR> <TD align="right">Desktop Directory</TD>
				  <TD>&nbsp;</TD>
			    <TD>COMMAND + SHIFT + D</td></tr>	
						<TR> <TD align="right">  Computer window </TD>
						  <TD>&nbsp;</TD>
					    <TD>COMMAND + SHIFT + C</td></tr>																											
					</table> 
					For more, consult <a href="http://support.apple.com/kb/ht1343">this useful Apple support doc</a>.
			
			   </LI>
		<LI>   
			<B> Clean the DockRot</b> Drag Everything on the dock away that you're not absolutely sure you're going to need. I try to keep mine as an indicator of the applications that are open, so I remove about everything except the <EM>Trash</EM>, <EM>Launchpad</EM>, and <EM>Mission Control</EM>.  
				
				There are lots of ways to still get to your often used applications.  You can of course use something like Spotlight, but there are even better (albeit third party) tools like <A  href= "http://qsapp.com/">QuickSilver</A> and <A href= "http://www.alfredapp.com/">Alfred</A> that can make all applications trivial to access.  I know I implied I wasn't going to mention third party applications, so let me also remind you that you can get at your applications very quickly by using Spotlight or the two commands mentioned above - COMMND + SHIFT + U (for the <EM>Utilities</EM> folder) and COMMAND + SHIFT + A (for the <EM>Applications</EM> folder).
				
			</LI>
	<LI> 
 <B>Disable Spotlight</b>    	 Since I don't ask much of the Dock, and since I use things like Alfred or Quick Silver, it's useful to reuse  Spotlight's keyboard shortcut for those alternative application switchers. While there are a lot of ways to disable Spotlight more effectively, for my purposes it is enough to simply disable the key command and render Spotlight partially inert. Go to <EM>System Preferences</EM> &gt; <EM>Spotlight</EM>, and uncheck every checkbox there under the <EM>Search Results</EM> list. Uncheck the two options below, <EM>Spotlight menu keyboard shortcut</EM> and <EM>Spotlight window keyboard shortcut</EM>.
    </LI> 
 <LI> <B>Speak Truth (About) Power</B> You can view detailed information about your Mac's power consumption (if you're on a laptop variety) by going to 
	   <EM>System Preferences</EM> &gt; <EM>Energy Saver</EM> and then selecting <EM>Show battery status in menu bar</EM>. In the menu bar, right click on the power icon, and choose <EM>Show</EM> &gt; <EM>Time</EM> (to see how much time you've got left before the charge runs out) or <EM>Show</EM> &gt; <EM>Percentage</EM> to see how much battery power you've got left.  </li>
	<LI> 
<B>		   Switch Resolutions on the Fly</B> I end up plugging into projectors and into various monitors a lot in my work, so keep in mind this might be more valuable to me than it is to you. Go to   <EM>System Preferences</EM> &gt; then select <EM>Show displays in menu bar</EM>. This will install a menu in the menu bar that you can use to quickly switch resolutions and access monitor settings.
		</LI>
		<LI> <B>Install a better browser</B> I've always installed as many browsers as possible. It used to be because I wanted to have a better developer-friendly tool to develop web applications with, or because I wanted to have a browsers to test the rendering of my web applications, but these days I'd recommend anybody do it because the default browsers in all operating systems usually leave something to be desired. OS X and Safari, in my humblest of opinions, is no different.  I'm using Chrome pretty happily these days, but that's not to say you need to. Next week Firefox might be back on top again! Who knows. Either way, get yourself a <A href="http://www.google.com/chrome">better</A> <A href="http://www.getfirefox.com">browser</A>.  </LI>
		<LI> <B>S<b>Witch</b> it up</b>  
			 Switching between applications with the COMMAND + TAB shortcut in OS X is tedious. If you are using an application like Chrome which can have multiple document windows, then you will simply be returned to the application itself, not any specific document in that application. Similarly, if you have minimized a window, COMMAND + TAB'ing to that window will not "activate" and focus on it. So, I sought another option and the intertubes pointed me to <A href="http://manytricks.com/witch/">Witch</a>. It fixes all of these problems, and more, although be warned it costs (USD $14, as of this writing).
				 
			</LI>
</OL>
</p>
  			<a href="jl/blogPost/devoxx_2011_report_and_seattle_mongo_2011.html"><h1>Devoxx 2011 Report and Seattle Mongo 2011</h1></a>
  			<p>30 November 2011</p>
  			<p>
<TABLE border="0"   cellpadding="0" cellspacing="0"><TR>
    <TD><img src = "media/17877" width="703"  height = "350"/></TD><TD><img src = "media/17876" width="233"  height = "350"/></TD></TR></table>
    
<P> 
  <A HREF  = "http://devoxx.com">Devoxx</a> is a huge conference that redefines "community." I like the conference - a true <EM>paradise</EM> - it has a lot more soul than JavaOne and represents a really nice sampling of what's what out there, not just what Oracle's working on. So, it was with great pleasure that I went, despite being pretty sick. I stopped by the doctor's on my way out of town and loaded up in antibiotics then began the 20-hour door-to-door journey from Los Angeles, United States to Antwerp, Belgium.  </P><p> 
	  I gave a 15 minute <EM>quickie</EM> on Spring Roo, a 3-hour university talk on <a href= "http://www.springframework.org">Spring</a> on <a href= "http://www.cloudfoundry.org">Cloud Foundry</a> (with Chris Richardson), a regular talk on Spring on Cloud Foundry (with Patrick Chanezon),  another regular talk on social Spring applications using Spring Social and Spring Integration, and I helped lead the Spring BOF.  Basically, I had more fun than anybody should be allowed. I may have looked (and felt)
	  like death warmed over, but I had a <EM>wonderful</EM> time. All the talks were well attended, and I loved the feedback! Keep it coming, guys.  	</P>  
      
      <P>  
 That said, I'm now on a flight heading to Seattle, Washington, where I'll present on <a href= "http://www.cloudfoundry.org">Cloud Foundry</a> and <a href= "http://www.mongodb.org">Mongo DB</a> at the <A HREF= "http://www.10gen.com/events/mongo-seattle-2011">Mongo Seattle</A> event. If you're in town, come see me! We can talk Spring, big data, cloud and anything else you'd like. Also,  if you know the area, I'd love to know which coffee shops will help me to best endure the inclement weather. Ping me on <a href="http://www.twitter.com/starbuxman">Twitter</a> or on <a href="https://plus.google.com/105805020312347758498">Google+</a>.
       
       See you there!</P>
	
</p>
  			<a href="jl/blogPost/trip_roundup_for_october_and_november.html"><h1>Trip Roundup for October and November</h1></a>
  			<p>11 November 2011</p>
  			<p>
<P> What a ridiculous blur of insanely fun travel and technology. </P>
<P> I spoke at <A HREF= "http://www.10gen.com/events/mongo-chicago-2011">the MongoDB Chicago conference</A> on the 18th of October on using
  MongoDB with <a href="http://www.springsource.org/spring-data">Spring Data</a> Document on <a href= "http://www.cloudfoundry.org">Cloud Foundry</A>.
  
  This was a fantastic event and the response seemed enthusiastic about the cloud and, of course, Cloud Foundry. After all, Cloud Foundry was among the first (<em>the</EM> first?) major PaaS players to bring MongoDB to market.  
  
  On a related note, I'm honored to say that I'll be giving the same talk (basically) at <A href= "http://www.10gen.com/events/mongo-seattle-2011">Mongo Seattle, on December 1</A>. If you're in Seattle, and want to grab a beer (or coffee!), then ping me on <A href= "http://twitter.com/starbuxman">Twitter</a> or on <A href = "https://plus.google.com/105805020312347758498/posts">Google+</A>. 
  Naturally, you could always just come to the Mongo Seattle event - $100 for a fully day of talks from experts in the field is <EM>amazingly</EM> good deal (and, at this point, an ideal holiday gift!). </P>
<P> That was October 18th. I flew home, caught my breath, and then <em>flew back</EM> to Chicago for <a href= "http://www.SpringOne2GX.com">SpringOne2GX</a>, which I blogged about <A href= "http://joshlong.com/jl/blogPost/springone2gx_2011.html">recently</A>.
  
  SpringOne2GX  was <EM>amazing</EM>. 
  I ended up doing not only the three talks I blogged about before, but an impromptu joint session with Roy Clarkson on HTML5 mobile application development. The whole conference is something not to be missed. What an absolutely amazing show filled with amazing people.</P>
<TABLE width="605"   BORDER="0" CELLPADDING ="0" CELLSPACING="0">
  <tr>
    <tD width="300"><img src = "media/17853"  width = "300" alt = "the venue at Mongo Chicago was called The Library, in a library"/></td>
    <TD width="300" ><img style="margin-left:5px;" src = "media/17852" width = "300"/></td>
  </tr>
  <tr>
    <td valign="top" style = "padding-bottom:5px;padding-top:5px; "><em> The Mongo Chicago venue at "The Library"</em></td>
     <td height="50" style = "padding-top:5px;padding-bottom:5px; padding-left:5px;" valign="top"><EM>Adam Fitzgerald kicking off the
      keynote festivities at <B>SpringOne2GX</b></EM></td>
  </tr>
 
</table>
<table width="605" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td  valign="top"><img src = "media/17854" width = "605"/></td>
  </tr>
  <tr>
    <td  valign="top" style = "padding-top:5px; padding-bottom:5px;"><em> The Chicago skyline  at night from  one of those trips. I love how the clouds hung in the air, making an otherwise mundane photo really beautiful. </em></td>
  </tr>
</table> 
 <P> 
  I returned home just long enough to get a fresh load of laundry and then set back out to Sofia, Bulgaria, for one of my absolute favorite conferences, <a href= "http://java2days.com">Java2Days</a>.  
  
  The conference, in South East Europe, is at the nexus of Greece, Turkey, Italy, Armenia, etc., so it attracts a <EM>lot</EM> of people who are really enthusiastic about the conference and the technology.
 </P>
<table width="605" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td  valign="top"><img src = "media/17851" width = "605"/></td>
  </tr>
  <tr>
    <td  valign="top" style = "padding-top:5px;padding-bottom:5px;"> <EM>I met Jean Claude van Damme, and survived!</EM></td>
  </tr>
</table>
 <P> 
  The conference itself is unrivaled, of course, but the real draw is the chance you have to meet and greet and to take in the culture. Pack your stomach pump, though, the <em><a href= "http://en.wikipedia.org/wiki/Rakia">rakia</a></em> (and the fraternizing, dancing and fun that accompanies it!)  tends to sneak up on you!  
  
  I was at dinner on with  the other speakers and with attendees from the show and in walks <EM>Jean Claude van Damme</EM> who was in town, apparently, shooting the <a href="http://www.novinite.com/view_news.php?id=133389"><em>Expendables 2</em></a>. He sat down, celebrated a bit and was even kind enough to indulge me in a photo, which I proudly post here. <EM>Merci, Jean-Claude!</EM>
 </P>
 
 <P>  I returned home on the 6th - giving me just enough time to get  a small flu and to prepare my decks for <a href= "http://devoxx.com/display/DV11/Josh+Long">Devoxx</a>, which I leave for on the 12th (in 24 hours, or so, basically). 
 
 If you're in Belgium, this is <EM>the</EM> event to see! Come see me talk with Chris Richardson on Spring on Cloudfoundry for the university talk (3 hours! We're going to cover NoSQL, AMQP, the <CODE>&lt;cloud:/&gt;</CODE>  namespace, and much more!) and with Patrick Chanezon for a 1-hour introduction to getting started with Spring on CloudFoundry.    Additionally, I'll be participating in the Spring BOF. I've also got a  
  Spring Roo "quickie" talk, and a talk on socializing your Spring applications using Spring Social. 
 
  Should be utterly exhausting, but I look forward to seeing you all there! We're gonna have a lot of fun. 
 </P>
</p>
  			<a href="jl/blogPost/springone2gx_2011.html"><h1>SpringOne2GX 2011</h1></a>
  			<p>24 October 2011</p>
  			<p>
<P>  <img src = "media/17835" style  = "float:left; margin-right:10px;"/><a href= "http://www.springone2gx.com/conference/chicago/2011/10/home">SpringOne2GX 2011 is upon us</a>!  I'm in a terminal at San Francisco Airport ("SFO," for those of us in the live-on-plains biz) waiting for my flight to Chicago. This year's going to be ridiculous. Honestly, I can't wait. 
</P>
<P>   I've <a href= "http://www.springone2gx.com/conference/speaker/josh_long">got <EM>three</EM> talks</A> - each 1.5 hours! So, eh, if you can't get enough of my ugly mug, then please join me for some of these  talks! </P>
	
	<P> One talk is with Roy Clarkson, we're co-presenting on <b>Native Android Development</b>.  This talk I look forward to quite a bit - Android's a powerful platform and certainly the most ubiquitious, so learning how to build a better Android application from client to server is <EM>very</EM> useful!  (I can't wait to make it even more ubiquitous when I buy my <a href="http://www.google.com/nexus">Galaxy Nexus!</a>). 
 </P> 
<P> <img src = "media/17834" style = "float:right; margin-left :10px;"/>  My second talk is a deep dive at Spring Batch. Sure, anybody can sling together a Spring Batch application, but do you really know what's going on there? Do you know what you <em>could</em> do with Spring Batch? Spring Batch's so amazingly robust and feature rich that a lot of people just plunk down what they need to get their occasional batch processing solution finished, but don't stop to reflect on the power-user features as well as the details. This is a credit to Spring Batch - after all, the 80% case is <EM>super</EM> simple. But, you can take it and further, and this talk should be a great start for the curious. Additionally, because I'll be diving deep into some basic concepts, this talk will also be a good introduction to Spring Batch for the uninitiated. 
	</P>
	<p> 
	My last talk is that's a bit more medium-to-advanced level. In this talk, I'll introduce some of the Spring framework's various SPIs. Spring's a <em>very</EM> simple technology and it features a rich component model and framework libraries that you can pull down and use, a la carte. However, a lot of Spring's power is in the stuff right below the surface - the extension points. Come learn about some of my favorite extension points in this talk. Remember, these extension points are the same ones that we leverage in building other Spring frameworks like Spring Integration, Spring Batch, etc., so this isn't just idle speculation! The most demanding user of the Spring framework is often the  engineer trying to build a sister project!
	</p>
</p>
  			<a href="jl/blogPost/great_content_to_get_started_with_neo4j_and_spring_data_graph.html"><h1>Great Content to get Started with Neo4J and Spring Data Graph</h1></a>
  			<p>10 October 2011</p>
  			<p>
<P>  I recently had somebody ask me what the best content for getting started with <a href="http://neo4j.org/">Neo4J</a> is. Naturally, my answer was to grab <a href="http://www.springsource.org/spring-data/neo4j">Spring Data Graph</a> and don't look back. But that's not entirely fair. Admittedly, you might be better served by simply learning Neo4J and then layering in the Spring Data support to reduce a lot of the tedium. So, without further ado, here's a list of great content that I put together for people who are looking to learn Neo4j and Spring Data Graph (which works with Neo4j.).
</p>
<UL>
 <LI>
 Start with <a href="http://docs.neo4j.org/chunked/snapshot/">the documentation</a>, of course. Like SpringSource, the Neo4j team goes to extreme lengths to make sure their documentation reflects the APIs as the APIs evolve. If you want to get an idea of <EM> how </eM> extreme, just ask <a href="http://www.twitter.com/peterneubauer">Peter Neubauer</a>.   The docs provide a good introduction to the APIs and modeling concepts and - in parts III and IV - introduce  how to operate, scale and manage Neo4j instances. 
 </LI>
 <Li> 
 Jim Webber, lead author of <A href="http://shop.oreilly.com/product/9780596805838.do">REST in Practice</A> (one of my favorite books, by the way!), now works for Neo4j Inc., and he put togehter an amazing <A href="https://github.com/jimwebber/neo4j-tutorial">Koan-style tutorial for everybody to consume on Github</a>. Check it out!
</LI>
 <LI>  Check out the videos. There are lots of them. Neo4J has their <a href="http://videos.neo4j.org">content on videos.neo4j.org</a>, and buried in all the great Spring content on <a href="http://www.youtube.com/SpringSourceDev">the SpringSourceDev channel on YouTube</a>, there's the 
     great introduction to the Spring Data Graph project with project <a href="http://www.youtube.com/watch?v=9qVs9vxx8lk">lead Dr. Mark Pollack and Neo4j CEO Emil Eifrem</a>. 
 </LI>
 <LI> 
 Steve Mayzak and I co-authored a   book, "<a href="http://oreilly.com/catalog/0636920020981">Getting Started with Spring Roo</a>," from O'Reilly. We were honored to have 
            Michael Hunger, from the Neo4j team, contribute and co-author the content on the Roo addon for the Spring Data Graph  project.  O'Reilly has generously made this book available for free to the community; <a href="http://spring-roo-repository.springsource.org/Getting_Started_with_Roo.pdf">check it out!</a>  
 </LI>  <LI> For a great example (running, and open source, too!) of Spring Data Graph, check out <a href="http://blog.neo4j.org/2011/04/spring-data-graph-10-integration.html">this blog introducing the example along with some background information.</a> Then, check out <a href="https://github.com/springsource/spring-data-graph-examples">the source code</a>. 
</li> <LI>  Michael Hunger also co-authored an amazing book, <a href="http://static.springsource.org/spring-data/data-graph/snapshot-site/reference/pdf/spring-data-graph-reference.pdf">The Spring Data Graph Guide Book</a>.  This book is a <EM>great</EM> piece of content. 
</LI>
</UL>
</p>
  			<a href="jl/blogPost/python_good_python_on_cloudfoundry_better.html"><h1>Python? Good. Python on CloudFoundry? Better.</h1></a>
  			<p>01 October 2011</p>
  			<p>
<P> I love the characterization of <a href= "http://www.infoq.com/news/2011/09/python-django-heroku">Python</A> in this post    from InfoQ:
</P>
<BLOCKQUOtE>"For Adam, Python fostered the development of modern web frameworks, with Zope and Plone. These frameworks introduced concepts like separation of business and display logic via view templating, ORMs for database interaction, and test-driven development were built into Zope 5 years before Rails was born. The main reason why they have not been successful in the market is their complexity and a steep learning curve while being way ahead of their time. Eventually, and despite the initial lack of involvement of the Python community, Django emerged as a strong competitor to rails. .." </BLOCKQUOTE>
<P> 
That basically says it all: <a href ="http://en.wikipedia.org/wiki/Zope">Zope</a> (and <a href ="http://plone.org/">Plone</a>) was an integrated, productive framework/application server before EJB 1.0x and it already had ORM, a proper MVC web framework, etc. It was no wonder that EJB and J2EE left a lot of us who had Python backgrounds a little... underwhelmed. I love the point surrounding the "noise" of the community: Python's <em>everywhere</em> - it's a "sleeper" success and yet most people would still not describe it as either legacy or <a href ="http://www.twitter.com/hipsterhacker"><Em>hipster</EM></a>.  I remember learning Python in the late 90's and it had already seen adoption by companies that were doing amazing things. That's actually what struck me so much about Python: people who could use <EM>any</EM> language and technology they wanted, as long as they got results, chose Python. Among the companies that "chose" Python instead of C++ or PHP or even Java (at that point) were unambitious, fly-by-night organizations like Google, NASA, ILM, and many, many more. That spoke  <EM>volumes</EM> more than all the noise Node's generated. (As an aside, if you want to <em>actually</EM> build software and take advantage of Node's promise with a language and platform you trust, may I recommend <a  HREF="https://github.com/purplefox/node.x">Node.X?</a>)
</P> <P>		 Python offers a wealth of options for developers. My first Python use cases - even at Python 1.5 a decade ago - were all about exploiting Python's "batteries included" mantra to build distributed applications on grids. Oh, and text processing. Honestly, Python does a remarkable job at text processing. I don't miss Perl, at all!).  </P>
<P> 
I note that if you want a seriously good Python cloud-story, check out ActiveState's (you know, ActiveState, the maker of leading IDEs and integrated language bundles/SDKs for Python, Perl, Tcl, etc., for at least the last decade?) <a href= "http://www.activestate.com/cloud">Stackato</A>, which is based on <a href= "http://www.cloudfoundry.org">CloudFoundry, the open-source PaaS</a>, is awesome. As much as I love the <A href= "http://blog.springsource.com/2011/08/24/micro-cloud-foundry-for-spring-developers/">MicroCloud Foundry VM instance</a>, the truth is that the ActiveState guys beat us (I work for <a href="http://blog.springsource.com/author/jolong/">SpringSource</a>, a division of VMware) to the punch: they had a VMWare image running their port of the CloudFoundry cloud <em>before</EM> VMware! Awesome ;-)  </P> 
 
</p>
  			<a href="jl/blogPost/libraries_and_component_models_and_apis_in_spring_oh_my.html"><h1>Libraries and Component Models and APIs (in Spring), Oh My!</h1></a>
  			<p>23 September 2011</p>
  			<p>
<P> One of the most importants about a framework is that it is  pluggable, that it is <a href="http://en.wikipedia.org/wiki/Extensibility">extensible</a>. 
This is very much a core promise of a good framework, and separates it from mere libraries. 
Most of the Spring frameworks are exposed as libraries and component models. These are the two levels most people interact with Spring: they reuse the numerous and powerful libraries as-is, or - when the libraries aren't able to read your mind, Spring provides some surface-level API against which to write pluggable code for certain responsibilities.
  For example, Spring Integration comes with batteries included, many, many batteries, actually. In this case, the batteries I refer to are the integration technologies supported in terms of the various modules that are provided: web services, databases, message brokers (JMS, AMQP), file systems (FTP, FTPS, SFTP, and regular filesystem mounts), etc., etc. The same is true of Spring Batch and indeed of all the other Spring frameworks. 
If the batteries included aren't quite what you want, and you'd like to plug in your own logic, the 80% cases are accounted for in terms of the component models that the projects expose.  
 </p><P> In Spring Integration, the 80% case is to reuse the libraries. It is possible to not write a single line of Java code and solve complex problems using Spring's declarative XML namespaces. 
When this isn't enough, the next tier of support is the Spring Integration component model that works with annotations.  The only time you need to use these component models is to help the framework fill in the gaps, to understand the parts of your application that it could'nt possibly already know or infer.  
 For example,  if you want to provide conditional routing based on your business logic - the integration equivalent of an <em>if/else</em> statement - then you need to work in terms of a <EM>router</EM>.
Here's how you write the rough skeleton of a custom router, one that's specific to your application, in Spring Integration:
</P><pre>
@Router( ... )
public class MyBlogRouter  { 
 public String chooseWhichChannelBasedOnTheInputMessage( Message&lt;String&gt; msg) { 
   if(msg.getPayload().equals( "a") { 
     return "channelA"; 
   }
   ...
 }
}
</pre>
 
<p>
 In Spring MVC, the 80% case is creating a <EM> controller</EM> that can handle requests as they come in from the web, and naturally, there's an easy, declarative way of telling Spring MVC about controllers, like this: 
</P>
<pre>
@Controller 
public class MyBlogController { 
  @RequestMapping( ...)
  public String handleRequest( @PathVariable("id") long id) { 
   ... 
  }
} 
</pre>  
<P>  In both of these cases, the component model lives side by side with the framework itself. There's an interplay, an unspoken contract: 
the framework provides all the machinery to automate as much as possible. Ideally, when you do come to the point of needing to plug in code, it's because you're trying to express something quintessentially related to your business problem, and not focusing on the machinery of writing an integration flow, or handling HTTP requests. 
Small focused hooks provide a lot of power, and these two layers go a long way for most users.
  
</p> 
<p>  
 What a lot of people don't know is that all of the Spring frameworks (notably, Spring core itself) provide a third echelon of support, of functionality. To me, this third echelon is the APIs that it provides against which you can code. I like to think that, when the 80% cases aren't enough, you should look for the 20%  answer in the APIs.  </p><P>You deal with these APIs a lot, and sometimes they overlap with the component models, so the line can be a bit blurry. One <EM>blurry</EM> example is if you register a bean that implements <CODE>InitializingBean</CODE>, then Spring will automatically invoke the <CODE>InitializingBean#afterPropertiesSet()</CODE> method when the bean has had its dependencies satisfied and is about to be made available in the context. This, in effect, gives you a construction hook, like a second constructor that gets called <em>after</EM> the properties have been satisfied. This is an API. You get power by implementing an interface. However, from the component model perspective, there's an alternative: you can use the JSR 250 annotations, e.g., <CODE>@javax.annotation.PostConstruct</CODE> to trigger that <EM>any</EM> arbitrary method be invoked.   Here's an example:
 </p> 
<pre>
@Component
public class MyClass { 
  @javax.inject.Inject DataSource dataSource ;
  @PostConstruct 
  public void setup() { ... }
}
</pre> 
<P>  
 Either one's fine, and at this level it's largely a matter of personal style. </P><P> Taking the examples further, and moving from the ambiguous to the clearly API-centric, Spring provides convenient interfaces that give you access to the lower level  workings of the Spring framework. Examples of these include the <CODE>BeanPostProcessor</CODE> and the <CODE>BeanFactoryPostProcessor</CoDE>.  At this level, you start tapping a <EM>lot</EM> of power. 
  
  Admittedly, a lot of people aren't going to need or consume the framework in this way, but it's nice to know it's there. These APIs are the force multipliers that the other Spring frameworks leverage to provide the powerful abstractions for you.  Ever wondered how Spring does its magic when you use  declarative transaction  annotation, <CODE>@Transactional</CODE>?  You might be surprised to learn there's a <CODE>BeanPostProcessor</CODE> involved. Nothing in the Spring framework is <EM>magic</EM> -- you can build infrastructure or framework code just like the other Spring projects do for your users by tapping into these APIs. 
  </P><P>
Exposing your frameworks and common abstractions in terms of these well known, idiomatic Spring APIs provides a powerful, familiar surface to your API that consumers of your abstraction can leverage.   
 There are extension points all over the place in Spring - places where you can provide your own implementation that fits into the machinery - an example of the <em>strategy</em> pattern. 
 In Spring MVC, <a href="http://static.springsource.org/spring/docs/2.0.x/reference/view.html"><CODE>ViewResolver</CODE></a>s help map abstract view names (Strings) into concrete view resources (that might mean a <CODE>.jsp</CODE>, a Velocity or <a href="http://www.thymeleaf.org/">ThymeLeaf</A> template, or any of a zillion other implementations.  In core Spring's REST support there exists an interface, <CODE>HttpMessageConverter&lt;T&gt;</CODE>, that Spring uses to figure out how to convert HTTP request and response payloads into domain-centric objects: a POST request with bytes might becomes a <CODE>java.io.InputStream</CODE>, a response with a JAXB object might need to be marshalled into XML and then sent as the response, etc. Those strategies are  all codified as implementations of this interface. Adding new ones is quite easy.  In Spring Integration, outbound adapters implement the <CODE>MessageHandler</CODE> interface, and provide the interface between the messaging code and an external system. You can add new ones and teach Spring Integration new tricks by implementing this interface.  
</P>
<p>Anyway, I could go on, but - for my own good - I won't, since I wouldn't have anything left for my talk at SpringOne! </P><P>What talk at SpringOne, you say? Oh Yeah! About that: if you want to hear more about these extensibility hooks and the powerful, intricate layering  that's possible using the Spring frameworks, come check out my talk at SpringOne on <a href="http://www.springone2gx.com/conference/chicago/2011/10/session?id=24033">"Tailoring Spring for Custom Usage" in Chicago, in October 2011!</a>
</P>
  
 
 
</p>
  			<a href="jl/blogPost/trip_roundup_and_the_dallas_spring_user_group.html"><h1>Trip Roundup and The Dallas Spring User Group</h1></a>
  			<p>17 September 2011</p>
  			<p>
<P> Hey sports fans!  What a crazy few weeks! September started off with a bang as I found myself in sunny Las Vegas for <a href= "http://www.vmworld.com/community/conference/live/">VMWorld 2011</a>. I really enjoyed the time there to connect with my ops- and system-centric brethren. What a great crowd, and the excitement surrounding the exodus to the <a href= "http://www.cloudfoundry.com">cloud</a> was <EM>palatable</em>. People are excited about vFabric, and about connecting their applications  with a truly integrated stack, RabbitMQ, GemFire, tcServer, etc., and they're doubly excited that they have in the Spring portfolion a unified programming model for all of these technologies. So, exciting stuff, definitely. If you missed all the excitement, don't fret: lots of was recorded and made available <a href="http://www.youtube.com/user/VMworldTV">here</a>!
 	 </p> <p> The week after that, I found myself en-route for Oslo, Norway, for the 10th annual <a href="http://javazone.no/2011">JavaZone</a> conference, which <EM>rocked</EM>. This was my second time speaking there and I can tell you, in no uncertain terms, that vikings rock! What a great community. This conference seems like the conference for the thinking developer, and featured plenty of content on Spring and Scala this year.  
	</p>
	 <P> I also had the pleasure of taking a tour of the Norwegian fjords with colleague and great guy <a href="http://www.chrisrichardson.net/">Chris Richardson</a>. If I get around to it I'll try to post some incriminating photos later :-) </P>
	<p> 
	The best part? Even if you weren't lucky enough to be there, you can still partake in the fun by watching the recorded videos which JavaZone's generously <a href="http://www.vimeo.com/javazone">put online on Vimeo for free</a>.  There's of course my talk  on <a href="http://vimeo.com/28760638">Spring configuration</a>, Costin Leau's the <a href="http://vimeo.com/28721724">Spring 3.1 caching abstraction</a>, Mark Fisher's talk on <a href="http://vimeo.com/28795501">Spring Integration with CloudFoundry</a> (bonus: the talk, <a href="http://vimeo.com/28606559">"Event Driven Architecture with the Spring framework"</a> from last year is also available!), Costin's other talk on <a  href="http://vimeo.com/28793832">Spring Data</a>, and Chris Richardson's talk on  <a href="http://vimeo.com/28769090">Polyglot Persistence</a>, all available in English. If you speak Norwegian, then there's ample content for you, as well, including a talk on <a href="http://vimeo.com/28764778">Spring Java configuration in Scala</a>, and on performance gains with <a href="http://vimeo.com/28760363">Spring Batch</a>.  I think I saw some others, too, but as I don't speak Norwegian, I can't be too sure! Enjoy! 		
	 </p> 
	
	<p> As if that weren't enough excitement, next week I have the <strong>honor</strong> of speaking at the <A href= "http://www.springdallasug.org/?p=127">Dallas Spring User Group</a>. I'll be giving two related talks, one   on the SPIs exposed to the interested Java developer in   core Spring and,  one on the SPIs exposed in Spring Integration. Both talks are done with an eye towards extending the framework to accomodate advanced use cases. </p><p>Of course, some of it may be old news for the veteran and whip-smart Spring users at that particular group, but we'll see if I can't surprise a few of 'em! ;-) If you're in the Dallas, Texas area and want to talk Spring, come on down or ping me on Twitter at <a  href  ="http://www.twitter.com/starbuxman">@starbuxman</a>.
</p>
</p>
  			<a href="jl/blogPost/happiness_is.html"><h1>Happiness is...</h1></a>
  			<p>31 August 2011</p>
  			<p>
<P> Happiness is having <B>RabbitMQ</B> and <B>PostgreSQL</B> in the output of my <CODE>vmc services</CODE> invocation ;-) 
</P>
<PRE>
 vmc target api.cloudfoundry.com 
 vmc login 
 ...
 vmc services 
</PRE> 
<img src ="media/17883" style = "border:1px solid black; margin:10px; margin-left:0; margin-right :0;" />
<p>What a wild month for <a  href="http://www.cloudfoundry.com">CloudFoundry</a>! <B><A HREF="http://blog.springsource.com/2011/08/16/chatting-in-the-cloud-part-1/">RabbitMQ</a></B>! <A HREF="http://blog.springsource.com/2011/08/24/micro-cloud-foundry-for-spring-developers/"><B>MicroCloud</B></a>! and now, <a href="http://blog.springsource.com/2011/08/30/using-postgres-on-cloud-foundry/"><B>PostgreSQL</B></a> (this was one of the biggest pieces of news to come out of <a href="http://www.vmworld.com/community/conference/live">VMWorld 2011</a> in Las Vegas, where I am right now)!  
	
 And, for the Python and PHP inclined among us, there's now the CloudFoundry partner providers <a href="http://blog.cloudfoundry.com/post/9374366916/cloud-foundry-adds-php-and-python-through-community">that are now supporting these languages on their CloudFoundry clouds.</a> 
	It's all coming together, quicker and better than ever. Stay tuned for more!
	</p>
</p>
  			<a href="jl/blogPost/wtf_linked_lists_patented.html"><h1>WTF! Linked Lists patented</h1></a>
  			<p>27 August 2011</p>
  			<p>
<P> 
<a href= "http://twitter.com/#!/timfox/status/107382409091235840">Tim Fox</A> retweeted this tweet from <a href="http://news.ycombinator.com/">Hacker News</a>'s <a href="http://twitter.com/#!/hackernewsbot">Hacker News Bot</a> that <a href="http://www.google.com/patents/?vid=Szh4AAAAEBAJ">linked lists had apparently been patented</a> and responded as aptly as I could've: <EM>WTF</EM>.
 
</P>
  
</p>
  			<a href="jl/blogPost/getting_started_with_spring_roo.html"><h1>Getting Started with Spring Roo</h1></a>
  			<p>12 August 2011</p>
  			<p>
<P>  <IMG src = "media/17884" style = " float:left;margin-right:10px;" /> Steve Mayzak and I have just finished a book for O'REILLY, <EM><a href="http://oreilly.com/catalog/0636920020981">Getting Started with Spring Roo.</A></EM> The book's a very quick introduction to Spring Roo, and includes information about the many useful addons (including support for <B>Vaadin</B> - a powerful, alternative web framework, and <B>Neo4j</B> - an alternative, powerful NOSQL data-store), as well as the in-built Spring Roo addons. If you're interested in Spring Roo, I hope you'll check this out.
 </P>
</p>
  			<a href="jl/blogPost/rabbitmq_is_now_officially_available_on_cloudfoundry.html"><h1>RabbitMQ is now officially available on CloudFoundry!</h1></a>
  			<p>12 August 2011</p>
  			<p>
<P>   
 <img src = "media/17873" style = "width:80px;float:left; margin-right:10px;"/> 
<img style = "float:left ; margin-right: 10px;width:80px;" src = "media/17874" /> 
For you <a href="http://github.com/CloudFoundry">code lurkers</a> out there, the news that <a href= "http://www.rabbitmq.com/">RabbitMQ</a> is now available in <A href="http://www.cloudfoundry.org">CloudFoundry</A> should come as no surprise. 
           But, it's finally here! This is very exciting. One thing I've always loved about RabbitMQ is its ubiquity. It is more widely used than  
               any other message broker on the cloud, and on Amazon Web Services in particular. The AWS tidbit's a bit more awesome when you realize that AWS already has a message broker service called SQS!  ;-)    Anyway, it's now available on CloudFoundry. You <a href="http://support.cloudfoundry.com/entries/20322602-getting-started-with-the-rabbitmq-service-from-a-spring-application">should definitely</a> check <a href="http://blog.cloudfoundry.com/post/8713844574/rabbitmq-cloud-foundry-cloud-messaging-that-just-works">it out.</a> The <a href="http://www.theregister.co.uk/2011/08/10/vmware_cloud_foundry_adds_rabbitmq_messaging/">news</a>  overall seems good, too! Messaging middleware is <EM>the</EM> critical component for scale. Cloud-scale is a way of life, not just a switch to be turned on and off. Specifically, an architecure that scales is going to enjoy temporally decoupling, or <EM>asynchronism,</EM> and RabbitMQ is the perfect vehicle to enable that asynchronous coordination. 
</p> <P>  If you're a Spring developer, and haven't had a chance to look at CloudFoundry, then I strongly recommend you see  <a href="http://blog.springsource.com/2011/04/12/cloud-foundry-for-spring-developers/">Mark Fisher's entry  on the SpringSource blog</a> introducing the wide world of the cloud for Spring developers from a few months ago. There's also great content on <A href="http://www.youtube.com/SpringSourceDev">the SpringSource YouTube channel.</a>
		
 </P>
</p>
  			<a href="jl/blogPost/speaking_at_javazone_2011.html"><h1>Speaking at JavaZone 2011</h1></a>
  			<p>07 August 2011</p>
  			<p>
<P> I'm excited to announce that I'll be speaking at <a href="http://jz11.java.no/">JavaZone</A> again this year. I must confess, I was a little worried that I would not be accepted this year! My talk last year - on business process management and Spring Integration - seemed to garner puzzled looks. Perhaps I just misread the <EM>amazing</EM> Norwegian audience? The conference (and the technical presentations, to boot) were both wonderful.</p>
<P> I had the wonderful experience of stopping at a booth and having somebody try to sell me training in Spring (which, I mean, sure... more training's always good!), but the kicker came when he showed me the training manual! It was the book that Gary Mak and Daniel Rubio  and I co-authored, <em><a href="http://www.amazon.com/dp/1430224991/ref=asc_df_14302249911656168?smid=ATVPDKIKX0DER&tag=hyprod-20&linkCode=asn&creative=395093&creativeASIN=1430224991">Spring Recipes!</a></em> 
	 </p>
	
<P> I submitted on other topics, as well, last year, and those were not accepted. No matter, I gave my talk, and indeed the people that did <em>get</em> it, <EM>really</EM> got it! 
So, while I'm not complaining, it still wasn't exactly my best day. I'm thus thrilled to be invited back and - as if fate wasn't already shining on me - my 3-hour university talk's been accepted. My talk's called, "Spring, a Walking Tour," which is a  bit of misnomer, as I'm usually the only one walking at all! ;-) 
I'll be talking about the Spring landscape - <em>everything</EM>, from the cloud, mobile, 
	integration, batch processing, big-data, and more! Check it out. This talk was well received when I gave it at Geecon earlier this year, and I've already updated it to reflect a lot of the new stuff in the Spring 3.1 milestones. 
</p>
 
<P>The city of Oslo, as you no doubt have heard, recently experienced <a href="http://www.youtube.com/watch?v=0oIE-WSemIs">a terrorist attack</a> resulting in the massacre of innocents, both adult and children. It broke my heart to see this. What a <b>disgusting</b>, <b>horrible</b> incident, obviously.  It's beyond comprehension, no matter where it happens, of course. It was particularly surprising to me that it happened in Oslo, however, as it seemed like such a beautiful, clean, ideal city when I was there. 
  I will take more time, this year, to explore Oslo, and to take in  more of Norway's beauty, and to walk among these strong people. 
   I really have a lot of respect for the way the people of the city responded to the incident. They are inspirational. 
</P> <p> I hope you'll join me at JavaZone, and in Oslo, in general, to be inspired.
	</P>
</p>
  			<a href="jl/blogPost/spring_corner_beyond_the_factorybean.html"><h1>Spring Corner: Beyond the FactoryBean</h1></a>
  			<p>23 July 2011</p>
  			<p>
<DIV  style = "padding:10px; background-color:#999; ">
I've decided I'm going to try to write up a series of small posts on things about Spring that are perhaps common knowledge, but helpful to know, anyway. 
These posts are geared decidedly towards newcomers, though old hats might learn a thing or two. 
</div>
<P>
 
I looked at what a basic <code>FactoryBean</code> is in my previous post. While <code>FactoryBeans</code> are important - and knowing what they do can help you navigate
the framework - they're by and large no longer the recommended approach to the task as of Spring 3.0 and the imminent Spring 3.1.	</p>
  <p>
	The whole point of a <CODE>FactoryBean</CODe> is to hide the construction of an object - either because it's  very complex or because it can't simply be instantiated using that  typical constructor-centric approach  used by the Spring container (Maybe it needs to be looked up? Maybe it needs a static registry method?)  
	 </p> 
	<P> Spring 3.0 saw the introduction of  Java configuration which lets you define beans using Java.  For instance, to register a regular <code>javax.sql.DataSource</code> with Spring in XML, you   will more than likely delegate to a properties file for the sensitive configuration information (like a database password) and use Spring to instantiate the <code>javax.sql.DataSource</code>, like this:
		</p> 
		
<pre> 
&lt;beans ...&gt;
	&lt;context:property-placeholder location = "<B>ds.properties</B>" /&gt;
	
	&lt;bean id = "<B>ds</b>" class = "<B>a.b.c.MySqlDataSource</b>"&gt;
	  &lt;property name = "user" value = "${<B>ds.user</b>}"/&gt;
	  &lt;property name = "password" value = "${<b>ds.password</b>}"/&gt;
	&lt;/bean&gt;
&lt;/beans&gt;
</pre>
<P> This is a simple bean, and translates naturally into Java configuration. It would look like this:
	</p>
<Pre>
import a.b.c.* ;
	
@Configuration 
@PropertySource("<B>ds.properties</B>") 
public class MyConfiguration { 
    @Inject private Environment env ; 
	
    @Bean public <b>MySqlDataSource</b> <b>ds</b>(){ 
        MySqlDataSource ds = new MySqlDataSource() ; 
        ds.setUser( env.getProperty("<B>ds.user</b>") );
        ds.setPassword( env.getProperty("<B>ds.password</b>"));
        return ds; 
    }
}
</pre>
	
	
	<P> The beauty of this is that you're free to do anything you'd like inside the method. The return value is what's registered in the Spring container. 
		
		Anything you do in service of properly constructing this object is up to you - you're no longer bound by the limits of what Spring can instantiate based on the XML specified.  And, this is more natural - it's far easier to guarantee there's no typos using Java than XML.  
		
		So, take away from this that Java configuration is - about equal in terms of lines of code, but a lot more powerful, and conceptually more natural.		 
	 </p> <P> With those limitations lifted, the value of the <code>FactoryBean</code> is starting to lessen. After all, if all a <code>FactoryBean</code> does is encode construction logic in a novel or unique way, then there's no reason that couldn't be done inside a Java configuration method, is there? 
Let's revisit the example from the last blog post, a custom <code>FactoryBean</code> designed to factory cars.
		</p>
	<PRE>
public class MyCarFactoryBean implements FactoryBean&lt;Car&gt; {
  private String mark; 
  private int year ;
  public void setMark(String m){ this.mark =m ; }
  public void setYear(int y){ this.year = y; }
  public Car getObject(){ 
    // wouldn't be a very useful FactoryBean 
    // if we could simply instantiate the object ;-)
    CarBuilder cb = CarBuilder.car();
	
    if(year!=0) cb.setYear(this.year);
    if(StringUtils.hasText(this.mark)) cb.setMark( this.mark); 
    return cb.factory(); 
  }
  public Class<Car> getObjectType() { return Car.class ; } 
  public boolean isSingleton() { return false; }
} 
</pre>
 <P> In this example, we only conditionally set values if there are values to be set.  So, we do some dancing around to ensure that we have values. This code is ugly, because it has a lot of different execution paths, but it's not particularly novel.  We're adults, we can do this sort of thing ourselves. Let's dispose of the <code>FactoryBean</code> and simply use Java configuration to replace it for a definition of a <code>Car</code>. Again, we happen to know what configuratoin we need,
	so we don't have to duplicate the null checks in our code.
	</p>
	
	<Pre>
@Bean public Car honda(){ 
	return CarBuilder.car()
	.setYear( 1984 )
	.setMark("Honda")
	.factory(); 
}
</pre> 
<P>
	Not bad! We no longer need the complex <code>FactoryBean</code>, and we have a usable bean definition. 
	
	If we wanted to make this reusable, we could, as well, by simply creating a factory method, like this:
	
	</p>
 <PRE>
// presumably exposed from some place where other configuration classes can reuse it.
public Car buildCar(int year, String make){ 
    CarBuilder cb = CarBuilder.car();
    if(year!=0) cb.setYear( year);
    if(StringUtils.hasText( mark)) cb.setMark( mark); 
    return cb.factory();
}
...
// now the Spring definition itself is even simpler, <em>and</em> it's reusable!
@Bean public Car honda() {
	return car(1984, "Honda") ;
}
</PRE>
<P> In Spring 3.1, there are many places where Spring also provides a <em>Builder</em> alternative to a <code>FactoryBean</code>.  A Builder, as a pattern, is conceptually simialar to a <code>FactoryBean</code>. In practice, however, they are usually exposed like the <code>CarBuilder</code> demonstrated above. They are 
	typically chainable - a method returns <code>this</code> and so subsequent invocations don't need to dereference the object, they can 
	 continue <em>chaining</em> invocations. 
	 Additionally, a Builder usually does the null pointer checks that I forced in the previous code. 
	
	So, a properly rewritten <code>CarBuilder</code> object usage might look like this:
	</p>
	<pre>
@Bean public Car honda(){ 
 return CarBuilder.car()
  // doesn't matter if the parameters are null - 
  // it'll validate in the <b>factory()</b> method
  .setYear( 1984 )  
  .setMark( "Honda" )
  .factory();
}
</pre>
<P>A great example of a builder providing a much smoother experience in 3.1 over Spring's		<code>FactoryBean</code>s is the new Hibernate 3 <code>SessionFactoryBuilder</code>, whose usage looks like this:
	</p>
	
	<PRE>
		
@Configuration  
@EnableTransactionManagment 
public class ServiceConfiguration {  
	
  @Bean public javax.sql.DataSource dataSource(){ ... }
  @Bean public SessionFactory hibernate3SessionFactory(){ 
     return new AnnotationSessionFactoryBuilder()
 	     .setDataSource(dataSource())
 	     // you could do this:
 	     //.setAnnotatedClasses( Customer.class, LineItem.class, Order.class )
 	     // or simply scan a package where your entities live
 	     .setAnnotatedPackages( Customer.class.getPackage().getName()) 
 	     .buildSessionFactory();
 }
}
</pre>
  <P>The equivalent <code>FactoryBean</code>s now delegate to these builder classes, in fact! </p > 
</p>
  			<a href="jl/blogPost/spring_corner_whats_a_factory_bean.html"><h1>Spring Corner: What&apos;s a Factory Bean?</h1></a>
  			<p>22 July 2011</p>
  			<p>
<DIV  style = "padding:10px; background-color:#999; ">
I've decided I'm going to try to write up a series of small posts on things about Spring that are perhaps common knowledge, but helpful to know, anyway. 
These posts are geared decidedly towards newcomers, though old hats might learn a thing or two. 
</div>
<P>
	</p>
	<P> In this post, I'll look at  Spring's <code> org.springframework.beans.factory.FactoryBean&lt;T&gt;</code> interface. 
		
		The definition of this interface is: 
 </p>
<PRE>public interface FactoryBean&lt;T&gt; {
  T getObject() throws Exception;
  Class&lt;?&gt; getObjectType();
  boolean isSingleton();
}
</PRE>
<P> A FactoryBean is a pattern to encapsulate interesting object construction logic in a class.  It might be used, for example,
	 to encode the construction of a complex object graph in a reusable way. 
	Often this is used to construct complex objects that have many dependencies. It might also be used when the construction logic itself is highly volatile and depends on
	the configuration. 
	
	A FactoryBean is also useful to help Spring construct objects that it couldn't easily construct itself. For example, in order to inject a reference to a bean that was obtained from JNDI,
	the reference must first be obtained. You can use the <CODE>JndiFactoryBean</CODE> to obtain this reference in a consistent way.
	
  You may inject the result of a <CODE>FactoryBean</CODE>'s <CODE>getObject()</CODE> method into any other property.  
	</p> 
	<p> Suppose you have a <code>Person</code> class whose definition is thus:
		</p>
		<PRE>public class Person { 
 private Car car ;
 private void setCar(Car car){ this.car = car;  }	
}
</pre> and a <CODE>FactoryBean</code> whose definition is thus:
	
	<PRE>
public class MyCarFactoryBean implements FactoryBean&lt;Car&gt; {
  private String mark; 
  private int year ;
  public void setMark(String m){ this.mark =m ; }
  public void setYear(int y){ this.year = y; }
  public Car getObject(){ 
    // wouldn't be a very useful FactoryBean 
    // if we could simply instantiate the object ;-)
    CarBuilder cb = CarBuilder.car();
	
    if(year!=0) cb.setYear(this.year);
    if(StringUtils.hasText(this.mark)) cb.setMark( this.mark); 
    return cb.factory(); 
  }
  public Class<Car> getObjectType() { return Car.class ; } 
  public boolean isSingleton() { return false; }
}
</pre>
	
				<p> You could wire up a <CODE>Car</CODE> instance using a hypothetical <CODe>CarFactoryBean</CODE> like this:
					</p>
<Pre>
&lt;bean class = "a.b.c.MyCarFactoryBean" id = "car"&gt;
	&lt;property name = "mark" value ="Honda"/&gt;
	&lt;property name = "year" value ="1984"/&gt;
&lt;/bean&gt;
&lt;bean class = "a.b.c.Person" id = "josh"&gt;
	&lt;property name = "car" ref = "car"/&gt;
&lt;/bean&gt;
</PRE> 
<P> 
		In this example, the result of the <CODE> FactoryBean</CODE>'s <CODE>getObject</CODE> method will be passed, not the actual <code>FactoryBean</code> itself.  
	Spring knows that the result can be injected into the target property because it'll consult the <Code>FactoryBean</code>'s <code>getObjectType()</code> type  
		 and check whether the target property's type is assignable.
		
		Spring reserves - but in practice doesn't always exercise - the right to cache the returned bean if the <CODE>FactoryBean</CODE>'s <code>isSingleton()</code> method returns true.
		 
</p>	
	<p>  If you are using Spring's newer (and far more elegant, in my humble opinion) Java based configuration, then you will find this doesn't work quite as you'd expect, but it can still be 
		made to work, but you must dereference the <CODE>FactoryBean</CODE> explicitly and call <code>getObject()</CODE> yourself, like this:
		</p>
		
		<pre>
// identical configuration in Java to the XML above			
@Configuration 
public class CarConfiguration { 
  @Bean public MyCarFactoryBean carFactoryBean(){ 
	MyCarFactoryBean cfb = new MyCarFactoryBean();
	cfb.setMark("Honda");
	cfb.setYear(1984);
	return cfb;
  }
  @Bean public Person josh (){ 
	Person p = new Person();
	p.setCar( carFactoryBean()<b>.getObject()</b> );
	return p; 
  }	
}
</pre>
<p>Spring <CODE> FactoryBean</code>s have all the other characteristics of any other Spring bean, 
	including the lifecycle hooks and services (like AOP) that all beans in the Spring container enjoy.
	</p>
<p>So, if you'd like a chance to perform construction logic after the properties on the <CODE>FactoryBean</code> have been set, but before the <code>getObject()</CODE> method has been called,
	then you can avail your <CODE>FactoryBean</CODE> of a method, annotated with <CODE>@PostConstruct</CODE> (or simply implement <code>InitializingBean</CODE>). This method will be called,
	 in this case, after both the <code>mark</code> and the <code>year</code> properties have been set.
	You might use this callback to do sanity checks before the object construction's started.
	
	</p>
<PRE>
 @PostConstruct 
 public void setup () throws Throwable { 
   // these methods throw an exception that 
   // will arrest construction if the assertions aren't met
   Assert.notNull(this.mark, "the 'mark' must not be null")	;
   Assert.isTrue(this.year > 0, "the 'year' must be a valid value"); 
 }
</pre>			
<P>One important takeaway here is that it is the <Code>FactoryBean</CODE>, <em>not</em> the factoried object itself, that lives in the Spring 
	container and enjoys the lifecycle hooks and container services. The returned instance is transient - Spring knows nothing about what you've returned from <code>getObject()</code>, and 
	will make no attempt to excercise any lifecycle hooks or anything else on it. 
	This point often confused people.
	</p>
	
</p>
  			<a href="jl/blogPost/oscon_java_2011.html"><h1>OSCON Java 2011</h1></a>
  			<p>07 July 2011</p>
  			<p>
<P><img src = "media/17860"  style = "float:left;padding-right:10px"  />Hi guys. I'll be speaking at <a href="http://www.oscon.com/oscon2011/profile/108490">OSCON Java</a>. I'm giving two talks, one on Spring Roo and on using Spring to bring your application to your customers (through a web application, through Flex, through GWT, and through mobile clients like Android).  
 
I'm also working with my colleague and friend Steve Mayzak to write an ebook on  Spring Roo called "Getting Started with Spring Roo," which will be available from O'REILLY as an ebook in time for OSCON. 
  I hope to see you there. <a href="http://twitter.com/#!/jclouds/status/88755919684501504">I heard, but can't confirm</a>, that if you register tomorrow (07/07/2011 - the release of Java 7), you'll get a giant discount (77%?).  
 There are also a few other great talks from SpringSource and VMWare there, and I look forward to seeing you there! </p>
</p>
  			<a href="jl/blogPost/aops_not_just_logging.html"><h1>AOP&apos;s Not Just Logging</h1></a>
  			<p>05 July 2011</p>
  			<p>
<P>If you've ever read about <a href="http://static.springsource.org/spring/docs/3.0.x/reference/aop.html#aop-introduction">Spring's powerful AOP support</a> then you've probably heard about the canonical example of  introducing logging functionality  - a <em>cross-cutting</em> concern - to your beans. The example goes like this: you want to log the start and stop time for every method invocation. You can either modify every method and introduce logging, which is tedious and error-prone, or you can simply use AOP to <em>wrap</em> every method invocation. With AOP, you'll get a chance to perform logging every time a method is started and finished, or both! This is a common example, but it doesn't even begin to illustrate how powerful AOP can be. The most powerful example of AOP is perhaps the Spring framework itself. It uses it every where! Let's look at some common examples:</P>
 <UL><LI> In Spring, beans are by default singletons and have no particular guarantees about thread-safety. This is fine most of the time as many objects are thread-safe (e.g., the <code>JdbcTemplate</code>) so consumers never need to know. This usually ends up being the most performant, and most natural, style of Spring bean. One example where Spring uses AOP to acheive the feeling of thread-safety without concerning the developer with it is in  Spring's <code>EntityManager</code> support. Spring will correctly inject a  proxy <code>EntityManager</code> using AOP. <code>EntityManager</code>s   are <EM>not</EM> thread-safe, but the consumer doesn't need to know. As an example, you might write: <code>@PersistenceContext EntityManager em.</code> Spring   then  automatically routes all concurrent requests to the appropriate, thread-local instance being maintained in the background.
    </li>
 <LI> 
	 Spring's declarative transaction management is based heavily on AOP. With a single annotation, Spring can start a transaction before your method is invoked, then commit (or, in the case of an exception, roll it back) when the method terminates. You don't need to know about this as a consumer, of course, but behind the scenes.
	</li>
	<LI>Spring Security can guard method invocation access, limiting
		
	the call to clients that are secured. This authentication checks against a security context, and - if authorized - proceeds. This works through the judicious use of AOP and some thread local state.</li>
</UL>
                                                                                                                                                                                                          
</p>
  			<a href="jl/blogPost/reframing_the_question.html"><h1>Reframing the Question</h1></a>
  			<p>30 June 2011</p>
  			<p>
<P>
 Just watched a recording on JavaEE6 and JBoss AS7. JBoss AS7's looks like it's evolved by leaps and bounds! 
 I wonder if it's as mature as Glassfish now... Some of the new features in JBoss AS 7 seem to just be bug fixes. </p>
 <ul>
	<LI>It's faster (which is great, because it's always been dog slow. JBoss AS5 had startup times of 60 seconds or more on trivial applications!)</li>
		<LI>It doesn't leak classes (because previous versions had all sorts of classloader issues and this was a very common complaint)
			</li>
			<LI>It supports the full JavaEE6 specification (because JBoss AS6 - the first release of the JBoss AS server line after the JavaEE 6 specification was finalized - didn't, instead choosing to only support the web profile)
				 </li>
			<LI>It's productized into part of the JBoss EAP (which is great, because JBoss AS 6 wasn't, and - as JBoss AS 7 is <em>still</em> not out yet, this means that  
				<a href="http://www.ibm.com/developerworks/websphere/techjournal/1106_alcott/1106_alcott.html">Websphere (!!) was quicker to market</a> with a supported version of Java EE 6 (both full profile and web profile) than JBoss! 
				</li>
				</ul>
 
<P>Towards the end, one of the presenters made the nonsensical assertion that, basically, Spring is quite old (and was therefore straddled with all of this imaginary legacy code), and that CDI is - in contrast - quite new. This is an example of "reframing." 
</p>
<P>
	Spring's been around since 2003, in some form, and since 2004, in a big way. It's certainly older than CDI, sure. Obviously.   
	
	However, applications written in 2004 still run without modification on Spring 3.0 and the upcoming Spring 3.1, with very few exceptions. The <em>only</em> exceptions are on the very few cases where we've deprecated certain APIs like our support for Apache OJB. Even still, if the older, relevant extension library is loaded, it runs. The supported parts of the component model haven't changed, just the libraries that we ship that build on top of the component model. Usually when we deprecate something, it just means we're not shipping it with the project, not that the code won't work on current versions of Spring.
	</P>
	<P>
		In contrast, if you'd written your application on the "standard" EJB 2 (which was the norm when Spring first emerged), it would <em>not</em> run on contemporary versions of these Java EE 6 application servers, especially those that just support the web profile. For that matter, if your application in Seam 2 (which was current six months ago!), it would not run once you upgraded to Seam 3 without heavy migration. (Definitely not anything close to a drop-in upgrade)
		</p>
		<P> Spring's older, but evidently far stabler than both the J2EE / JavaEE implementations <em>and</em> the standards.
			
  		If you're running Java SE 5, then there's little reason Spring wouldn't continue to work on an existing J2EE 1.4 server.			
To boot, new versions of Spring support programming models that are more powerful and as lightweight, as anything JavaEE has, <em>while</em> maintaining</em> backwards compatibility.   It's unfortunate that JavaEE6 can't maintain its legacy code <em>and</em> add support for "new" component models at the same time, and even more so that this is what passes for a "standard." Spring has a better backwards compatibility story, within Spring as well as within J2EE and JavaEE application servers. 
			</p>
			<P> Don't let people maliciously reframe this point. <B> Spring's maturity is a strength, not a weakness.</B> The component model introduced in XML in 2004 still works today, and we've provided several alternative input configuration types to tap this same component model, including annotations and Java-based configuration. This is possible because any  configuration mechanisms - be it XML, Java configuration, annotations, the Groovy BeanBuilder, or anything else, is  eventually  normalized to a common component type at runtime.
				</p> 
			
</p>
  			<a href="jl/blogPost/geecon_2011_roundup.html"><h1>Geecon 2011 Roundup</h1></a>
  			<p>29 June 2011</p>
  			<p>
<p> What a couple of months! I've been running around like crazy. I attended Geecon, the Spring S2G Forums, and then the JAX San Jose conference, all in fairly short order. I'll try to put up roundups of my trips a bit more consistantly, starting with <A   href= "http://www.geecon.org" >Geecon</a>. I've been to many European conferences, but this one is now among my favorites. The conference has the unique combination of excellent speakers at a low price, like <a href="http://www.springone.com">the SpringSource S2GX Forums or SpringOne.</a> </p>
<p>Poland was the real surprise. This was my first time here and it far exceeded my many expectations.  The Polish Zlati is cheap   against the English Pound,  European Euro and - yes - even the American dollar (2.6, in May). It's easy to be taken (in any country) as a tourist, but  I found myself dropping my guard after five days. Nobody'd really tried anything, and most everything met with my expectations. </p>
<pre>
 Assert.assertTrue( taxi.getPrice() &lt;= expectedAmount,
    "the cab faire should never exceed " + expectedAmount+"!" ) );
</pre>  
	 <P> At one point, I was taken for a ride (literally!): a taxi charged me 50 Polish Zl for a ride from the central square to my hotel which was otherwise consistently 19-24 Zl (even in traffic).   By comparison, a train ride from Krakow to Lodz is 54 Zl, and the trip is several hundred kilometers. That said, 50 Zl is roughly 19 USD at the moment, which is not enough to feed two adults and a child at McDonald's (the lowest of the low) in the states. So, it's all relative. The takeaway is that even being ripped off didn't feel so bad in Poland.
</p>
		
		<p>  I did  a university talk on the first day (the university talks are three hours each), and I did a second, single-hour talk, on the first day of the conference proper. 
			The university talk was interesting because fully 70% of it was live coding or walk throughs or demos of some sort and I had dual screens, so I ended up coding using a 50' theatre-screen! I still have some small neck pain! :-)  Next time, I'll simply mirror my screens. Ow.
</p> 
<p>   
The audience was great, I never know what to expect of audiences. Some times they ask questions, some times they don't. These audiences did a fine job of asking questions <em>all throughout </em> the talks and outside, during the conference! Wonderful. This makes these trips worthwhile. The in-the-conference-hall discussions are invaluable, and redeeming.		
</p>
  <P> After the first two days,  I decided to have a look around. The conference promoters were kind enough to help arrange a tour of the salt mines for  <A HREf="http://www.javaspecialists.eu">Heinz Kabuts</a>, Heinz'  son Maxi, and myself. Heinz is a personal hero of mine. I suspect most Java developers have read his pearls of wisdom as dispensed in his newsletter at some point or another. I found him through Bruce Eckel, whose  book - <EM>Thinking in Java</EM> - helped me learn Java 13+ years ago. (I liked the book so very much that I sent Bruce a brief letter, the majority of which has appeared in the reader comments section of the book since 2003!) So, to finally get a chance to hang out with Heinz was great - he's even cooler than I  imagined!  
	 His son Max is quite the character, and of course is already programming! 
</p><span style = "float:left; margin:10px; margin-left:0; width:400px"> <img src ="media/17875" width = "400" />  <div > <em> In the photo, Juergen Holler, myself, Eugene Ciurana, (name unknown, sorry!), and Cyril  </em> </div> </span>
As usual, hanging out with Juergen Hoeller was a unique and wonderful experience. I joined SpringSource to get a chance to work with him and others like him, and I'm always grateful for his time.  The truth is, he gives of his time to anybody. No question too small, no topic to inane, and no JIRA too trivial. 
Juergen is easily one of the most indulging, humble  people you'll ever meet. Brilliant. If you get a chance to attend a conference where he's speaking, do so. You'll invariably learn something!  I <em>always</em> learn something.
</p> 
 <p>  On the final day - Saturday  - Heinz (and son Max), Emmanuel Bernard    and I took a tour of the Za Kapane mountains   - and the region surrounding it. What an amazing tour! We also took an impromptu boat trip, and floated downstream on a river bordering Slovachia on a wooden raft / boat for a few hours. I'm a throughly crispy critter at this point  -- I burnt in the sun and am now watching my skin turn into flakes. This was very good fun and the conversation even greater. We then toured the regions specifically, stopping in markets, at castles, and at other geological oddities like a mountain that resembled a sleeping man. As the tour guide - Carolyna - predicted, I was asleep in my seat as we returned home.
	
</p> <p>Emmanuel (a French  speaker) and Heinz ( a German speaker) both speak impeccable  English, and it always depresses me that I've let my language skills fall so far behind while they do so well in so many other languages!</p>
<P>Several people asked me  about the code to my university talk, which was a walking tour through all of Springdom. It introduced core Spring and the advanced component model underneath, AOP, and the proxy facilities, it introduced Spring's support for data processing and backend architecture (including JDBC, JPA, Hibernate, various NoSQL options, batch processing, event driven architectures, messaging, integration, and services), Spring's support for web applications including rich clients and web clients (including Spring @MVC - both standard HTML and REST, Spring Flex, Spring Mobile and Spring Android) and it introduced the world of Spring in the cloud. The code is <A HREF="http://git.springsource.org/spring-samples">here</a> and I'll put the slides up as soon as possible and tweet it from my Twitter handle <a href="http://www.twitter.com/starbuxman"><code>@starbuxman</code>.</a> 
</p>
	
	<p>After the Geecon conference, I took a trip to Lodz (pronounced, I learned, as &quot;wooj&quot;), in Poland, to visit a friend of mine (who I know by way of my mother's online bridge tournaments). I spent a few wonderful days there surrounded by truly wonderful people. I can't possibly hope to relay all the great experiences I had there, but I will share one. I was asked to talk to a young man of 13 years - my host's nephew - to encourage him in his computer studies. I reluctantly obliged and sat with him. The conversation was moving pretty well, he explained that he was trying to learn Java, and that he loved the new Android mobile phones. I asked him how he was proceeding in his Java studies, and he trotted out <em>Thinking in Java</em>, in Polish! I asked him which phone he most fancied (that, he later explained, he was saving up to purchase) and he responded that he liked the Google Nexus S (which I both have and love!). I materialized the iPad I had in my backpack and he was uninterested, fascinated more with the Nexus S. I asked him to bring out his laptop so I could help him get setup to program in Java. He rebooted and - this is the part that kills me - he <em>already</em> had Ubuntu installed, but was still taking his first steps and hadn't quite figured out how to get on the internet. Amazing! What a kid! I think - and you can never tell him this - that I emerged from that discussion more inspired than he was. What a wonderful experience.</p>
	<p>I was a curious kid, growing up, and I owe any success I've had to this curiosity. I was programming very early in my life, and this was fortunate, because it's empowered me. I've heard it said that there will be two types of people -those who consume computers, and those who control computers. I'm privileged, I think, to be among those who can control computers. I'm excited by this kid's potential - indeed, by all of our potential. </p>
	<p>After Poland, I was then off to the Spring S2GX Forums in Amsterdam and London. I'll cover that trip, however, in another post.</p>
  
</p>
  			<a href="jl/blogPost/a_script_for_retrieving_wayward_os_x_windows.html"><h1>A Script for Retrieving Wayward OS X Windows</h1></a>
  			<p>21 April 2011</p>
  			<p>
<p> 
Dear Lazy Webs, 
<br />
I just had to unplug my secondary monitor and follow <a href="http://www.leonamarant.com/2008/04/02/how-to-get-off-screen-windows-back-on-your-mac-os-x-v105/">the procedure outlined here</a> to get a wayward OSX window back on  my display.
</p> 
<p>Is there a better way?</p>
</p>
  			<a href="jl/blogPost/so_close_but_so_far.html"><h1>So Close, but... So Far</h1></a>
  			<p>22 March 2011</p>
  			<p>
<P>
Started today pretty impressed that <a href="http://blogs.msdn.com/b/interoperability/">Interoperability @ Microsoft</a>
 was a sponsor at <a href="http://www.eclipsecon.org">EclipseCon, which kicked off today.</a> So, score one for community and interoperability. 
<EM>Then</EM>, I see that Microsoft is <a href="http://mobilized.allthingsd.com/20110321/microsoft-sues-barnes-noble-over-nook-alleging-its-android-use-infringes-patents/">suing Barnes & Nobles and others for their use of Android</a> in their tablet environments. 
Huh. 
They almost went an entire day without being ... <EM>Microsoft</EM>. One for the history books.
</p>
</p>
  			<a href="jl/blogPost/the_mystery_of_the_indexer_segfault_in_eclipse_cdt_a_true_story.html"><h1>The Mystery of the Indexer Segfault in Eclipse CDT, a True Story</h1></a>
  			<p>18 March 2011</p>
  			<p>
<p>I just hit a good 'ol fashioned segfaulting bug! 
 For reasons I'm not proud of, I had cause to write some C++ code. I downloaded Eclipse CDT (And before some sadist comes along suggesting I should've stuck with vi or <a href="http://xkcd.com/378/">butterflies</a>, I've tried just about every C/C++ environment out there. I'm one of those guys that just doesn't understand writing C or C++ code without an editor. I'd sooner write Java than C or C++. Far too many things that can go wrong, it seems.) 
 
 I downloaded the latest one based on <a href="http://www.eclipse.org">Eclipse Helios</a>, installed it and then created a new C++ project (<code>File</code> &gt; <code>New</code> &gt; <code>C++ Project</code> &gt; <code>Executable</code> &gt; <code>Hello World C++ Project</code>). As soon as the Eclipse indexer started churning, Eclipse suddenly just disappeared! One second, I'm looking at Eclipse, and then a blink later, I'm staring at my computer Desktop! The darned thing had segfaulted on me!  I triaged the droppings it had left just before it died - here are the salient excerpts  of the log: 
</p>
<PRE><CODE>#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007ffc8537f61e, pid=412, tid=140722453255936
#
# JRE version: 6.0_24-b07
# Java VM: Java HotSpot(TM) 64-Bit Server VM (19.1-b02 mixed mode linux-amd64 compressed oops)
# Problematic frame:
# V  [libjvm.so+0x29861e]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#
---------------  T H R E A D  ---------------
Current thread (0x0000000040530800):  JavaThread "CompilerThread0" daemon
  [_thread_in_vm, id=422, stack(0x00007ffc7fc69000,0x00007ffc7fd6a000)]
siginfo:si_signo=SIGSEGV: si_errno=0, si_code=1 (SEGV_MAPERR), si_addr=0x000000000000000d
Registers:
RAX=0x0000000000000000, RBX=0x0000000000000005, RCX=0x0000000000000000, RDX=0x00000000d8000000
...
Register to memory mapping:
RAX=0x0000000000000000
0x0000000000000000 is pointing to unknown location
...
RDX=0x00000000d8000000
{other class} 
 - klass: {other class}
RSP=0x00007ffc7fd671e0
0x00007ffc7fd671e0 is pointing into the stack for thread: 0x0000000040530800
"CompilerThread0" daemon prio=10 tid=0x0000000040530800 nid=0x1a6 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE
...
RSI=0x00007ffc85a840d0
0x00007ffc85a840d0: <offset 0x99d0d0> in /usr/lib/jvm/java-6-sun-1.6.0.24/jre/lib/amd64/server/libjvm.so at 0x00007ffc850e7000
...
R9 =0x0000000040534d90
0x0000000040534d90 is a global jni handle
R10=0x00000000404f5790
0x00000000404f5790 is pointing to unknown location
...
R15=0x0000000000000001
0x0000000000000001 is pointing to unknown location
Top of Stack: (sp=0x00007ffc7fd671e0)
0x00007ffc7fd671e0:   0000000000000005 000000004080b200
...
Instructions: (pc=0x00007ffc8537f61e)
0x00007ffc8537f60e:   48 89 fe 0f 84 2e 01 00 00 4c 8b 05 8a 13 83 00
0x00007ffc8537f61e:   8b 53 08 41 8b 48 08 48 d3 e2 49 03 10 8b 4a 18 
Stack: [0x00007ffc7fc69000,0x00007ffc7fd6a000],  sp=0x00007ffc7fd671e0,  free space=1016k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x29861e]
V  [libjvm.so+0x296c0b]
...
Current CompileTask:
C2:1110      org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTFunctionDeclarator.postAccept(
 Lorg/eclipse/cdt/core/dom/ast/ASTVisitor;)Z (97 bytes)
---------------  P R O C E S S  ---------------
Java Threads: ( => current thread )
  0x000000004129e000 JavaThread "Worker-9" [_thread_blocked, id=781, stack(0x00007ffc623e6000,0x00007ffc624e7000)]
  ...
  0x00007ffc79ad8000 JavaThread <b>"org.eclipse.cdt.internal.ui.text.CReconciler"</b> daemon [_thread_blocked, id=760, stac</CODE></PRE>
 
<p> My many years of experience have helped me in these situations - they inform my professionalism and abiity to react decisevly and appropriately. It is imperative that one keep is cool when things don't  work out as planned. </p> 
<p>So, I sucked my thumb, all the while whimpering a little. I mean, c'mon! Somewhere in the <EM>millions</EM> of lines of Linux source code and the entire 30+ <EM>million</EM> lines of Eclipse source code was a bug, <em>actively</eM> working to ruin my day! You'd cry too if you just thought about it a little. 
</p>
<p> But I had one last defense before the false recourse of sticking Eclipse itself under a bugger (and, how I would've done that remains unclear; I couldn't very well have used Eclipse CDT to debug itself and the interactions between Eclipse CDT and the native code in the JRE!). I knew that I could ask my old pair programming pal, Google! I then started scanning looking for unique, repeatable information (i.e., something that would make a good, precise Google query.). At the bottom, I found  <b>"org.eclipse.cdt.internal.ui.text.CReconciler,"</b> and away I went! I asked The Google about any issues with that class in Eclipse CDT, and was given <a href="http://www.eclipse.org/forums/index.php?t=tree&th=200460&S=02b8aad7b1bd5e0c66361e1ec1e6f92f#page_top">this Eclipse forums link</a>. That eventually led me to <a href="https://bugzilla.redhat.com/show_bug.cgi?id=647737">this bug report</a>. That is where I found a workaround. It didn't quite match my situation, but the <a href="https://bugzilla.redhat.com/show_bug.cgi?id=647737#c31">fix</a> was the same: add <CODE>-XX:-UseCompressedOops</CODE> to the end of my <code>eclipse.ini</code>.
</p>
<p>So, I hope this blog has helped you avoid this particular bug. It'll probably be fixed soon, but my pain remains. The worst part about all of this? I did <em>all that work</em> just to end up in a position where I could write C++ code! That's like... helping the Dentist look for his <em>really big</eM> drill so he can give  you a root canal! </p><p>Meh.</p>
</P>
</p>
  			<a href="jl/blogPost/hot_to_retrieve_your_application_from_google_app_engine.html"><h1>Hot to Retrieve Your Application From Google App Engine</h1></a>
  			<p>12 March 2011</p>
  			<p>
<p> 
 Sometimes, just sometimes - once every 5 years - I need to reverse engineer my own binary because I've either FUbar'd the code or the code is lost to me. Don't care to explain why the latter is true this particular time, but it is true. I need a built version of an application so I can run it through a trust Java Decompiler like the trustworthy  <a href="http://www.varaneckas.com/jad">JAD</a> tool. 
JAD tool hasn't correctly reverse current Java code since Java 1.5, but it does come close and it's far easier to simply clean that up (you can see the structure of the code, even if it isn't immediately obvious what to do to get it to compile again). 
</p>
<P> In my particular scenario, my deployed Spring application lives on Google App Engine. 
      So, at least it's safe. 
 A bit too safe, unfortunately. I didn't know how to get a copy of the binary for my own purposes from Google App Engine. I did some Googling and found some documents that suggested a fix - use the Google App Engine's SDK tool <em>appcfg</em> - to download the deployed source. Only catch was that the documents describing the tool were for the Python SDK, not the Java SDK. 
 I looked at the Java SDK and even tried running the command as described in the Python documents and got nowhere. So, I cheated. I did some more Googling, and by this I mean I simply contacted my friend at Google. 
He pointed out that I'd already had the answer: use the Python SDK to <em>download your Java application</em>!
</p> <P> So,  <em> if</em> you're on Google App Engine, and  <em> if</em> for one reason or another you obliterate your only copy of the source code and  <em> if</em> you want to work against a deployed binary (a <em>very</em> specific situation, sure, but it <em>could</em> happen to somebody else besides me... one day!), then run the following command:
 <PRE>
./appcfg.py -e $YOUREMAIL@gmail.com download_app -A $YOURAPPID $NAME_OF_FOLDER_TO_WRITE_THE_RESULTS_TO
</PRE>
</p>
</p>
</p>
  			<a href="jl/blogPost/getting_started_with_various_lamp_languages.html"><h1>Getting Started with Various LAMP Languages</h1></a>
  			<p>09 March 2011</p>
  			<p>
<p> A friend of mine pinged for some good bootstrap content on various technologies, namely Perl, MySQL, PHP, Python, Linux, C and C++. I learned (or, tried to... I'm convinced I'll never understand C++ and Perl) all of these different things over the years and so my knowledge is either outdated or incomplete. Nevertheless, I figured some of it might help others, too, so I'm reprinting a cleaned up version of my response email here. This information, of course, reflects my biases and experience and, except Perl, reflects professional experience in some form or another. </p>
<p>
<b>
Perl:</b> Never. ever. use. Perl. I don't know it (couldn't seem to sit and learn it with a straight face. It made me anxious), and can't recommend it unless you're a hard core system administrator who doesn't know Python, Ruby, C or Bash. It's horridly unreadable to all but the most exacting of eyes. It's been stuck at version 5.x for the last 10+ years. 6.0 has been "in progress" since 2001, code-named "Parrot." When Parrot becomes real I could easily see taking it on again.
</p> <p>
<b>
PHP:</b> it's a dead simple language - I don't know that there's a good introduction to it since I learned it when it was at PHP 3 from the early 2000's. (It's the 5th language I learned, after Java, C, Python and JavaScript). I tended to dislike the language at 3 and 4. 5 seems markedly improved, though I haven't used it since 4. The community's active and in agreement about its strengths. Typically, it lives inside a web server (Apache, Ninx, Lighttpd). It has no built-in modularization mechanism besides classes - no name spaces and compilable unit, so you end up sharing source code. The latest and greatest is PHP 5.3, which means that 6.0 isn't out yet. Most "extensions" to PHP are written in C, not PHP, presumably because it's not fast enough, or can't be used to manipulate enough things to achieve the extension. PHP does have PEAR (PHP extensions, libraries) and PECL (C extensions), last I checked, to provide a way to bundle standard classes and binary extensions. If you want to do core web programming, then PHP's an OK way to go. I'd still argue for Java (or a JVM language, like Groovy or Scala), Python or Ruby on Rails though. Sorry I can't help you learn it - it truly is easy, though. Google for tutorials. The original language was little more than a macro processor, and following its evolution was dead simple. Most of the object-oriented features in 4 and 5 were approachable given my background in Java, so that came naturally, too. </p>
<p>
<b>C: </b>C is markedly more difficult to learn than PHP and at the same time much friendlier for the simple things. (Brian) Kernighan & (Dennis) Richie wrote <em>the</em> introduction to C, back in the 70's. People still refer to the variant of C as "K&R," or they refer to a particular standard. C99, for example, is the standardized version of C that came out in 1999. I only know "C99"-ish C, not proper "K&R" C. I only write C when I'm trying to glue stuff   - typically operating-system specific stuff - together: Java and Windows, OSX, or Linux, via C, for example, or Python and something else, via C. I rarely have a use case for a full, stand-alone C program, if I'm honest. I almost always write modules that use C. C has no library - just a few standard types and the very, very loose language itself. So, the language itself is very easy, if a bit useless. You'll need to bind to something - either to your operating system (i.e., through POSIX or some additional APIs, or to some other library) to do anything. I've only met one person I'd call a "master" at C. To learn C, I learned by Googling and spending lots of time looking at Linux   sources (sources included with Linux, not <em>only</em> the source for the Linux kernel  itself) and so on. Check out <a href="http://www.SourceForge.net">SourceForge</a> or <a href="http://www.github.com">Github.com.</a>
 </p><p><b>C++:</b> I tweeted recently that Herbert Schildt's now outdated C++ book was available for free download, which you might try finding. I think it was on MSDN (the Microsoft Developer Network). I learned C++ from Bruce Eckel's amazing "Thinking in C++" back in the 90s. He also wrote "Thinking in Java," which I loved so much so that I wrote in to him and gave a positive reader comment back in 2001. My comment is on one of the few pages on the inside front cover of his book, book under "reader comments" to this day ;-) He used to make the books available for free download, which I suspect you could still find if you Googled. Otherwise, you can buy the two volumes of it on Amazon.
 
In college I also read "Starting Out With C++" which was... <em>lame</em> compared to "Thinking in C++," but it's also thorough (and shorter!), so it might be a good intro-read to ramp you into it. As with C, but to a lesser extent, to make use of C++, you need third party libraries since C++'s core standard library is kinda crap compared to Java or .NETs or Pythons, etc, so one popular choice is to use a platform abstraction like Boost, or Apache Portable Runtime (APR) or Netscape Portable Runtime (NPR). Some good books on Boost/APR that I often refer to these days when I've (rare) occasion to write C++ is "Beyond the C++ Standard Library" and "Cross Platform Development in C++." The first introduces Boost, the second introduces ... APR and a lot of other stuff. All that said, C++ is not as universally used (or even close to as universally useful) as C, and it's far, far, far, far more complicated than Java or C. I would avoid C++ if possible. The only reason I liked C++ is because I then understood why Java was an improvement. </p><p>
<b>Linux:</b> I have no good book on Linux to recommend, only several that all helped fill in parts of the puzzle: Red Hat Linux Administrators' Handbook, O'Reilly's UNIX Power Tools, Practical MythTV, EXTREMETECH "Hacking Ubuntu", EXTREMETECH "Linux Toys" I and II, the "Official Gnome 2 Developer's Guide," etc. Of course, with this one I was lucky to have a talented Linux ninja - <a href="http://www.sudoinit5.com">Mario Gray</a>) - to really push me into it and make sure I didn't have a chance to escape until I'd seen everything he wanted me to see. By then, I didn't want to escape. Linux worked wonderfully. ;-)  
</p><p>
<b>
MySQL:</b> MySQL's dead simple.  <code>sudo apt-get install mysql-server-5.1</code> on Ubuntu Linux, and then follow any tutorial on the internet. It's a a database with 3/4 of the features of PostgreSQL and Oracle. It's also a ...<em>scary</em> open source project at the moment, because of all the politics surrounding licensing. MariaDB, MySQL, Drizzle, Percona, etc. I know Google has patched it over the years to suck less. If you need scalability and speed, use a NoSQL option. If you need features and an amazing, open-source database, use PostgreSQL. If you need a little bit of both AND commercial support, use Oracle, or the EnterpriseDB PostgreSQL build. Don't use MySQL unless you can avoid maintaining it. Amazon and Google App Engine for Business provide MySQL-like databases for their clouds, for example.
</p><p><b>
JavaScript:</b> If you know absolutely nothing about JavaScript, then  <a href="http://www.webmonkey.com/2010/02/javascript_tutorial">Webmonkey,  formerly part of Wired.com, had Thau's Javascript Tutorial</a>. That's how I learned it back in 1997. Don't let the 2010 date fool you, that tutorial's almost as old as the net itself. I learned it on IE 4 and Netscape 3 or 4. Since then, webmonkey.com shutdown and was sold, and then brought back to life after a few years shutdown. So, that tutorial is old content on TWO different versions of webmonkey.com! Since then, I've just read other people's code or wrote code and used Google for answers to things.
</p>
<p>
<b>
Python:</b>  Python was one of the easiest languages to learn since it was designed to be easy to learn, and, if I recall, Guido van Rossum (Python's creator) had experience with ABC, a learning language, which influenced Python's creation. I got my first look at Pyhon in the late 90's, or early 2000's. I think Bruce Eckel, again, mentioned Python in one of his books and that was enough to catalyze me to learn it properly. It's not hard to get going quickly, and for many years I kept it as my in-my-backpocket language, to do real work when Java might've been too complicated or if the task leant itself particularly well to Python's strengths in leveraging operating system-specific tools and APIs. Python has a large part of the POSIX APIs almost directly exposed through Pythonic APIs, for example, so your C skills come in handy there. It's a very good glue. I haven't really done more than played with Python's more recent web-tier support (and WSGI API, which provides the gateway interface between a web framework and application to the underlying web server, in much the same way servlets sits on top of the webserver, but below Java-based web applications.). I did have a pretty good experience with Zope (and the Plone CMS), which sort of predates all the current crop of Python web-framework killer-apps like Django and Turbogears. I have an older version of O'Reilly's "Programming Python," and I saw that it's since been updated, but it's huge - and as much a tutorial as a reference.  
</p><p>
So, that's a lot of how I got started. I'd of course be interested in any suggestions since a lot of this is outdated (At least, I <em>hope</eM> it's outdated and that better texts have come since!).
</p>
</p>
  			<a href="jl/blogPost/dependency_injection_and_inversion_of_control_have_been_commoditized.html"><h1>Dependency Injection and Inversion of Control Have Been Commoditized</h1></a>
  			<p>06 March 2011</p>
  			<p>
<p>The world of enterprise Java looks very different than it did 10 years ago. 10 years ago, I started following the news, the open-source projects, etc. In essence, I joined the "cult" of Java and haven't looked back. Even as I write Groovy and Scala code, I <em>still</em> feel a part of that cult today.  </p> 
<p> The marked progress  hasn't been more apparent to me than   today, when I read  that <a href="http://java.dzone.com/dose/daily-dose-mozilla-opens-app">Apache Excalibur had been retired</a>.
Apache Excalibur, for those of you who weren't lucky enough to watch the IoC and DI wars in the early 2000s, is an IoC container that's been around <em>forever</em>. It hosted Java components that could be defined using the Avalon framework. So, Excalibur was a container with type contracts, like an EJB server was (up until November 2009 when Java EE 6 came out) to EJBs, not a POJO IoC container as you'd expect today. It was basically a way to build and manage enterprise components and also take advantage of the Avalon  component lifecycle and services. 
 I remember looking at Excalibur in 2001 or 2002 and being very excited by it. Same with the Pico Container which also <a href="http://picocontainer.org">is still alive and kicking today,</a> to my surprise!  
</p>
<p>
So... was anybody using Excalibur today (besides <a href="http://james.apache.org/">Apache James</a>, the open-source Java e-mail server, which I'm not even sure still uses it and which I quite like as a test e-mail server)? 
Is this a market segment I've just been obvivious too? I've of course been oblivious to community trends at other big events, too. 
When EJBs first came out, I got suckered by the press and marketing behind it and thought it was going to be a fantastic tool. It took me a year or so to get to a point where I simply didn't care anymore about my job options, I refused  work in EJBs! 
I think the community also had the same reaction - at one point, we all sort of realized nobody else liked EJBs, either! 
I became a huge fan of XDoclet during this period, and an even bigger fan of Ant. I no longer have 80 hours a week to spend wrestling with code that could be written in a fraction of the time in .NET or Python. I no longer like Ant, or XDoclet, of course. 
For that matter, it    took me a long, but happy and oblivious year to realize people were employing JSF 1.0. I didn't think anybody would use JSF if things like Apache Tapestry and, later, Wicket and Echo and GWT were there. 
So, clearly, I've got a history of bad predictions. 
Sometimes, when a technology or trend just doesn't make any sense to me, personally, I tend to take for granted that others won't use it, too. 
Anyway, when the IoC/DI competitions started flaring up, I paid attention because I was <em>definitely</em> looking for an alternative to the then current stack.  
 </p><p>Things are very different today. Dependency injection is commoditized today - everyone uses the Spring framework, and some  also use Guice or CDI. Naturally, I'm <b>very biased</b> (I work for SpringSource), but I'm pretty sure you'll find that's true too. You might check job listings, or informally just ask people if they use IoC or DI, and if so, which container implementation. 
</p>
<p> 
I would argue that Spring has been, from day one, a very good IoC/DI container. In the beginning, there were arguments about pure-play IoC, and how one container supported constructor-injection, and another supported method or property injection. I remember when <a href="http://hivemind.apache.org/">Apache Hivemind</a> (a project that grew as an offshoot of Howard Lewis Ship's work building Apache Tapestry 4.0) made its debut and only supported interface based injection, all the while giving us novel ideas like factory methods and method-based injection. Spring didn't pick favorites or impose philosophies - it supports all of those things!  
 Spring goes out of its way to be as straightforward and flexible as possible. </p>
<p>
This too doesn't matter, I think. Conceivably somebody could simply build all of these things (and I'm sure many have) pretty easily. 
 So, while Spring's an excellent DI and IOC container, I hardly think everyone adapted it because of that alone.
  Spring won because it offered a component model and a supporting ecosystem of libraries and frameworks that were built from the ground up to support clean, IoC-centric, POJO-centric Java code. 
 Core Spring (and everything you'd need to have a competent, pure-play IoC container) all lives in 1-3 <code>.jars</code>, depending on which parts you want and whether you also want the component model that comes with it.
</p><p> It's all the other stuff that you can do with Spring that has made it a crucial tool in every developer's toolbox today.
These frameworks deliver real value to customers because they simplify or  enable outright solutions that they couldn't otherwise build.
 
I think this is more true every day as the industry continues to grow and evolve, and Spring tracks it in lockstep, providing support for all th emerging trends and technologies. The cloud and big-data are two key areas where the players and - indeed-the game itself is changing so fast that no standards body could ever hope to do a good job standardizing there. 
 </p>
<p>Anyway, enough of that rant. Just my two cents, as always. If you weren't paying attention to IoC or DI, then you don't know what you missed and this post won't be of much help ;-) It's interesting to see that today there's a very active debate about IoC and DI in both the .NET and ActionScript communities. The discussion there feels very simialar to the <em>intense</em> debates we had in the Java world 10 years ago. And there too, the winners will be the ones that deliver the most business value beyond simply supporting the "dependency injection" pattern.
 
</p><p>Rest in peace, Excalibur.  
 </p>
 
</p>
  			<a href="jl/blogPost/birthday_week_2011.html"><h1>Birthday week 2011</h1></a>
  			<p>26 January 2011</p>
  			<p>
<p> 
 Well, it's that time of year again! My dad's birthday, my birthday, and my favorite little 3 year old's (My buddy's little girl Makani - she's a whopping three years old already) birthday!
I'm taking a trip to Portland, Oregon with the misses this Friday to visit dad and see the family. I'm really looking forward to that.  Nothing quite so wonderful as perpetually, if only slightly, damp trees and coffee.  :-)
</p>
<p> At "work" at SpringSource (where I spend the largest chunk of my day and usually the happiest part, too!) we just posted "<a href="http://blog.springsource.com/2011/01/25/green-beans-getting-started-with-enterprise-messaging-and-spring">Green Beans: Getting Started with Enterprise Messaging in Spring.</a>" I had a fairly big hand in that and feel like it'll be a very good introduction for a lot of people to two of the most important tools you can have in your arsenal, AMQP and JMS. In my humble, bordering-on-insignificant-opinion, the Spring support for JMS has always been second to none. It's easier to use JMS from Spring than it is from Java EE or anything else by far, and it has been for most of the last decade. It's <em>way</em> easier to use AMQP-based brokers from Spring than anything else! Check it out - add that extra asynchronous kick to your architecture and code!
</p>
<p>
For my new year's resolutions, I decided I needed a hobby (err, besides coding...). I sat down and wrote up a list, like this:</p>
<UL> 
<LI> work out and diet. Aim to lose 10 lbs a month. This was basically a fear-based reaction. It reflected a lack of  resolve in last year's resolution, which was to gain 1 lb a month. I was told to never   negotiate out of fear! Don't negotiate with terror(ists)! Choosing this   would amount to  an affront to the basic  liberties I've long held dear. 
 </LI>
<li> Read comics more. I used to read comics a lot as a boy, and look how I turned out; I'm fi... well... eh, I could be worse! 
</li>
</ul> 
<p> Anyway, after giving option one due reflection, I decided for option two, because ... well, who wouldn't? So, for my birthday, my  girl bought me (<em>sssh!</em> She doesn't know this yet, it's a surprise...) a <a href="http://marvel.com/digital_comics/">Marvel Comics digital comics</a> subscription. All told, it was like $60.00 for armchair-easy access to all the comics you could ever want to read from the last... at least 10 years (I missed a lot of stuff in the last ten years!)
 as well as new stuff. The only gripe is that it uses Flash to display the comic books on the screen (which isn't normally something I care about one way or another) and it <em>doesn't</em> have an iPad app. It works <em>ok</em> on my Google Nexus S, and of course my Linux Book Pro works perfectly, but they're of clumsy form factors. I want it to work on the iPad. I'd even pay an extra ten dollars.
</p>
<p> Maybe next year... </p>
</p>
  			<a href="jl/blogPost/and_were_off_2011s_moving_way_too_quick.html"><h1>And We&apos;re Off! 2011&apos;s Moving Way too Quick!</h1></a>
  			<p>24 January 2011</p>
  			<p>
<p> And we're off! The new year has  been moving exceedingly quickly (I can't beleive we're already almost done with the first month! "Stop the world, I want off!")
   I don't know if you guys noticed, but SpringSource has been putting out new educational content (and a corresponding amount of code that quickly overwhelms any attempt at providing educational content..) on the <a href="http://www.springsource.org">SpringSource.org</a> web site. I have been trying to publish  two weekly-ish (we may miss a day or two or a column or two) "columns."  One is called "This Week in Spring," which details all the new stuff in the community related to Spring and/ or SpringSource. If you've written a cool Spring tutorial or read  a blog post that had what you needed to get going with Spring, let me know!  
Here's an example of last week's "<a href="http://www.springsource.org/node/2997">This Week in Spring</a>." 
The other "series" I've been working on (with occasional guest-scribes) is our series of educational, back-to-basics posts called "<a href="http://blog.springsource.com/category/green-beans/">Green Beans.</a>"
</P>
<p>  At SpringSource R&D, we've been racing like crazy with new stuff! Spring Data for NoSQL support, Spring Hadoop (which provides integration with Hadoop), Spring Integration point releases, Spring Batch, Activiti support, Spring AMQP, Spring Mobile (which, at the simplest level is Spring MVC support for mobile device content negotiation), Spring Android (support for consuming RESTful services from Android devices using Spring's RestTemplate) etc., are all in active development! I've missed a lot, of course, and this doesn't even include the <em>very</em> impressive Spring core 3.1 changes that are fast nearing completion!  We've got so much code we don't even know where to keep it all! We have a presence on <a href="http://www.github.com/springsource">github.com/SpringSource</a>, on our own <a href="http://git.springsource.org">git.SpringSource.org</a> and of course the older (http://src.springsource.org) Subversion tree where Spring classic (among others) is still hosted. Users are, of course, always encourage to contribute and feedback. 
</P>
<p> So, this is why I'm not doing a good job at keeping this blog current. Come visit me at <a href="http://www.springsource.org">on the forums or in the blog posts!</a> </p>
</p>
  			<a href="jl/blogPost/springing_forward.html"><h1>Springing Forward</h1></a>
  			<p>02 January 2011</p>
  			<p>
<P>I can't believe how quickly things have come and gone. I thought
2009 was great, but 2010 year no doubt takes the cake! Now that we're
all on the other side of the new year, I thought I'd take a quick
look at my year (and my decade) and talk about the Spring framework.</P>
<P>Last decade started strangely for a lot of us here in the United
States. We saw a very strange election, the source of much discord in
the political world. Scandalous though that might have seemed, it
would all seem so fleeting when two planes crashed into the twin
towers in New York City, New York. The reactions of a panicked
country seemingly under siege would change the landscape over the
next several years. The ramifications are still very pronounced and
felt, I fear, in every corner of this tiny little planet.</P>
<P>I started the decade, and my professional career, wading through
the dot-com boom and subsequent bust. I've been fortunate to have
worked with a lot of startups over the years. I've also worked in
stodgy, established corporations.  I feel like working at a bank is
the easiest way to fall through the cracks in life. It never ceases
to amaze me that there are projects in some banks being started this
very day, January 1, 2011 (1/1/11..!) using Struts 1. 
</P>
<P>It has been my experience that startups have the blessing - and
burden - of having no room for failure. I have spent a lot of time
making things work that just shouldn't work. While I've always been
best-practices-oriented, I was leery of any gospel according to the
vendors. I once had a manager utterly terrorize me because I was
using EJBs when he had PHP script kiddies that purported to be able
to deliver a huge function of the project done by "just downloading
a script!" This taught me a valuable lesson. Looking back, I
suspect the manager's claim was probably genuine, and I feel like
such a heel for blindly relying on the vendors' claims that EJBs were
the way forward, the future. I never could convince myself that the
PHP way was <I>the </I> way, but
there was no denying the obvious productivity gains for many common
tasks.  There was a time when I was looking pretty seriously at
moving to .NET because it promised radically improved turnaround
times. One of my main reservations about the then-nascent .NET
ecosystem was the lack of open-source. I've always worked hard to use
open-source if I could. 
</P>
<P>The Spring framework came along just in time. Engineers that
survive in startups tend to be scrappy engineers who are interested
in results, not process, and who aren't in it for the 9-5 shift, but
for results. The Spring framework is open source; it closed the gap
between .NET and Java by providing niceties like declarative
remoting, declarative transactions, etc; it also helps further
best-practices, not hinder them. I've been a true believer in the
Spring framework from day one.  
</P>
<P>In early 2005, I moved to Tempe, Arizona to help start a company.
The venture was a victim of the wayward economy when the housing bust
hit. While I made some great friends, I was
glad to return to Los Angeles in March of 2009. 
</P>
<P>
<img src = "media/17882" width ="250" style ="float:left;border:0; margin-right:10px;"/>
Early in 2010 I had the fantastic good fortune to join a company
here in Los Angeles called <A HREF="http://www.shopzilla.com">Shopzilla</A>
- they're the group behind <A HREF="http://www.bizrate.com/">BizRate.com</A>,
<A HREF="http://www.beso.com/">BeSo.com</A>, <A HREF="http://www.shopzilla.com/">Shopzilla.com</A>,
and <A HREF="http://tada.com/">tada.com</A>, each of which gets a
staggering amount of traffic. They use the Spring framework
extensively and feature an excellent engineering environment as well
as one of the best workplace environments in the business (arcade,
lounge, free lunch, great perks, gym, etc., etc.). There are many
brilliant people at Shopzilla. I think it is our natural tendency to
approach strange codebases with trepidation and a sense of, "well,
I could do this better!" and a lot of times, unfortunately, that
instinct is on the money. I never felt that way with the large swaths
of code I encountered in Shopzilla's codebase. 
</P>
<P>I've been in the unfortunate position in my life of having to work
at places where engineers were begrudged unit tests; where code and
projects were wildly inconsistent, or antiquated across projects;
where there was a strong, undue sense of code ownership and code was
walled off to all but two engineers (who had twelve weeks off yearly
and were busy planning their retirements). Shopzilla was the
antithesis. It was... wonderful to be completely unencumbered by
management and bureaucrats. 
</P>
<P>I loved Shopzilla's earnest maximization of the Spring framework. </P>
<P>Let me try to explain. If you'll permit a generalization,
engineers at startups can't afford to trust, anything. No time, after
all. You hope that people already appreciate the benefits of code
reuse, of course. I wonder if those people also realize the
responsibility that comes with reuse. If something breaks in that
code, its up to you to see it gets fixed. Keeping a stack as
open-source centric as possible facilitates fixes. Broken code in a
server is bad, but try <I>proving </I>it, let alone fixing it,
without the source code! Support contracts might help there, but
rarely as quickly as you need it to. It takes courage to use other
people's code, and it takes courage to trust <I>and</I>
verify promises extended by that code. It takes skill to integrate -
and to care - about the big picture system, and not just the
individual moving parts, too.  
</P>
<P> That is my conceptual framework
when approaching projects. I use the Spring framework because it
integrates with many different technologies and insulates users from
the idiosyncrasies between various technologies through a unified
component model. It levels the playing field. Depending on the stack,
there are any number of places one might have to tailor a project 's
behavior to the requirements of a system. Logging frameworks, service
tiers, web service tiers, caching frameworks, web (including core
APIs like Servlets), workflow engines, integration engines,
processing grids, batch processing frameworks, job scheduling
frameworks, etc., all have their own notion of a "component" in
that domain, and each one of them expects you to work in terms of
that component model, ignoring the uniformity and conventions you'd
hoped to establish across your code base. 
</P>
<P> Spring opens the doors to all
these technologies (and untold many others) and lets you work in
terms of <I>your </I> domain
model. The engineers behind the Spring framework have plumbed the
depths of these various frameworks and done the legwork to make it
easy for you to integrate them in a manner consistent with your
codebase. Where they've had to, they've fixed parts of these
projects, and provided less risky paths for integration. Often, this
process is as simple as dismantling the custom component model in
place and letting people think in terms of plain 'ol Java objects
(POJOs), avoiding the inconsistent, ever-varying, project-specific
configuration files.  
</P>
<P>Spring's power - and the reason why I personally find the very
notion of some other pure play IoC container like CDI as a "competitor"
to Spring to be laughable at best - is its rich, unified libraries
and the platform that it provides through its integrations. Spring
provides a clean, consistent metaphor for approaching problems. It
provides libraries that are idiomatic and that work wonderfully
together, and it provides services that can be weaved in a clean way
across an application. These libraries are often layered. They
present the 90% case solution first, but provide hooks through the
use of things like strategy interfaces and callback methods should
you need to tailor the behavior. 
</P>
<P>The Spring framework is a very good example of the <A HREF="http://en.wikipedia.org/wiki/Open/closed_principle">open/closed
principle</A>. It is telling that very few people even know about all
of the Spring framework's extension points; most people don't need
them. For 90% of the use cases, Spring makes the impossible easy, and
provides the flexibility to tackle the other 10%. Where possible,
Spring makes facets of an application invisible -  things that used
to require an API. Where there is still an API dependency, Spring
typically ships with a cleaner API that insulates you from it or
simplifies it. 
</P>
<P>I mention all of this because Shopzilla's architecture and
applications - as much as possible - lived in the 90%; things were as
simple as possible thanks to Spring and the <I>incredible </I>diligence
of the engineering team. Shopzilla really excelled in all the little
10% spots, too. They used or extended everything, taking nothing for
granted. Shopzilla had a custom Spring MVC view resolver and view
templating format, for example. They have a custom JMS message
listener container that was geared to batching in the style of the
Spring framework's message listener container. They made ingenious
use of monitoring, Spring's amazing AOP support, JMX, and various
open source projects to handle terabytes of logging. The entire
federated architecture across several different teams used REST and a
standard, Maven controlled archetype to keep projects standardized.
In essence, as part of a engineering-wide culture of consistency, and
code reuse, Shopzilla had built upon and extended the Spring
framework, and it underpinned everything they did. Shopzilla
integrated technologies and published reusable solutions for common
problems so that <I>everybody</I> 
benefited in the same way that the Spring framework itself does.</P>
<P>Shopzilla's amazing, and I would recommend it to anybody if you're
looking for an amazing company to work for.</P>
<P> 
 <img src = "media/17881" width ="250" style ="float:left;border:0; margin-right:10px;"/>
So, when I was approached to join SpringSource as the Spring
developer advocate, I was at once sad to leave Shopzilla, but elated
at the prospect of playing a part in this technology that had so well
served me for the better part of the last 8 years. Leaving Shopzilla
was painful, of course, but I had to see this opportunity through. I
have a deep respect for SpringSource and the committed engineers
there who  - even as I write this, on the last Saturday on New
Year's weekend - are sending emails about developments in the
projects! I've been with SpringSource since August. SpringSource is a
worldwide organization, so no matter what time of day it is, there is
somebody committing something awesome, somewhere, in plain view of
the world. If I'm not careful, I forget to leave my desk trying to
keep up with all the exciting stuff! 
</P>
<P>Spring's made my decade much more pleasant than it might've
otherwise been. If you'd told me we'd have something like the Spring
framework in 2000, and that I'd be privileged enough to work with the
people behind it, I would have dropped my CORBA and EJB books on your
feet. It would have seemed so cruel to joke about something like
that. 
</P>
<P>It's been a fantastic decade, and a particularly fantastic 2010,
and I can't wait to see what comes next. 
</P>
<P>I hope you had a safe, joyous New Years, and I wish you a
fantastic new year, and a new decade. 
</P>
</p>
  			<a href="jl/blogPost/devoxx_2010.html"><h1>Devoxx 2010</h1></a>
  			<p>23 November 2010</p>
  			<p>
<p>  
 I've just returned from Devoxx 2010 where I manned the SpringSource booth and talked to members from the community and gave a talk on the latest and greatest in the wide world of Spring. It was a lot of fun, but I'm glad to be home! There's a bit of downtown for those of us in the states as we celebrate Thanksgiving. Looking forward to catching up on some work!</p>
<P>Then, I'm off to speak at the Salesforce.com <a href="http://www.salesforce.com/Dreamforce">Dreamforce conference</a>. I'll be giving an intro to <a href="http://www.springsource.org/about">Spring</a> for the busy Force.com developer with my friend <a href="http://twitter.com/quintonwall">Quinton Wall,</a> the SalesForce.com evangelist. This talk will be useful for developers interested in moving to the <a href="http://www.vmforce.com">VMforce</a> cloud, coming from a Force.com background. 
 The event looks to be <em>very</em> interesting (beyond the incredibly cool technical sessions, I hear Bill Clinton's giving a keynote, and Stevie Wonder's the musical talent... not too shabby!), so don't miss it!</p>
</p>
  			<a href="jl/blogPost/the_h2_embedded_database.html"><h1>The H2 Embedded Database</h1></a>
  			<p>23 November 2010</p>
  			<p>
<p>  
I've been making heavy use of the <a href="http://www.h2database.com">H2</a> database of late.  
 H2 represents the next big idea from the mind of the gentleman who created <a href="hsqldb.org">HSQL</a>, so, of course, it's a rock-solid alternative to that.  
</p>
<p> I used it for my sample code in my blog post on the SpringSource blog <a href="http://blog.springsource.com/2010/11/09/green-beans-putting-the-spring-in-your-step-and-application/">Green Beans: Putting the Spring in Your Step (and Application)</a> 
a few weeks ago and it worked really well. 
 Ultimately, the example demonstrated Spring's fantastic support for creating embedded databases through the <code>jdbc</code> namespace. Using the namespace, you can create an in-memory, embedded database instance, feed it setup SQL scripts, and then reference it as a datasource, all in the following 3 tidy little lines:
</P>
<PRE><CODE>&lt;jdbc:embedded-database id="ds" type="H2"&gt;
  &lt;jdbc:script location="classpath:setup.sql"/&gt;
&lt;/jdbc:embedded-database&gt;
</CODE></PRE>
<P> I mention this all because it'd be easy to think of H2 as <em>only</em> an embedded database.  But it's not. I've not used it in anger myself yet, but recently I've seen it used in several places I wouldn't have imagined at first. H2 itself bills itself as the most advanced open-source database out there (not just of the
 <em>Java</em>, or <em>embedded</em> databases, but <b>all</b> of them!)
</p>  
<p> I'm a big believer in the power of a good workflow / business process managment system, and support and use <a href="http://www.activiti.org">Activiti</a> which is an Apache 2 licensed open-source BPMN 2.0 implementation. I'm also a  committer to the project on the SpringSource side, along with the unnaturally brilliant Mr. Dave Syer, but   my knowledge of it is mainly from using it as a consumer. Activiti stores process state in a database (this is how it's able to passivate processes over long expanses of time). The first several milestone releases of Activiti  
featured exclusive support   for persisting process state in H2, and H2 alone. As the project nears 5.0 GA, support for PostgreSQL and MySQL have also been added, but it's pretty telling that initially H2 was and they weren't.
</p>  
<p> 
 If you spend time spelunking <a href="http://git.springsource.org">git.springsource.org</a> (and why <em>wouldn't</em> you?), you'll know that it's a veritable treasure trove of code - many of the SpringSource open-source projects are there.  Users are also free to create accounts, and  clone and manipulate repositories as they like, in very much the same fashion as one might   with <a href="http://www.github.com">Github</a>. One particularly interesting project is <a href="http://git.springsource.org/greenhouse">Greenhouse</a>, which is a reference application out of which many different, great little projects have emerged like Spring Social, Spring Mobile and Spring Android. The application is an event manager for conferences. Most conferences have something like it to let you build a session schedule and be notified of changes, usually from the convenience of your mobile device, like Greenhouse. It too is built on top of H2 which is already in production and available to a non-trivial userbase. 
</p>
<P> The reason I use it is because I tend to do a lot of things in the interest of exhibition, and nothing beats a readily available, easily installed database. With H2, you simply download it, unzip it, <code>cd bin</code>, and then run <code>h2.sh</code>. Boom, up pops a browser which prompts you to login and off you go! You can introspect your schemas, run queries (the query editor has auto complete and is <em>ridiculously</em> intuitive, and keyboard friendly!) and do basic administrative tasks all from your browser. 
</p> 
<p>So, what's my point? I didn't know much about this handy little database until a year ago and now, increasingly, I find myself reaching for it all the time! Give it a go if you have a moment, as that's all you need.  
 As I've never sat down and done a comparison against my  RDBMS-of-choice, <a href="http://www.postgresql.org">PostgreSQL</a>, I don't really know where H2 stands as an alternative, but my cursory sort of uses thus far give me the impression that it'd handily give MySQL a run for its money. </p> 
</p> 
</p>
  			<a href="jl/blogPost/adobe_max_2010.html"><h1>Adobe MAX 2010</h1></a>
  			<p>30 October 2010</p>
  			<p>
<p>
<a href="http://max.adobe.com/" style = "border:0;" border="0"><img border ="0" src = "media/17870" style  = " background-color:black;  float:left; margin-right:10px; " /></a>  
 What a whirlwind month! First, <a href="http://www.joshlong.com/jl/blogPost/java2days_2010.html">Java2Days,</a> then <a href="http://www.joshlong.com/jl/blogPost/springone2gx_2010.html">SpringOne,</a> and then Adobe MAX. 
</p><p> I just spoke at <a href="http://max.adobe.com">Adobe MAX 2010</a> with my colleague Jeremy Grelle on high productivity Flex applications using Spring Roo. Reception seemed to be very, very good (I'm attributing this to Jeremy, of course).  Jeremy's the main contributor and founder of the <a href="http://www.springsource.org/spring-flex">Spring BlazeDS</a> project from SpringSource. He's also the sponsor for the <a href= "http://www.springactionscript.org/">Spring ActionScript</a> project. Spring BlazeDS brings enterprise messaging and services to Flex and Flash clients. Spring ActionScript provides a clean way of describing IOC in your client-side ActionScript code - it even provides the ActionScript equivalent of the <code>@Autowired</code> annotation on components that are added to the stage.
</p><p> <a href="http://www.motorola.com/Consumers/US-EN/Consumer-Product-and-Services/Mobile-Phones/Motorola-DROID-2-US-EN"><img border = "0" width = "200" src = "media/17871" style = "float:right;margin-left:10px;"/></a>
This year was a very good year to be an attendee. They gave attendees new <a href="http://www.motorola.com/Consumers/US-EN/Consumer-Product-and-Services/Mobile-Phones/Motorola-DROID-2-US-EN">Droid 2</a> Android-based phones (I finally made the switch from an iPhone 3GS to an Android device! Yay! The Droid 2 is not the most impressive Android offering, by far, but represents a marked improvement over the iPhone. I was glad to get it. Attendees also received a <a href="http://www.logitech.com/en-us/smartTV/revue">Logitech Revue,</a>  which is a Google TV-based device.</p><p> 
As you might expect from a good conference, there were plenty of great hallway conversations. Look forward to it next year! </p><p> Now, however. I'm going to enjoy this beautiful Southern California weekend and look forward to <a href="http://www.devoxx.com/display/Devoxx2K10/Home">Devoxx</a>
</p>
</p>
  			<a href="jl/blogPost/springone2gx_2010.html"><h1>SpringOne2GX 2010</h1></a>
  			<p>18 October 2010</p>
  			<p>
<p><a href="http://www.springone2gx.com/" border="0"> <img src = "media/17878" style  = "float:left; margin-right:10px; " /></a>  I'll be speaking at <a href="http://www.springone2gx.com/">SpringOne2GX</a> this week along with a raft of supremely awesome speakers from the Spring and Grails communities.   I'll be delivering a talk about building custom components (mostly, custom adapters) for <a href="http://www.springsource.com/spring-integration">Spring Integration.</a>  There are other talks happening concurrently that, if I weren't giving a talk, I'd want to attend. :-) This year is poised to continue last year's agressive growth in attendance. Besides my talk, I'll be there  taking in the talks and chatting with people in the hallways.  I hope to see you there! </p>
</p>
  			<a href="jl/blogPost/java2days_2010.html"><h1>Java2Days 2010</h1></a>
  			<p>04 October 2010</p>
  			<p>
<p> <div style = "float:left; margin-bottom:10px;  margin-right:10px; padding: 10px; background-color: black; width:220px "> <img width ="200"  src = "media/17872"/>  </div> I'll be speaking (again) in Sofia, Bulgaria at <a href="http://2010.java2days.com/">the Java2Days conference</a> on the 7th and 8th of October. I was there last year and quite enjoyed the conference. What a wonderful group! I'll be copresenting two talks with Oleg Zhurakousky (we'll be talking about <a href="http://www.springsource.org/spring-integration">Spring Integration 2</a> as well as RabbitMQ and AMQP), and another with <a href="http://www.jamesward.com/">James Ward</a> (we'll be talking about Spring BlazeDS and Flex, naturally). Finally, I'll be giving another presentation  on using Spring and the Apache 2 licensed BPMN 2 solution <a href="http://www.activiti.org">Activiti</a> (simialar to the talk I gave at  <a href="http://jz10.java.no/">JavaZone</a> recently).  Java2Days is the only conference of its kind in the Balkans and I sincerely hope to see you there!  </p>
</p>
  			<a href="jl/blogPost/ubuntu_1010_maverick_meerkat_on_a_macbook_pro.html"><h1>Ubuntu 10.10 (Maverick Meerkat) on a MacBook Pro</h1></a>
  			<p>04 October 2010</p>
  			<p>
<p> I have long used <a href="http://refit.sourceforge.net/">rEFIt</a> to install Ubuntu on a MacBook Pro. Simply install rEFIt as instructed on the site and then install Ubuntu on the newly created partition. No weirdness. Depending on your hardware, you may need to make sure that the Ubuntu installer program uses <i>nomemset</i>. This wasn't the case for me. </p><p>This setup lets me have my favorite operating system on (admittedly) fairly nice (albeit overpriced) Intel x86 machines.  However, the latest generation of MacBook Pros <a href="https://bugs.launchpad.net/linux/+bug/576601">have caused me no end of grief with Ubuntu 10.04.</a> Ubuntu 10.10, Maverick Meerkat, remies everthing and I'm happy to report I'm running the release candidate of Ubuntu 10.10 on my Macbook Pro as I type this. </p><p>Everything seems to be working fairly well. I put this post out to confirm it can work for you on a Mac, and to also point people <a href="http://www.pagondel.org/how-to-instalar-vmware-en-ubuntu-10-10-64-bits/">to this</a> page if they're having trouble getting <a href="http://www.vmware.com/products/player/">VMware's excellent VMware Player</a> product working on 10.10. </p>
</p>
  			<a href="jl/blogPost/spring_and_the_activiti_bpmn2_engine_at_javazone_2010.html"><h1>Spring and the Activiti BPMN2 engine  at JavaZone 2010</h1></a>
  			<p>03 September 2010</p>
  			<p>
<P>   <img src = "media/17868" style = "float:left; padding-right:10px; " /> I'll be speaking at <a href="http://jz10.java.no/">JavaZone</a> in <a href="http://jz10.java.no/about.html#The_Venue">Oslo, Norway</a> on using <a href="http://javazone.no/incogito10/events/JavaZone%202010/sessions#76db7d95-1ca5-4288-bc45-b71210a62b70">Spring and Activiti</a> together. 	If you want to learn a bit about <a href="http://en.wikipedia.org/wiki/Business_process_management">Business Process Management</a> using <a href="http://www.activiti.org">Activiti</a> in conjunction with the <a href="http://www.springsource.org">Spring framework,</a> then this talk is for you!  We'll explore using Spring from Activiti's BPMN 2 engine, and we'll explore connecting your business processes to other interesting systems and offloading work using <a href="http://www.springsource.org/spring-integration">Spring Integration,</a> SpringSource's framework for building event driven applications and connecting your applications to your data and services.  </p> We'll talk a little bit about Spring Integration, but  you won't want to miss Spring Integration lead  <a href="http://javazone.no/incogito10/events/JavaZone%202010/sessions#d8859c59-5c58-45bf-bd1c-39167c2268d6">Mark Fisher's</a> talk on Spring Integration either!  If you're new to the wide of world of Java configuration  in Spring 3, then be sure to check out Costin Leau's talk on <a href="http://javazone.no/incogito10/events/JavaZone%202010/sessions#d1f50946-9c72-441c-b30b-70af5b21633c">Spring 3 Java Config.</a></P> <p> People may know about JavaZone from their excellent  <a href="http://jz10.java.no/java-4-ever-trailer.html">Java 4-Ever</a> trailer  or their           <a href="http://jz10.java.no/ladyjava-music-video.html">Lady Java</a> video. If you haven't seen these, then check them out! </p>
</p>
  			<a href="jl/blogPost/spring_for_forcecom_developers.html"><h1>Spring for Force.com Developers</h1></a>
  			<p>03 September 2010</p>
  			<p>
<P>    <img src="media/17869" style = "float:left; margin-right:10px;"/> I did a webinar with <a href="http://www.twitter.com/cloudcoder">Quinton Wall</a>, the Developer Evangelist for  <a href="http://www.salesforce.com">Salesforce.com</a> and specifically on the <a href="http://www.vmforce.com">VMforce</a> collaboration. The talk went very well (thanks for all the questions and good feedback, guys!) and we have the recorded webinar, code and slides up <a href="http://www.springsource.org/node/2836">here</a>. This first webinar was more about introducing developers to the Spring framework, and establishing basic skills to enable developers to use <a href="http://www.vmforce.com">VMforce.com</a>.  Stay tuned for the <a href="http://www.developerforce.com/events/getstart_vmforce_techtalk/registration.php?d=70130000000FK2U">next webinar,</a> coming Sept 9, that will expand on the details of VMForce.com as an opportunity for Spring developers. </p>
</p>
  			<a href="jl/blogPost/secure_file_transfer_the_only_way_to_fly_err_copy.html"><h1>(Secure) File Transfer, the Only Way to Fly... err Copy</h1></a>
  			<p>24 August 2010</p>
  			<p>
<p> I've recently posted a piece on using the file-transfer adapters in <a href="http://www.springsource.org/spring-integration">Spring Integration 2.0</a> on the  <a href="http://blog.springsource.com/2010/08/23/secure-file-transfer-the-only-way-to-fly/">SpringSource blog</a>.  Check it out and leave a comment! </p> 
</p>
  			<a href="jl/blogPost/my_weekend_in_oregon.html"><h1>My Weekend in Oregon</h1></a>
  			<p>31 July 2010</p>
  			<p>
<p><div style = " float:right; margin-left:20px; margin-bottom:10px; "><img src = "media/17862" style = " border:1px solid black; " /><br/><em>My dad Clark, to the left, and my brother, Cary, to the right.</em><br/><img src = "media/17864"   height = "300"  style = "margin-top:10px;border:1px solid black; margin-right:10px;" />  <img src = "media/17861"  height = "300" alt = "The fish that dad and I caught. He'd remind us that 2 of the largest were his :-)" style = "margin-top:10px;border:1px solid black;"/><br/><em> <b>Left:</b> is the view from Detroit dam. <br/><b>Right:</b> the  fish that dad and I caught. He'd remind us that 2 of the largest were his :-)</em><br/>  <img src = "media/17863" alt = "the golden man at the Salem capital building."   height = "250"  style = "margin-top:10px;border:1px solid black; margin-right:10px; "  /> <img src = "media/17865" alt = "*a* duck crossing. Not *the* duck crossing. I like the penultimate duck, wings up in the air!" height = "250"   style = "margin-top:10px;border:1px solid black;  "/><br/><em><b>Left:</b> the capital building in Salem, OR. <br/> <b>Right:</b> <u>a</u> duck crossing. Doubt this is fabled one in the story... </em></div>As you know from <a href="http://joshlong.com/jl/blogPost/spring_integration_at_oscon.html">my last blog entry</a>, I  set out for <a href="http://en.wikipedia.org/wiki/Portland,_Oregon">Portland, OR</a> last week to give a talk at <a href="http://www.oscon.com/oscon2010">OSCON</a>. I arrived Wednesday nite, head south 50 miles or so to <a href="http://en.wikipedia.org/wiki/Salem,_Oregon">Salem, OR</a> - where I stayed with some family. The next day - Thursday evening - I made the trek back up to Portland (in my Uncle's giant, immaculate GMC pickup truck from '89!) for my talk on using <a href="http://www.springsource.org/spring-integration">Spring Integration to connect business with their customers</a> on Friday morning.  My time in Portland - Thursday night and part of Friday afternoon  -  was very fun. I met <a href="http://twitter.com/jeremyg484">Jeremy Grelle.</a> Jeremy was also presenting that morning; his talk was on the Spring Web Stack. (If you didn't know, Jeremy works a lot on the Spring web stack  - Spring Web Flow, Spring MVC, Spring BlazeDS, Spring ActionScript, etc.) A Friday at OSCON is a slow day. This particular one was only half as long as the regular conference days. So, as soon as Jeremy and I had finished our talks (they were both well received) we (two colleagues from <a href="http://tech.shopzilla.com">the Shopzilla engineering group,</a> Jeremy and I) cut out for some food and beer at <a href="http://www.deschutesbrewery.com/splash/default.aspx">Deschutes brewery</a> not too far by train from the conference hall. </p><p>I took the chance while in Oregon to head south a little bit and visit family in Salem, Oregon. I have a lot of family up there on my dad's side. Oregon's a beautiful state, Portland a beautiful city, but Salem... Salem is a <b>beautiful</b> capital. There are things about Salem you'll have to see to believe. The people are nicer, the air  -  with Oregon being the greenest state in the union  -   is cleaner.  I spent many a summer in Salem as a kid - making the long trek down to Bend for summer activities, enjoying the parks,  the forest and - of course  -  the <a href="http://en.wikipedia.org/wiki/Marionberry">jam</a>.</p><p> This trip felt like coming home again; I got to visit with aunt, uncle, assorted family, brother, and my niece and nephew. Time flies. I was very glad to see  my brother Cary and my sister-in-law Sandy, and their family.  It's been a few years, I'm afraid.  His son, my nephew, is Curtis. His daughter, my neice, is Samantha.</p> <p> Honestly, these sorts of stories make me feel old. Curtis was a giant! I hardly recognized him! He handily dwarfed both my brother and myself in stature and size. Whatever they feed those kids there, it's working! He has grown into quite a guy. </p><p> Curtis took my dad and I fishing on Saturday. He navigated and was the oreseman, guide, baby-sat us city-folk, handled re-baiting the lines and untangling the poles, and he still caught 5 fish (while helping ensure that dad and I each caught 4-5 fish!) It was amazing! I thought I'd seen everything. It was a catch-and-release river, so we didn't keep or eat anything we caught, but had a lot of fun nonetheless. </p><p>On Sunday, dad and I head out to <a href="http://en.wikipedia.org/wiki/Detroit_Dam">Detroit Dam</a> where we spent the early morning  hours - 6 AM to 10AM - with a line hanging off the side of the dam fishing. It was as if the fish were queuing,  single-file, and then jumping on our hooks.<p>Next comes my time with my niece, Samantha, now 16 or 17, going on 40. We spent the afternoons watching her  play in a city-wide basketball tournament called  <a href="http://onghoopla.com">Hoopla.</a> They cordoned off certain roads in downtown Salem and had   groups of all ages  play in matches. First, you have to admire a town where they have the initiative to close down major streets to provide such an outdoor, summer time activity for the youths. Second, my niece was excellent! Her team was ultimately eliminated on Sunday, but it was quite a riveting few matches getting there! </p> <p> I've long enjoyed Salem. It's a small city with big-city folks. I laughed so hard I hurt myself a few years ago when my aunt and I set out for something and she impatiently came to a stop at a street with THREE cars on it at rush hour. She didn't appreciate being dragged out into the rush-hour traffic -  a rush hour of THREE cars. She really didn't appreciate having to stop. I poked my head out the window to see why traffic (I use the term loosely) had come to an abrupt stop, and almost fell over. There was a duck crossing! </p><p> I look forward to doing it again next year. What a good trip, with great people. And, being from Southern California, I more than appreciated the 85 degree-highs on a Summer day! </p>
</p>
  			<a href="jl/blogPost/spring_integration_at_oscon.html"><h1>Spring Integration at OSCON!</h1></a>
  			<p>17 July 2010</p>
  			<p>
<p> <img style = "float:left;" src = "media/17859"/>Whew! Time sure flies! </p><p> I've been working 'round the clock of late with my fellow authors <a href="http://www.webforefront.com/">Daniel Rubio</a> and <a href="http://www.metaarchit.com">Gary Mak</a> to wrap up the writing for <a href="http://www.amazon.com/Spring-Recipes-Problem-Solution-Approach-Second/dp/1430224991">Spring Recipes, 2nd Edition</a> (more on that as it goes to press). This book's going to be second to none, folks.  Spring Roo, Grails, Spring Integration, Spring Batch, Flex, REST and many   (16, in fact!) other awesome chapters to bring you to the wide world of Spring 3. As a user of the Spring framework first and an author second, just trust me when I say I'd be very, very interested in buying this book if I wasn't already entitled to a free copy as an author. I digress. The book - all consuming though it is  -  isn't even why I'm writing this post! </p><p><a href="http://twitter.com/m_f_">Mark Fisher</a> - lead of the <a href="http://www.springsource.org/spring-integration">Spring Integration</a> project and all around nice guy (I'm going to throw in <i>brilliant</i>, as well, just in case you haven't had a chance to scour the code behind Spring Integration and come to that conclusion yourself) has been kind enough to let me contribute some adapters to the Spring Integration project  -  these adapters are centered around bridging communication between systems normally used by humans and automated systems. We have built support for <a href="https://jira.springsource.org/browse/INT-1106">XMPP</a> and <a href="https://jira.springsource.org/browse/INT-1199">Twitter</a> thus far. More's most assuredly coming, too! Looking into the crystal ball, I see ATOM and RSS playing a big part along with IRC. These adapters round out the support already provided for user-facing services like e-mail. </p><p>There's a lot of power and promise here. First, in a system with variable states, <a href="http://xmpp.org/">XMPP</a> is a very promising technology because - besides being a good way for diffent entities to exchange messages (it is, after all, the backing protocol behind Google Talk and Facebook chat) - it lets you add the notion of availability to actors in your system. Imagine a game, with users joining and leaving the game, or a chat room, or a grid of grid-nodes that may be taken off-line. XMPP provides a natural way of representing availability, which is increasingly important in a system with many fluctuating agents and states. </p><p>Twitter, ATOM/RSS and others are important because they let you consume human-synthesized events. Trends, volume, etc, are all interesting metrics that can be very valuable to your business.  I can see a lot of power in having a Twitter account that responds to queries or commands   - in much the same way as the <a href="http://lifehacker.com/033602/smarterchild-im-bot">Smarter Child IM</a> bot work(-s,-ed).  </p><p>In some sense, these adapters are only the beginning. They let your application  drink from the proverbial firehose of events, but what to do with them once you have them? Graph them? Send them to <a href="http://www.splunk.com/">Splunk</a>? Send them through a <a href="http://www.springsource.org/spring-amqp">message broker</a>  (and, depending on the volume, <a href="http://www.rabbitmq.com/">which one?</a>)?  Why not send them through a complex event processing (CEP) engine like <a href="http://esper.codehaus.org/">Esper</a> using this fantastic third party <a href="http://www.opencredo.com/technologies/opencredo-esper">Spring Integration adapter for Esper</a>? There, you can can process and analyze these events, and synthesize more interesting, complex events. </p><p>If this all sounds interesting to you (and why wouldn't it?), you should check out <a href="http://www.oscon.com">OSCON</a> next week in Portland, OR. I'll be there giving a talk called the "<a href="http://www.oscon.com/oscon2010/public/schedule/detail/13391">The Social Enterprise Service Bus.</a>" I'll be with some colleagues and friends from <a href="http://tech.shopzilla.com/">Shopzilla,</a>  too. If you'd like to grab a beer, ping me on Twitter (<a href="http://www.twitter.com/starbuxman">@starbuxman</a>) and we'll see what we can do! This is my first time presenting at OSCON, so I'm looking forward to attending some of the other talks almost as much as I am about getting a chance to talk to you guys. Hope to see you there!</p>
</p>
  			<a href="jl/blogPost/is_this_thing_on.html"><h1>Is This Thing On?</h1></a>
  			<p>16 July 2010</p>
  			<p>
<p> Hello, world!  Nothing to see here, simply conducting a few tests of the software. Move along... </p>
</p>
  			<a href="jl/blogPost/idempotent_queues_with_hornetq_or_the_last_value_header.html"><h1>Idempotent Queues With HornetQ (or: the &apos;Last Value  Header&apos;)</h1></a>
  			<p>04 May 2010</p>
  			<p>
<p> 
  Often times, a message queue is used as a way to publish "events" to 
other services in the enterprise. The publish/subscribe architecture 
decouples clients from the senders and alleviates the publisher from 
specific knowledge of the consumers of the messages. This, plus the 
asynchronous nature of a message queue 
 - the publisher does not block while clients consume the events - 
makes it ideal for publishing events to keep other systems aware of 
the state of a given system. 
</p><p> 
 Now, let's establish the use case: we want to consume events in a 
very busy system. In our case, it's possible to receive multiple 
events. Or, perhaps in your system you've positioned the message queue 
as a way to deliver commands - "pings" - using the "command bus" 
pattern. It may - and quite often is - be acceptable to ignore 
duplicate requests in architectures like these. 
 For example, a "command" message notifying a system that it can being 
processing a batch of data for the day only needs to be handled once 
per day, not 10 times, even if 10 different events are published. It'd 
be ghastly and inefficient to process the load 10x a day. What's 
required is some way to make message submission <em>idempotent</em> 
for certain messages - to make them indifferent to duplicate message 
submission. 
</p>  <p>  Backstory: I've been playing with JBoss' <a 
href="http://jboss.org/hornetq/">HornetQ</a> a lot recently. It's a 
<em>very</em> fast message queue: it recently bested ActiveMQ in the 
<a href="http://www.timfox.me/2010/02/jboss-hornetq-sets-record-specjms2007.html">SpecJMS2007 
benchmark by more than 300%!</a>. It is able to perform these feats 
because it uses a native, asynchronous IO layer on Linux centered 
around the kernel's <code>libaio</code> functionality. 
 On all other platforms, it's just gosh darned fast, regardless, but 
doesn't benefit from the native code acceleration. 
</p> <p>   So, imagine my surprise when I found out that HornetQ 
supports something it calls a Last-Value Header - a well known message 
header that - when the value is duplicated by other messages - causes 
the submitted message to override the existing message: the latest 
message with a duplicate header wins. 
</p><p> Here's how code submission to the queue looks using Spring's 
<a href="http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jms.html#jmstemplate">JmsTemplate</a> 
functionality: </p> 
<PRE> <CODE> 
this.jmsTemplate.send(this.destination, new MessageCreator() { 
    public Message createMessage(final Session session) throws JMSException { 
        TextMessage textMessage = session.createTextMessage( ... ); 
       <b> textMessage.setStringProperty("_HQ_LVQ_NAME", 
someUniqueStringThatYouSpecify); </b> 
        return textMessage; 
    } 
}); 
</CODE></PRE> 
<p> So, it's often easy to find a business value that can be used to 
derive a semantically correct, unique key to identify duplicate 
events. Processing a customer's order with 3 items in the shopping 
cart at 12:30:30s PM? Build a key combining the 30 second window, the 
customer ID, the count of items, and the order ID. This provides a 
service-level mechanism to prevent nasty double submit issues, for 
example. 
<p> You need to enable this characteristic on the queue itself in the 
configuration files. 
<p> 
 In HornetQ there are a few files under the 
<CODE>$HORNETQ/config/</code> folder that you need to be aware of to 
configure HornetQ: <code>hornrtq-jms.xml</code>, 
<code>hornetq-configuration.xml</code>, and 
<code>hornetq-users.xml</code>. In this scenario, we need to only 
modify the <code>hornetq-configuration.xml</code>. 
</p> 
<p> For a queue configured in <code>hornetq-jms.xml</code as follows: </p> 
<PRE><CODE> 
   &lt;queue name="dupesQueue"&gt; 
        &lt;entry name="<b>/queue/dupesQueue</b>"/&gt; 
        &lt;durable&gt;true&lt;/durable&gt; 
    &lt;/queue&gt; 
</pre></CODE> 
<p> ... you'll need to make the following changes to 
<code>hornetq-configuration.xml</code>:</p> 
<code><pre> 
  &lt;address-setting match="<b>jms.queue.dupesQueue</b>"&gt; 
         <span style ="text-decoration:underline"> 
&lt;last-value-queue&gt;true&lt;/last-value-queue&gt;</span> 
        &lt;/address-setting&gt; 
</pre></code> 
 <p>Simple, right? So, go ahead, send all the messages you want - only 
one will remain (unless of course that message is consumed. This only 
guards against duplicate submissions assuming the messages haven't 
been delivered yet. Enjoy!</p>
</p>
  			<a href="jl/blogPost/a_new_post_on_artimacom_called_soa_5_years_in.html"><h1>A New Post on Artima.com Called &apos;SOA, 5 Years In&apos;</h1></a>
  			<p>26 April 2010</p>
  			<p>
<p> I've just posted a blog on Artima.com called <a 
href="http://www.artima.com/weblogs/viewpost.jsp?thread=290352">SOA, 5 
Years In.</a> In it, I talk about some of the core value principals 
behind Thomas Erl's excellent <a 
href="http://www.amazon.com/Service-Oriented-Architecture-SOA-Concepts-Technology/dp/0131858580">Service 
Oriented Architecture: Concepts, Technology, and Design</a>. Check it 
out! </p>
</p>
  			<a href="jl/blogPost/the_serverside_java_symposium_2010_recap.html"><h1>The ServerSide Java Symposium 2010 Recap</h1></a>
  			<p>20 March 2010</p>
  			<p>
<p><img width="300" 
src="media/17858" style 
="float:left;padding-right:10px;"/> 
I'm in my hotel room thinking about the last 3 days here at <a 
href="http://javasymposium.techtarget.com/">The ServerSide Java 
Symposium.</a> I've had a fantastic time. I gave and/or participated 
in two talks: one was a talk on jBPM and Spring, the other was 
participation (representing <a 
href="http://www.springsource.org/spring-integration">Spring 
Integration</a>) in a panel with Jeff Genender (representing <a 
href="http://servicemix.apache.org/home.html">ServiceMix</a>) and Ross 
Mason (representing <a href="http://www.mulesource.org">Mule</A>) on 
ESBs. I enjoyed that process and enjoyed talking to Jeff and Ross 
gentlemen to the last. The 400+ people in the audience were 
invigorating too. Im pretty sure anybody would tell you this year was 
a welcome, marked improvement over previous years, especially in 
attendance numbers. It also heralded the introduction of a new 
editorial lineup, with Cameron Mckenzie taking the lead-editors 
position. Hes got his work cut out for him, but Im confident hes up to 
the task. 
</p><p> 
Rod Johnson gave a "zepo" (zero-powerpoint) Spring / Roo keynote, 
which was very impressive until it seemed to have failed him at the 
end. A post mortem revealed that the demo was fine, just a simple 
error. It was interesting to note that <a 
href="http://twitter.com/springrod/statuses/10735520971">he 
misplaced</a> his wedding ring and still gave a 99% performance 
without slides in front of 400+ people! Well done! Spring Roo seemed 
to garner a lot of attention from the audience and the Twitterati. 
Matt Raible and James Wards talk on Flex vs. GWT was fun, as expected. 
Jeff Genender and Keath Hesler both turned in good talks on 
ServiceMix. Ted Neward and Scott Davis gave their talks to great 
reception, as usual. Finally, my old friends Reza Rahman, Kito Mann, 
etc., did very well too. I missed some of the JBoss crowd (Emmanuel 
Bernard and Dan Allen, notably) this year, however. 
</p> <p>It was nice meeting James Gosling, too. Can't help but feel a 
little in-awe. 
The final treat was partaking in the festivities, libations, etc., 
with my colleagues at <a 
href="http://tech.shopzilla.com">Shopzilla.</a> Tim Morrow, Senior 
Architect at Shopzilla, gave a very <a 
href="http://twitter.com/springrod/statuses/10736658220">well received 
talk</a> about the scale story at Shopzilla. 
</p>
</p>
  			<a href="jl/blogPost/a_months_gap_and_no_explanation.html"><h1>A Month&apos;s Gap And No Explanation</h1></a>
  			<p>17 February 2010</p>
  			<p>
<p> Hello, world! I've been utterly and completely drowned in 
lake-busy these last few months. Updates may be a little slow for the 
next month, too. I've started working as an editor for <a 
href="http://www.infoq.com/author/Josh-Long">Infoq.com's Java 
Queue</a>. Work is progressing apace on my next Spring book, and some 
exciting things are happening in my personal life pretty soon. Plus, 
I'm working on an opensource side-project that'll unveil hopefully 
pretty soon here.  Anyway, check out my updates on Infoq.com if you 
want good old fashioned news, and on Twitter if you want commentary in 
140 character chunks.   Sorry I can't say more, but I will when I can! 
If you're going to <a href="http://javasymposium.techtarget.com/">The 
Server SIde Java Symposium</a> next month (March 17-19), don't forget 
to say hi, and <a 
href="http://javasymposium.techtarget.com/html/speakers.html#JLong">attend 
my sessions!</a> 
</p>
</p>
  			<a href="jl/blogPost/a_very_interesting_technique_for_crossdomain_ajax_requests.html"><h1>A Very Interesting Technique For Cross-Domain AJAX Requests</h1></a>
  			<p>13 January 2010</p>
  			<p>
<P> 
I read a <b>very</b> good article on breaking the crossdomain wall for 
Ajax requests. It's presented   <span style ="font-size:larger;"><a 
href="http://www.wait-till-i.com/2010/01/10/loading-external-content-with-ajax-using-jquery-and-yql/">here, 
as an entry on http://www.wait-till-i.com</a></span>. In it, Chris 
Heilmann talks about using a Yahoo service and JSON-P requests with 
Ajax to load any site's contents. You should most certainly read his 
article - it's fantastic. 
I post here the most salient bit (for me) since it genuinely knocked 
my socks off. To re-use this in your own code, copy the parts I've 
highlighted in bold. You can use your own version of jQuery, 
naturally, as the most interesting aspect is the bits inside the 
<code>ajax</code> function (which itself is pretty trivial. I created 
the wrapper function so that the code could be stashed away and 
re-used more readily). 
I demonstrate its use in the script fragment below that, where I load 
the HTML for this very site. 
<PRE> 
<CODE> 
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" 
"http://www.w3.org/TR/html4/strict.dtd"&gt; 
&lt;html&gt; 
&lt;head&gt; 
  &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt; 
  &lt;title&gt; ZOMG! &lt;/title&gt; 
  &lt;link rel="stylesheet" href="styles.css" type="text/css"&gt; 
&lt;/head&gt; 
&lt;body&gt; 
<b> 
&lt;script src="http://code.jquery.com/jquery-latest.pack.js"&gt;&lt;/script&gt; 
&lt;script language="javascript"&gt; 
function ajax( url, cb){ 
 var yqlUrl =  "http://query.yahooapis.com/v1/public/yql?"+ 
            "q=select%20*%20from%20html%20where%20url%3D%22"+ 
              encodeURIComponent(url)+ 
            "%22&format=xml'&callback=?" ; 
 $.getJSON( yqlUrl,  cb ); 
} 
&lt;/script&gt; 
</b> 
&lt;script language="javascript"&gt; 
$(document).ready(function(){ 
 ajax( 'http://www.joshlong.com', function(data){ 
  alert( data.results[0] +'' ) ; 
 }); 
}); 
&lt;/script&gt; 
&lt;/body&gt; 
&lt;/html&gt; 
</CODE></PRE> 
</P>
</p>
  			<a href="jl/blogPost/modeling.html"><h1>Modeling</h1></a>
  			<p>11 January 2010</p>
  			<p>
<p> 
I can't tell you how powerful overcoming the leap-before-looking 
temptation is when building a system. Have an object model? 
<b>Model</b> it using UML or ERD. Have a workflow? Draw a workflow 
diagram (an activity diagram). Have a webflow? Draw a webflow diagram 
(looks like a state diagram, or in more sophisticated scenarios, like 
an activity diagram). Have a site map? Map the site using a site 
planning tool like <a 
href="http://dub.washington.edu:2007/denim/">Denim.</a> All of these 
tools facilitate VISUAL feedback. They are cognitive, high level 
disciplines, and for good reason! Your mind interprets things visually 
differently than it does when coding from the left brain - it is able 
to "see" associations between related concepts when it's fed ideas 
through feedback that ends up in the right brain. 
</p><p> I've mentioned this before, I think, but check out Neal Ford's 
<a href="http://library.theserverside.com/detail/RES/1242309506_447.html">On 
the Lam From The Software Police</a> for more. 
</p><p>Even if you don't check it out, invest in trying the modeling 
tools associated with the task you're attempting to solve. 
 Even if you feel - after giving the technology a REALLY good-faith 
effort - that you've gained nothing, I'm willing to bet your product 
will still be more "consistent" than if you had developed it from 
scatch, unable to see the big picture. 
</p>
</p>
  			<a href="jl/blogPost/spring_blazeds_and_your_riathickthinfat_client.html"><h1>Spring BlazeDS and your RIA/Thick/Thin/Fat client</h1></a>
  			<p>06 January 2010</p>
  			<p>
<p>  How are you handling messaging in your thin client, thick client, 
fat client, RIA, or mobile client?  </p><p> <a 
href="http://opensource.adobe.com/wiki/display/blazeds/BlazeDS">BlazeDS</a> 
provides the ability to  proxy   messages from a JMS destination. Your 
AIR / Flex client can subscribe to it and provide a callback, very 
much like a Message Driven EJB or Spring's Message Driven POJOs. </p> 
<p>Traditionally, reacting to an event on a bus in a client (which 
very well could exist outside the firewall) means polling some service 
or setting up a specialized proxy or perhaps having  separate DMZ-safe 
JMS destination where you forward client-bound messages. 
</p><p>Suffice it to say, all of this is tedious and imposes an 
unecessary burden on the architecture and the developers. When it 
comes to messaging and remoting based services, there is 
<i>definitely</i> an extra burden on the developer of a RIA to secure 
or handle that requirement where this burden simply does not exist 
with traditional web applications. It is too frequently glossed over 
when architecting a system and then becomes a pain point. </p><p> 
There are <i>some</i> tools... </p><p>If you are using AJAX for your 
RIA, then you will have mastered tools like comet for push-based 
messaging. Even here, though, the burden of connecting and configuring 
comet is on you, the developer. For example, <a 
href="http://directwebremoting.org/dwr/index.html">DWR</a> - which is 
fantastic - doesn't have a way of proxying a JMS destination that I 
know of. It <i>can</i> be done, of course.</p><p><a 
href="http://www.dossot.net/">David Dossot</a> showed me a very 
interersting, albeit specific, <a 
href="http://docs.codehaus.org/display/JETTY/Integrating%20with%20ActiveMQ">solution</a> 
that solves the problem for Ajax using ActiveMQ's JavaScript client. 
</p> 
<p> So, back to the question at hand - how are you solving the 
problem? Do you just avoid building systems that have the problem? You 
truly can't think of at least one or two or a millino problems that 
would be better served by messaging? </p> 
<p> To me, the most <b>complete</b> solution appears to be Flex 
partnered with Spring and BlazeDS. If this post sounds like that of a 
gushing fan boy, you'll forgive me. It's true, unbounded enthusiasm. 
This technology is liberating, enabling! It reduces a real problem to 
a half hour of configuration - relegating the architectural burden 
back to the "gloss over" column, if you're using Flex. The Spring - 
BlazeDS integration is more than just a lot of "could"s. It provides 
out-of-the box support for connecting to JMS, and if you use the 
<b>excellent</b> <a 
href="http://www.springsource.org/spring-flex">Spring/BlazeDS</a> 
solution, then you can do all of this with  aplomb, and you can  hook 
up any flex client to any channel on your Spring Integration bus with 
a minimum of fuss. 
  </p> <p>Naturally, all of that will all be covered in <a 
href="http://www.apress.com/book/view/1430224991">Spring Web 
Recipes</a>, so stay tuned! </p><p> 
So: how are <b>you</b> talking to your messaging middleware?  Remember 
- messaging is even MORE important in the wild Web 2.0 / cloud world 
than the client-server applications of yesteryear. Temporal decoupling 
brings scalability. 
</p>
</p>
  			<a href="jl/blogPost/postgresql_84_and_bitronix_xa.html"><h1>PostgreSQL 8.4 and Bitronix XA</h1></a>
  			<p>31 December 2009</p>
  			<p>
<p>I use <a href="http://www.postgresql.org/">PostgreSQL</a> 8.3 - 
highly recommended by the way - 
and I just updated an application to 8.4. 
The application is built principally using Spring, Hibernate, and JMS. 
Naturally, some level of 
cooperation among transactions is required, so I use an XA provider - 
<a href="http://docs.codehaus.org/display/BTM/Home">Bitronix.</a> 
Everything was working swimmingly 
with PostgreSQL 8.3, but the application buckled on startup with 
errors when I upgrade PostgreSQL to 8.4: 
</p><PRE><CODE>Dec 30, 2009 11:25:50 PM 
bitronix.tm.twopc.AbstractPhaseEngine logFailedResources 
<b>SEVERE: resource xasql failed on a Bitronix XID [737072696E672D62746D2D- 
73656E64657200000125E3A04B9900000038 : 737072696E672D62746D2D73656E6465720- 
0000125E3A04BA40000003A] 
org.postgresql.xa.PGXAException: Error preparing transaction</b> 
at org.postgresql.xa.PGXAConnection.prepare(PGXAConnection.java:254) 
at bitronix.tm.twopc.Preparer$PrepareJob.run(Preparer.java:134) 
at bitronix.tm.twopc.executor.SyncExecutor.submit(SyncExecutor.java:12) 
at bitronix.tm.twopc.AbstractPhaseEngine.runJobsForPosition(AbstractPhaseEngine.java:109) 
at bitronix.tm.twopc.AbstractPhaseEngine.executePhase(AbstractPhaseEngine.java:71) 
at bitronix.tm.twopc.Preparer.prepare(Preparer.java:68) 
at bitronix.tm.BitronixTransaction.commit(BitronixTransaction.java:176) 
at bitronix.tm.BitronixTransactionManager.commit(BitronixTransactionManager.java:95) 
at org.springframework.transaction.jta.JtaTransactionManager.doCommit(JtaTransactionManager.java:1009) 
at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754) 
at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723) 
at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:394) 
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:117) 
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) 
at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89) 
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) 
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) 
... 
<b>Caused by: org.postgresql.util.PSQLException: ERROR: prepared 
transactions are disabled</b> 
at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:1592) 
at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1327) 
at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:192) 
at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:451 
</CODE></PRE> 
<P> 
If you're in my situation, the immediate cure is to uncomment and set 
the <code>max_prepared_transactions</code> 
attribute in <code>data/postgresql.conf</code>. A safe value seems to 
be 10, though your mileage may vary. 
There must be a reason they've disabled this in 8.4, so further 
investigation is required. In the meantime, though, everything seems 
performant and works as it did before. 
</P>
</p>
  			<a href="jl/blogPost/so_much_to_do_so_little_time.html"><h1>So Much to Do, So Little Time!</h1></a>
  			<p>28 December 2009</p>
  			<p>
<p><a href="http://www.springsource.org/about">Spring 3.0's out (you 
didn't get the memo?),</a> and there's a <i>lot</i> of interesting 
stuff. 
This release has been long in coming due in no small part to the 
specifications it tracks and to the intense furvor and emphasis placed 
on quality assurance and testing. One target platform - JEE6 (and with 
it the final versions of JSR330) - also just recently went final, and 
you'll find support for these technologies, as well, where 
appropriate. 
Now that it's out, you can start certifying applications in production 
on it. I've found that - aside from dealing with the new Maven 
imports - the upgrade process has been flawless. I've taken complex 
applications and merely fixed the jars and they continue to work. You 
will find, however, that there are a lot of reasons to go through and 
start selectively enabling new features, and namespaces. 
</p><p> In our book <a href= 
"http://www.apress.com/book/view/1430224975">Spring Enterprise 
Recipes</a>, my co-author Gary Mak and I discuss a lot of the new, 
exciting Spring 3.0 features. Spring 3.0 debuts slightly more 
streamlined scheduling / TaskExecutor / thread pool support. The idea 
is that you can more readily model asynchronous, repeating (at a 
scheduled time, rate, or both), and concurrent programming problems 
using these facilities and - in some cases - do so while leveraging 
more advanced facilities underlying a given target platform, like the 
WorkerJ implementations, the Java5 task executors, and thread pools 
and more. </p> 
<p> I won't go into much of that here as the book ablely covers most 
of it, but one thing I did want to cover (which we couldn't cover in 
time in the book as the feature was not ready as the book went to 
press) was the very elegant <code>task</code> namespace. 
<h2>Background </h2><p> It should be noted that these features are 
not, exactly, novel. Spring has shipped with a Quartz scheduling 
framework integration for years. Among many other niceties included 
therein was (and still is, for what it's worth) a <a 
href="http://static.springsource.org/spring/docs/1.2.x/reference/scheduling.html">MethodInvokingJobDetailFactoryBean</a> 
that allowed you to schedule future executions of a method on a Java 
bean using Quartz. </P><P> A few years later, EJB 3 debuted support 
for a limited form of scheduling using the <code>Timer</code> 
mechanism. One major limitation was the lack of support for CRON-like 
expressions and for asynchronous methods. Naturally, you could use JMS 
to acheive the same effect, in a way...</P><P>The JBoss gang debuted 
JBoss Seam support for <a 
href="http://docs.jboss.org/seam/2.2.0.GA/reference/en-US/html_single/#d0e21502">scheduled 
and asynchronous method execution on a Seam component</a> as well as a 
proprietary mechanism to <a 
href="http://www.jboss.org/file-access/default/members/jbossejb3/freezone/docs/tutorial/1.0.7/html/Asynchronous_Invocations.html">do 
the same with EJB 3.</a> In Seam, using these features was simply a 
matter of adding the appropriate configuration (as we do in Spring) to 
enable the executor (they have a few, including one based on the EJB3 
Timer and one based Quartz.) The usage here is familiar to what has 
recently been debuted in Spring 3.0. </p><p> Clearly, the need for 
such features is common enough that they've both been fully 
incorporated <a 
href="http://docs.sun.com/app/docs/doc/820-7627/bnbpe?a=view">into 
JEE6 and EJB3.1.</a> There, you can specify CRON expressions as well 
as defer the invocation of a method using the 
<code>@Asynchronous</code> or <code>@Schedule</code> annotations. A 
simple example looks like: 
</p><P><PRE><CODE>package com.joshlong.ejb.timer ; 
import java.util.Date; 
import java.util.logging.Logger; 
import javax.annotation.Resource; 
import javax.ejb.Schedule; 
import javax.ejb.Asynchronous; 
import javax.ejb.Stateless; 
import javax.ejb.Timeout; 
import javax.ejb.Timer; 
import javax.ejb.TimerService; 
@Singleton 
public class PeriodicGreeter { 
 // you could use this to schedule things manually 
 @Resource TimerService timerService; 
 // or use the annotations to do so automatically 
 @Schedule(minute="*/3", hour="*") 
 public void sayHelloPeriodically() { 
   System.out.println( String.format( "Hello, world, at %s" , new 
Date()) ) ; 
 } 
 @Asynchronous 
 public Future&lt;String&gt; sayHelloAsynchronously() { 
   System.out.println( String.format( "Hello, world, at %s" , new 
Date()) ) ; 
   // ... 
 } 
}</CODE></PRE> 
</p> 
<h2> Spring 3.0 Implementation </h2> 
<p> 
The <code>task</code> namespace let's you declaratively configure a 
<code>TaskScheduler</code> and a <code>TaskExecutor</code> instance 
using XML. From here, you can configure beans that have scheduled, or 
asynchronous, executions using the XML or - my personal favorite if 
you can get access to the code - via Java annotations. </p> <p>Here's 
an example Spring application context featuring this namespace and 
configuring a scheduler and executor with default-ish settings:</p> 
<P><PRE><CODE> 
&lt;?xml version="1.0" encoding="UTF-8"?&gt; 
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xmlns:task="http://www.springframework.org/schema/task" 
   xmlns:context="http://www.springframework.org/schema/context" 
   xsi:schemaLocation=" 
       http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
       http://www.springframework.org/schema/lang 
       http://www.springframework.org/schema/lang/spring-lang-3.0.xsd 
       http://www.springframework.org/schema/context 
       http://www.springframework.org/schema/context/spring-context-3.0.xsd 
       <b>http://www.springframework.org/schema/task 
       http://www.springframework.org/schema/task/spring-task-3.0.xsd</b>"&gt; 
 &lt;context:annotation-config/&gt; 
 &lt;context:component-scan annotation-config="true" 
       base-package="com.yourbasepackage.scheduling" /&gt; 
<B> 
 &lt;task:scheduler id="scheduler" pool-size="10"/&gt; 
 &lt;task:executor id="executor" pool-size="10"/&gt; 
 &lt;task:annotation-driven scheduler="scheduler" executor = "executor" /&gt; 
</B> 
&lt;/beans&gt; 
</CODE></PRE></P> 
<P> What you do from here is up to you. You could simply start 
defining tasks inline with your XML. 
That approach certainly has its redeeming qualities, not the least of 
which is that your code is more readily "documented" and 
<i>conceivably</i> 
adjustable at runtime with some refresh trickery... sure.. you 
<i>could.</i></p> 
<CODE><PRE> 
&lt;task:scheduled-tasks scheduler="myScheduler"&gt; 
 &lt;task:scheduled ref="greeter" method="sayHello" fixed-delay="5000"/&gt; 
 &lt;task:scheduled ref="greeter" method="sayHello" fixed-rate="5000"/&gt; 
 &lt;task:scheduled ref="greeter" method="sayHello" cron="*/5 * * * 
* MON-FRI"/&gt; 
&lt;task:scheduled-tasks/&gt; 
</PRE></CODE> 
<p>...In practice, however, the annotation approach just <i>FEELS</i> 
soo much better! So, here is how you might write a scheduled or 
asynchronous bean in Spring. 
</p> 
<PRE><CODE>package com.joshlong.spring.timer ; 
import org.springframework.beans.factory.annotation.Autowired; 
import org.springframework.scheduling.annotation.Scheduled; 
import org.springframework.stereotype.Component; 
import javax.annotation.PostConstruct; 
import javax.annotation.Resource; 
import java.util.Date; 
@Component 
public class SpringPeriodicGreeter { 
 // you can do everything you normally would using Spring, obviously 
 @Autowired CustomerService customerService ; 
 // this runs once every 5 minutes 
 @Scheduled(fixedRate = 1000 * 60 * 5) 
 public void sayHelloEveryFiveMinutes() { 
   System.out.println( String.format( "Hello, world, at %s" , new 
Date()) ) ; 
 } 
 @Scheduled(cron="*/5 * * * * MON-FRI") 
 public void sayHelloOnlyOneWeekdays() { 
   System.out.println( String.format( "Hello, world, at %s" , 
new Date()) ) ; 
 } 
 @Async 
 public void doSomething(String s) { 
  // this will be executed asynchronously 
 } 
 @Async 
 public Future&lt;String&gt; returnSomething(int i) { 
   // this will be executed asynchronously, but you can get the 
   // result by blocking on <code>Future.get</code> 
 } 
} 
</CODE></PRE> 
<p> Thus, this is nothing too strange - very simialar in fact to 
what's in JEE6. Obviously, I've not mentioned <i>every</i> permutation 
of the features from the various technologies, but hopefully this gets 
you past the initial cognitive "hump" of adapting a new technology. 
It helps that - at least in the Spring case - it's dead simple to 
start using it if you're already using Spring. 
I wonder if there will be support for working with 
the JEE6 annotations that describe the same things? The major 
takeaways are that you can get this simply by updating your version of 
Spring, which should be painless if you're not tied to Java 1.4. You 
can get the JEE6 functionality by updating your version of the 
platform and server, if the platform/server are ready (Glassfish is!). 
</p> 
<h2>Use</h2> 
<P> Now, as to <i>where</i> this stuff might be used, well, I can only 
think of a few <i>thousand</i> things... </p> 
<OL><LI> Quartz is probably still more powerful, but the 
implementation and usage are hackneyed - this new approach will feel 
much more elegant. You could probably get away with removing the old 
Quartz code and using this for most of your implementation needs. 
</LI> 
<LI>Because Spring's implementations are swappable, you could back 
this functionality with varying TaskExecutors/TaskSchedulers of your 
own implementation, if you wanted.</LI><LI>The obvious use case is 
that you can now remove <b>CRON</b>, <b>Autosys,</b> <b>Flux</b> and 
any number of other third-party, dedicated middleware schedulers from 
your architecture (if you're only using them to run Java 
services.)</LI> 
<LI>As with Spring itself, this abstraction is useful because you can 
deploy it inside of a web applicatior or any other place you can 
imagine Spring running, so you don't need to install a scheduler if 
you just want something run periodically inside your web container 
</LI> 
<li>If you have a Spring Batch job, this might be an ideal way to kick 
the jobs off periodically. You need to start processing the billing 
batch every night at 2am, but only on weekdays? This is a match made 
in heaven! How you get a Batch job to start running is left mainly as 
an exercise to the user. I recommend using an ESB (like Spring 
Integration) to react to events, or using a scheduler like this 
<code>task</code> namespace (or Quartz) to kick the jobs off. </li> 
<li>Spring Integration has a gateway mechanism that lets you front 
what is essentially a send (and/or) recieve operation on a channel 
(think: JMS queue/topic) with a method on an interface. I <i>love</i> 
this feature and use it a lot because I don't want to surface JMS 
queues / topics to the client (that's a little <i>too</i> loose and 
decoupled an API!). I also use it because it allows me to model 
fire-n-forget messaging using Java interfaces, which is exactly what 
the <code>@Async</code> annotation does. The other benefit of the 
Spring Integration feature is that the processing leaves the VM and 
goes somewhere to finish (ostensibly, wherever the consumer for the 
topic/queue lives) the job and then return the result. This provides 
scalability benefits to both the client <i>and</i> the server, whereas 
the <code>@Async</code> annotation would only increase the thoroughput 
of the client, in this case: processing still takes place on the node 
with the <code>@Async</code> annotation, it's simply deferred... 
Deferment <i>is </i> a valid way to increase capacity while decreasing 
thoroughput.</li> 
</ol>
</p>
  			<a href="jl/blogPost/my_tweet_cloud.html"><h1>My Tweet Cloud</h1></a>
  			<p>29 November 2009</p>
  			<p>
<p>Waiting for a long running process to finish up. Started screwing 
around on the internet and found a useful little application called <a 
href="http://tweetcloud.icodeforlove.com">TweetCloud.</a> It generates 
a neat looking image-based cloud of your tweets. Here's my <a 
href="http://tweetcloud.icodeforlove.com/starbuxman/13025">tweet 
cloud</a>. I'm <a 
href="http://www.twitter.com/starbuxman">@starbuxman</a>, if you're on 
that busy network and wanna chat.</p> 
<p><img src="media/17855" 
width ="400" /></p>
</p>
  			<a href="jl/blogPost/spring_batchs_multiresourceitemwriter.html"><h1>Spring Batch&apos;s MultiResourceItemWriter</h1></a>
  			<p>28 November 2009</p>
  			<p>
<p>If you've ever had to do batch processing, then you know how 
tedious it can be to write all the infrastructure code surrounding 
retries and error recovery and usefully handling long running 
processing and <i>all</i> the other tedium that surrounds a typical 
batch application. For these types of applications, I use <a 
href="http://static.springsource.org/spring-batch/">Spring Batch</a>, 
a batch processing framework from Dave Syer and the fine people at 
SpringSource. 
 </p> 
<p>The basic idea is that you setup <code>job</code>s that have 
<code>step</code>s, that have <code>tasklet</code>s. This the normal 
use case, but by no means the only one. You use jobs and steps to 
string together  sequences of processing input and writing to output 
via a <code>reader</code> and a <code>writer</code>. 
Spring Batch has implementations for both reading and writing that 
will likely meet most of your needs: XML, files, streams, databases, 
etc. There's so much interesting stuff here, so of course I humbly 
recommend you take a crack at the documentation or read my book, <i><a 
href="http://www.apress.com/book/view/9781430224976">Spring Enterprise 
Recipes</a></i>. 
</p> 
<p> That said all said, there's no obvious way to read from an input 
source and then write to multiple files. The use case here, in my 
case, is <a href="http://www.google.com/webmasters/tools/">Google's 
Sitemaps.</a> These are XML files that describe the pages on your 
site. You list every URL possible. If you have more than 50,000 links, 
then you must create many files and list those files in a Sitemap 
index file. 
 So, I wanted to read from a database and derive all the URLs possible 
for content, and then write those to sitemap XML files, where each 
sitemap could not exceed 50,000 entries. Spring Batch ships with an 
adapter writer that serves exactly this purpose. It's called 
<code>org.springframework.batch.item.file.MultiResourceItemWriter</code>. 
You define it just like you might any other writer, except that you 
wrap another writer with it. 
</p> 
<p> Here's the salient bits from my configuration. Most of this is 
boilerplate. I don't include the configuration of the Spring Batch 
environment, or the configuration of the reader, because those are 
pretty typical. Note that here we configure the <code>writer</code> 
for the <code>job</code> and in turn configure its 
<code>delegate</code> property, where we have the real writer 
implementation. In this case, there's no need to configure the 
delegate writer's <code>resource</code> property.</p> 
<pre><code> 
&lt;beans:beans xmlns="http://www.springframework.org/schema/batch" 
             xmlns:beans="http://www.springframework.org/schema/beans" 
             xmlns:aop="http://www.springframework.org/schema/aop" 
             xmlns:tx="http://www.springframework.org/schema/tx" 
             xmlns:p="http://www.springframework.org/schema/p" 
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
             xsi:schemaLocation=" 
http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-2.0.xsd 
http://www.springframework.org/schema/batch 
http://www.springframework.org/schema/batch/spring-batch-2.0.xsd 
http://www.springframework.org/schema/aop 
http://www.springframework.org/schema/aop/spring-aop-2.0.xsd 
http://www.springframework.org/schema/tx 
http://www.springframework.org/schema/tx/spring-tx-2.0.xsd"&gt; 
    &lt;beans:import resource="batch.xml"/&gt; 
    &lt;job id="batchForCreatingSitemaps"&gt; 
        &lt;step id="sitemap"&gt; 
            &lt;tasklet&gt; 
                &lt;chunk reader="reader" writer="writer" 
commit-interval="${job.commit.interval}"/&gt; 
            &lt;/tasklet&gt; 
        &lt;/step&gt; 
    &lt;/job&gt; 
    &lt;beans:bean id="siteMapLineAggregator" 
class="com...sitemapscreator.SiteMapLineAggregator"&gt; 
        &lt;beans:property name="domain" value="${sitemaps-domain}"/&gt; 
    &lt;/beans:bean&gt; 
    &lt;beans:bean 
class="com...sitemapscreator2.ResourceSuffixCreator" 
id="resourceSuffixCreator"/&gt; 
    &lt;beans:bean id="writer" scope="step" 
class="<b>org.springframework.batch.item.file.MultiResourceItemWriter</b>"&gt; 
        &lt;beans:property name="resource" 
value="file:#{jobParameters[outputResourcePrefix]}"/&gt; 
        &lt;beans:property name="resourceSuffixCreator" 
ref="resourceSuffixCreator"/&gt; 
        &lt;beans:property name="saveState" value="true"/&gt; 
        &lt;beans:property name="itemCountLimitPerResource" value="50000"/&gt; 
        &lt;beans:property name="<b>delegate</b>"&gt; 
<b> 
            &lt;beans:bean 
class="org.springframework.batch.item.file.FlatFileItemWriter"&gt; 
                &lt;beans:property name="encoding" value="UTF-8"/&gt; 
                &lt;beans:property name="shouldDeleteIfExists" value="true"/&gt; 
                &lt;beans:property name="lineAggregator" 
ref="siteMapLineAggregator"/&gt; 
            &lt;/beans:bean&gt; 
</b> 
        &lt;/beans:property&gt; 
    &lt;/beans:bean&gt; 
    &lt;beans:bean id="siteMapUrlRowMapper" 
class="com...sitemapscreator.SiteMapUrlRowMapper"/&gt; 
    ... 
&lt;/beans:beans&gt; 
</code></pre>
</p>
  			<a href="jl/blogPost/thanksgiving.html"><h1>Thanksgiving</h1></a>
  			<p>26 November 2009</p>
  			<p>
<p>I have a lot to be thankful for. This year   I moved back  
to Los Angeles, where I've been well received in a new job  and by 
family. I've experienced  success speaking at various conferences, and 
this year saw the publication of my first book, Apress' "Spring 
Enterprise Recipes." Recently, I was in a pretty bad accident (a 
big-rig rear-ended me) and I emerged alive.  I have made good friends. I am 
thankful for the readers of my blogs.  I am thankful for my  loving 
friends and family.</p><p>I hope you have a long list of things for 
which you're thankful, too. Happy Thanksgiving!</p>
</p>
  			<a href="jl/blogPost/spring_enterprise_recipes_from_apress.html"><h1>&apos;Spring Enterprise Recipes,&apos; from Apress</h1></a>
  			<p>21 November 2009</p>
  			<p>
<p> <img style ="float:left;" 
src="media/17856" /> 
<span style = "font-size:larger;">Warning: Shameless Plug</span> <br/> 
<br/> I am pleased to announce that, after a long time and a lot of 
work, my first book <b><i>Spring Enterprise Recipes</i></b> (which I 
co-authored with the indefatigable, epic and extraordinary Mr. Gary 
Mak, author of - among many other things, Apress' <i>Spring 
Recipes</i>) has been released and is now purchasable.  It should be 
hitting book stores soon, but in the meantime, you can <a 
href="http://www.apress.com/book/view/9781430224976">buy  the e-book 
at Apress.com</a>, or you can pre-order it <a 
href="http://www.amazon.com/Spring-Enterprise-Recipes-Problem-Solution-Approach/dp/1430224975">on 
Amazon.com</a>. </p><p> The book discusses Spring 3, but also accounts 
for the many "modules" surrounding Spring with an eye towards building 
elegant, scalable systems with a minimum of fuss.  Many of these 
modules have come from SpringSource, and some are independent third 
party projects that integrate well with Spring.  <i>Spring Enterprise 
Recipes</i> introduces concepts like business process management 
(BPM), enterprise application integration (EAI), distributed computing 
and messaging and then grounds these introductions with real-world 
examples using Spring and lead open source frameworks. 
 </p> 
<p>This book discusses both the <i>why</i> and the <i>how</i>. It 
starts with  a discussion of the usual suspects, exploring the 
quintessential tools in any developer's toolbox: RPC (RMI, Hessian, 
Burlap, Web Services, HTTP/Invoker, EJB 2 and 3, and more), messaging 
(via JMS), database access (JdbcTemplate, and a few of Spring's 
numerous supported ORM abstractions), transactions (e.g., various 
transaction abstractions supported by Spring), and numerous services 
like e-mail, JMX, worker pools, and  scheduling infrastructure.</p> 
<p>Then, we progress into more advanced solutions. This book includes 
the first-in-print or most updated coverage of a lot of technologies, 
including Spring Integration (a lightweight ESB-like integration 
framework for EAI),   Spring and jBPM 4 for business process 
management, GridGain for grid computing,  Terracotta for clustered 
state managment, Spring Batch for batch-processing solutions and OSGi 
to bring modularity to your application. 
</p> 
 <p> In the large, this book is a gentle, but comprehensive 
introduction to the best-of-breed solutions for tomorrow's 
architecture using Spring and other lightweight, powerful tools. 
Having said all that, I hope you'll consider it for your next purchase 
and that it helps you solve some interesting problems and build even 
more interesting solutions! 
</p>
</p>
  			<a href="jl/blogPost/understanding_go.html"><h1>Understanding Go</h1></a>
  			<p>17 November 2009</p>
  			<p>
<p> <a href="http://www.golang.org">Go,</a> a new language from 
Google, has created quite a stir. It has a great pedigree, owing to 
renowned experts like Rob Pike (a member of the Unix team, and a 
creator of the Plan 9 OS from Bell Labs.) The language is a procedural 
language (like C, or Python) which offers a strongly typed, but 
flexible type system (not centered around object-oriented facilities 
as we know them from languages like Java and Ruby). The syntax is a 
strange mix of C and Python. Honestly, it feels like C when you read 
it, but it writes more like Python - lots of features in the syntax 
that are designed to be consistent, predictable. </p> <p> <a 
href="http://www.cowlark.com/2009-11-15-go/">One blog entry</a> 
prompted a very lively discussion of the language: it made the 
comparison that Go seemed awfully similar to Algol 68, a language 40 
years past irrelevance. The blog entry said that while Algol 68 was a 
nice language, Go might be considered an efficient language. It 
claimed that efficient languages are the ones that - ultimately - 
propagate. Witness COBOL, C, C++, and Java, for example. Go, thus, may 
very well be a very <i> efficient</i> language, but it's not even 
close to a <i>nice</i> language. It's a lost opportunity. </p> <p> 
Programming languages tend to come and go, but they all advance basing 
their innovation in some small part on their predecessors. Programming 
languages <i>have</i> to evolve slowly.  Languages do not exist in a 
vacuum. They must respect the work that's preceded them, while 
innovating. They must strike a careful balance, never alienating the 
existing community, the legacy base, and always advancing the state of 
the art. Doing so incorrectly can be the biggest sin a language can 
make. Kowtowing to the legacy of C crippled the evolution of C++, 
leaving it  a confusing mix of phantom requirements and artificial 
features. Conversely, Java achieved meteoric propagation because it 
looked and felt like C++ without many of the warts. This made the 
transition to Java easy. Compatibility is a double edged sword. </p> 
<p> Most recent languages look and feel like C/C++. They've innovated 
ever so slightly, inducting into the syntax features  formerly handled 
by libraries. Or, the language is flexible enough to support 
requirement-specific DSLs. You can see this with Scala and Groovy, 
Ruby and C#. They're all fairly familiar, but offer advantages in 
their grammar over their predecessors. C#, for example, introduced 
LINQ, while Scala surfaced its concurrency facilities as an Actors 
DSL. The idea of a language syntax as a differentiators is even more 
relevant of late. The .NET runtime popularized the idea of a 
multi-language run time. It meant that choosing a language did not 
mean forsaking libraries. The JVM has matured, and there are many 
languages implemented atop it, as well. Other infrastructure VM 
projects have emerged, like the LLVM. </p> <p> So, I don't blame Go 
for looking so much like its predecessors. That's the cost of doing 
business. It's intended to be a general purpose language, after all. 
It does have a few unique features surfaced as language constructs, 
like intrinsic concurrency facilities, which it calls 
<i>gorountines</i>. </p> <p> I don't understand why they have built 
another virtual machine. If Go is going to innovate, it will be in its 
Virtual Machine. Why not the CLI, JVM, or LLVM? The language has 
strong support for interop - easily wrapping native code much like you 
might using C++. The .NET CLI supports this sort of thing, though. I 
understand the language needed to run on Unix (at the moment, you 
<i>can't</i> run it on Windows!), and perhaps Mono wasn't sufficiently 
advanced. Why not the JVM? Would building that kind of infrastructure 
be that hard? What about the LLVM? It seems well suited to working on 
Unix and to handling interop. Perhaps interop is not the only concern. 
The implementation of the <i>goroutines</i> seems to have been a 
priority. The language does not yet have assertions or exceptions 
specifically because doing so would be awkward with goroutines. This 
language, as Mr. Pike explained it, was created for Google to build 
servers. Cheap, and efficient threading was priority #1. This piques 
my curiosity. Why could the JVM - which hosts Scala and Clojure - not 
be used to build goroutines. Is there some fundamental flaw that makes 
 concurrency on the JVM a non starter? I don't understand. </p> <p> I 
would agree that the language is not particularly novel. What I don't 
understand is why the VM is novel. Clearly there are requirements I 
don't understand, and this is why I think Go will be worth paying 
attention to, in much the same way Erlang is. </P> <p> There is also 
something refreshing about a genuinely new language. New platform, new 
libraries, new syntax. Programs written in a language like that 
represent advances. Shortly after the debut of the language, a <a 
href="http://codingrobots.org/p/gotweet/doc/tip/www/index.wiki">command 
line Twitter client emerged</a>. The example is promising - by 
definition the implementation was from-scratch. It was quick, and the 
result is imminently readable. </p> <p> Perhaps I'm over thinking 
this. Perhaps the language will be successful <i>because</i> it's 
simple, and efficient. Perhaps the VM is some how unique and better 
served by a custom implementation. Only time will tell. </p>
</p>
  			<a href="jl/blogPost/the_last_2_crazy_months.html"><h1>The Last 2 Crazy Months</h1></a>
  			<p>12 November 2009</p>
  			<p>
<p>What a busy couple of months!   </p><p>I started last month (from 
October 2nd to the 11th) at the <a 
href="http://www.java2days.com">Java2Days</a> conference in Sofia, 
Bulgaria. I gave three talks on Spring and JSF, Spring and jBPM, and 
Spring Integration (the Spring ESB-like framework). I think the slides 
will be available there in shortly. Meanwhile, here are some photos of 
the event below, though you're encouraged to log in to Facebook and 
check out the full galleries <a 
href="http://www.facebook.com/pages/Sofia-Bulgaria/Java2Days/169979265960">there.</a></p> 
<table border="0" cellpadding="0" width="400"><tr><td><img width = 
"400"  src="media/17846" 
/></td></tr><tr><td><p><i style = "caption">The name of the gentleman 
on the far left escapes me, but that's John Lewis, Emo, and yours 
truly on the right </i></p> 
</td></tr><tr><td><img width ="400"  src 
="media/17845" 
/> 
</td></tr><tr><td><p><i style = "caption">From left to right: Ivo 
Penev, Gisele Consoline, Rob Harrop, yours truly, John Willis, and 
Heath Kesler </i></p> 
</td></tr></table><p> I had a great time at the conference.  The 
audience was great the discussions great, too. The drinking was good, 
too! :-) 
 </p><p> At some point, I got some sort of stomach bug (perhaps in 
Greece?) and when I returned home, I was severely dehyrdated. I spent 
a little time hooked up to an IV and then spent the subsequent week 
pounding antibiotics, gatorade, and soup. There's a   thousand ways to 
get sick, only one way to get better!  </p><p>After that, I got deep 
into the final edits for my book  "<a 
href="http://www.amazon.com/Spring-Enterprise-Recipes-Problem-Solution-Approach/dp/1430224975">Spring</a> 
<a href="http://www.apress.com/book/view/9781430224976">Enterprise</a> 
<a href="http://search.barnesandnoble.com/Spring-Enterprise-Recipes/Gary-Mak/e/9781430224976">Recipes</a>." 
Really enjoyed that process - it's fascinating to see what goes into 
writing a book. Trust me, the book is far better for the effort of the 
amazing editors at Apress! :-)  </p> <p> I spoke at the <a 
href="http://www.pasadenajug.org/2009/10/spring-in-fall.html">Pasadena 
Java User Group</a> on using Spring Integration - that crowd was very 
cool and the discussion that ensued was also good. </p><p>  Recently, 
my sister got hitched. I wish her, and her husband, many happy days 
together. </p><p> I think that wraps up the highlights. I'll start 
chiming in more frequently. A lot has happened of late, including the 
debut of Google's <a href="http://www.golang.org">Go programming 
language</a>, The <a 
href="http://www.motorola.com/Consumers/US-EN/Consumer-Product-and-Services/Mobile-Phones/Motorola-DROID-US-EN">Motorola 
Droid</a>, the continued standoff between Sun/Oracle and the European 
Union over objections to Oracle's accquisition of MySQL, and more. 
Exciting times... 
</p>
</p>
  			<a href="jl/blogPost/cruds_not_the_answer.html"><h1>CRUD&apos;s Not The Answer</h1></a>
  			<p>10 September 2009</p>
  			<p>
<p> I was really glad to see  <a 
href="http://www.udidahan.com/2009/09/01/dont-delete-just-dont/">Udi 
Dahan's, "Don't Delete. Just Don't."</a> I wholely agree with the main 
premise - that deletion is rarely, if ever, a valid business state and 
that care should be taken in dealing with it. He cites various 
examples, saying, "The real world doesn't cascade." His example is of 
a marketing department that deletes an item from the catalog. Should 
all orders containing that item then be unlinked? Should they redo the 
company's profit and loss statments? </p> <p> His example's a  perfect 
illustration of a valid case where care needs to be taken both in 
modeling the case and dealing with it in code. I fear a lot of people 
have gotten hooked on instant-models or CRUD "frameworks." The idea 
that you can annotate a few entity classes and suddenly you have a 
model and business logic all taken care. A lot of this became popular 
with Ruby on Rails and has only gotten worse in the JEE world. It's 
now common to expose <code>EntityManager</code>s to the web tier (both 
the Seam and Spring Web Flow examples, not to mentino the Open Session 
in View pattern itself, speak to this) and to let web frameworks 
handle the lifecycle of entities and  committing transactions on that 
EntityManager to persist those entities. We now think of record 
creation and managment as so mundane that we've automated it and 
surrounded it in scaffolding. </p> <p> Unfortuntately, this misses the 
true value. Objects in a system have state that has dependencies. Just 
because an entity has a (required) no-args constructor, it doesn't 
mean that you should not write a constructor with dependencies. A lot 
of this stems from the "active objects" or "naked objects" pattern, 
where objects are open books whose state can be mutated on the UI tier 
directly and those changes propagated directly. We tell ourselves that 
we can apply Hibernate validations (or validations in any other ORM 
framework) and that we'll guarantee valid business constraints thus, 
but it rarely works out that way. Prescribing the valid creation and 
destruction of an object is critical. </p> <p> The most insidious part 
of this abuse is that it  rarely ever occurs in the first iterations 
of a project, only in maintenance.  People "forget" how an object is 
created, or destroyed. They forget details. Consistancy with other 
parts of the system is forsaken because, after all, how much could 
there be to it? This happens more often than you'd expect: new people 
come on to the team and are assigned to rework an existing feature and 
screen in a system. Institutional knowledge is important but it's not 
always easily transferred, so safe-guards need to be taken. </p> <p> 
Plus, as business evolves, object creation is often only part and 
parcel with a larger process. If a new customer is added to a 
database, and nobody does anything with it, did it really get added? 
Put another way: if a new customer gets added to a database, there's 
an implied lifecycle that customer must follow. Perhaps a trial period 
window and then a follow up email? Perhaps a monthly subscriptio fee? 
Who knows, but the act of instantiating a <code>Customer</code> object 
and then issuing <code>entityManager.persist( customer ) </code> will 
rarely, if ever, be enough. </p> <p> Indeed, I've seen  many projects 
build their models using only a <code>GenericDao&lt;T&gt;</code> 
variant.  This is dangerous.  Transitions from one state to another 
for an entity can often cost money.  </p> <p>Do things the old 
fashioned way, building services that handle the business operations, 
not merely <b>C</b>reate, <b>R</b>ead,<b>U</b>pdate and <b>D</b>elete 
objects.  Using Dao's in a view tier is almost as ghastly a sin as 
making JDBC calls from the view, and encourages the same kind of 
copy-n-paste code reuse we prided ourselves on having moved away from. 
</p> <p> While the services approach isn't exactly code-generation 
friendly, it can pay off in the long run. As soon as you decide to use 
your services in a phsically separated tier, you'll be glad.  It's 
easier to build services that express every dependency as a method 
parameter. There are several reasons why this works out. While web 
service support is getting better, object marshalling is still the 
number one headache. Most toolkits make interoping with primitives a 
brease, though. It may seem like your losing ground by not taking 
advantage of the POJO you have floating around in the view tier, but 
in point of fact it's rarely that big a burden to unmarshal the 
relevant fields and use those instead. On the services side, reloading 
the relevant record is painless because the entity's usually cached 
and thus refetching it is cheap. </p> <p> Take for example the idea of 
a shopping cart which surfaces methods for adding line items to 
orders, orders to shopping carts and shopping carts to customers.  A 
clean version of this might look like: <pre><code> 
 public interface ShoppingCartService { 
     ShoppingCart createShoppingCartForCustomer( long customerId, 
                                                 Date 
whenShoppingSessionStarted ) ; 
     Order createOrderForShoppingCart( long shoppingCart ) ; 
     LineItem createLineItemForOrder( long orderId, long productId, 
int quantity) ; 
     void removeLineItemFromOrder( long orderId, long lineItem ) ; 
     void startOrderFulfillment( long orderId ) ; 
     /*  other methods for loading and removing the various 
         objects, as appropriate 
     */ 
  } 
</code></pre> </p> <p> In these methods, you can do sanity checks, 
care for business cases, handle the state of the various objects and 
not worry about having a transactional resource like an <code> 
EntityManager</code> or Hibernate Session open in the client thread. 
In this example, you might imagine the <code> Order</code> won't 
officially be fulfilled until it's paid for, at which point it'll move 
to the <code>PAID</code> state.  Simialarly, adding a 
<code>LineItem</code> might require a check to an inventory, 
decrementing how many of those <code>Product</code>s are in stock. The 
same is true of the inverse operation: 
<code>removeLineItemFromOrder</code> should appropriately restore the 
inventory count and update the <code>totalPrice</code> field on the 
<code>Order</code>.</p> This requires one interface method 
declaration's work more than if you had simply obtained the 
<code>EntityManager</code> from your Seam backing bean and executed 
the logic there, <i>except</i> now the logic's codified and reusable. 
</p>
</p>
  			<a href="jl/blogPost/setting_up_jbpm_4s_xsd_file_in_eclipse.html"><h1>Setting Up jBPM 4&apos;s XSD File In Eclipse</h1></a>
  			<p>03 September 2009</p>
  			<p>
<P> I've recently been playing with jBPM 4.1 and, while I haven't 
quite gotten into it, I did manage to break an Eclipse setup of my 
"old" jBPM 4.0 code. This is definitely a user error. So, trying to 
ensure I have a reproduciable baseline,  I start setting everything up 
again (I don't have the jBPM plugins or anything installed -- I keep 
it mean and lean, if possible. ) </p> <p> I got  to the point where 
everything was running fine again from the IDE, but I noticed I no 
longer had code   completion for my jBPM <code>.XSD</code> file. I'm 
not sure if I ever did, or if I did, then I've forgotten how. So, I 
stumbled through getting it working with the Eclipse Resource Catalog. 
Here are the steps to reproducing it if you have the same issue. </p> 
 <ol> <lI>  You'll need a copy of the <code>.XSD</code> itself. For 
me, the simplest option was to just download the source 
<code>jar</code> and use the <code>XSD</code> file therein. 
<code><pre>mkdir ~/xsds; cd ~/xsds ; 
wget http://repository.jboss.com/maven2/org/jbpm/jbpm4/jbpm-api/4.0/jbpm-api-4.0-sources.jar 
; 
jar xvf jbpm-api-4.0-sources.jar ; 
</pre></code> </li> <li> In Eclipse, go to Window > Preferences 
</li><li>Search for "XML Catalog," under the "XML" node.    </li> <li> 
Click "Add..." </li> <li> <li> Fill out the dialog, using the values 
below. <br/> <img src = 
"media/17857" 
/> </li> </ol> <p> I hope this spares somebody some pain. Once you've 
got it working, go check out the awesome <a 
href="http://jboss.org/jbossjbpm/">new jBPM 4.1</a>! </p>
</p>
  			<a href="jl/blogPost/my_christmas_wish_or_how_the_jvm_will_outlive_the_cockroach_and_net.html"><h1>My Christmas Wish, OR How the JVM Will Outlive the  Cockroach, and .NET</h1></a>
  			<p>29 August 2009</p>
  			<p>
<p> It started with a Tweet from <a 
href="http://twitter.com/migueldeicaza/status/3627322220">Miguel De 
Icaza</a>. Miguel's the leader of the Mono project, whose goal's to 
bring .NET to Linux. He's also the former leader of the Gnome project. 
Generally, he's whip smart and not usually prone to flame baits. So, I 
tend to read his words carefully, as it usually pays off. He said: 
<cite>"I wish Java tried to compete with .NET, but they seemed to have 
given up a long time ago: <a 
href="http://tinyurl.com/mfxmqm">http://tinyurl.com/mfxmqm</a>"</cite> 
</p> <p>At this point I wanted to write him a terse letter stating 
my point of view, stating how he had clearly missed the obvious. I 
resisted,  cried a little, sat on the beach with 
candles, attended a book club meeting, found Jesus, and then came back 
and reconciled that I was just sad because he was right. He was also 
pointing out the obvious. (There, at least I can say that! <span style 
= "font-size:smaller">in the anonymity of my blog, <span style = 
"font-size:smaller;">far, far away from where he might see 
it...</span></span>) </p><p> The link points to integrations in <a 
href="http://openjdk.java.net/projects/coin/">Project Coin,</a> a 
project that's taken the JDK and aggressivey evolved the language 
to try certain features out in an isolated fork. In general, I'm 
supportive of the movement, but it's a sad truth that any final 
edition of JDK 7 is already late, and will likely not incorporate many 
of those integrations in Project Coin, or even many of the originally 
announced - big ticket changes coming straight from Sun. JDK7 is the 
Windows Vista/<i>Longhorn</i> of the JDKs.</p><p> You remember 
Longhorn, right? It was the code name for Windows Vista for a few 
years. If I recall, there was talk of integrating 4 pillars or waves 
of technology into the then-hyped next generation of Windows, 
including <i>WinFS</i> (Am I wrong in thinking that it was called 
something else, then? Avalon? Or am I thinking of the now-defunct Java 
DI container?) <i>Indigo</i>, and a slew of others. As the roadmap 
slipped further and further, more things were dropped. In fairness, in 
2009, some of those pillars have subsequently shipped, sort of, as 
parts of .NET 3.0-3.5x. Some are lost to the annals of history. </p> 
<p>With a heavy heart I proceeded to code, ignoring what he said. I'm 
tougher than that. I can handle having the rug yanked out from under 
me. "Why would he say that about my precious Java??" I thought, typing 
as I thought it. "I wish I could come up with something to refute his 
claims!", I moaned. Something elegant, quick, crazy fast, and future 
proof. Something's got the best of C#, F#, Python, JavaScript and 
more. I tend to ignore skills I've built up over years of use and 
revert to primitive, conveniently blog-friendly samples from tutorials 
when I'm stressed (don't you?). And <i>boy</i> was I stressed! I 
looked at my screen. I was really in a tizzy at this point, 
thrashing away at the keyboard! (Like in those movies where they 
feature somebody running their hands along the home row and suddenly 
they've infiltrated the FBI's secret-most files.) </p><p>Here's what I 
had typed: </p><pre><code>object Maps { 
 val colors = Map("red" -> 0xFF0000, 
 "turquoise" -> 0x00FFFF, 
 "black" -> 0x000000, 
 "orange" -> 0xFF8040, 
 "brown" -> 0x804000) 
 def main(args: Array[String]) { 
 for (name <- args) println( 
 colors.get(name) match { 
 case Some(code) => 
 name + " has code: " + code 
 case None => 
 "Unknown color: " + name 
 } 
 ) 
 } 
} 
</code></pre><p> It was a Christmas miracle! A language on the JVM 
that already had most of the proposed changes in Project Coin and 
great deal otherwise <i>and</i> was very fast <i>and</i> that worked 
on all platforms, <strike>just like Mono!</strike> Errr... that is, 
just like Java! </p> <p>This language, <a 
href="http://www.scala-lang.org/">Scala,</a> has gained a great deal 
of traction in the Java community and even people you'd expect to 
offer otherwise have endorsed it. People like James Strachan, creator 
of Groovy, and James Gosling, creator of Java. </p> <p>I just hope 
that other people can find out about this wonderful language. Why, 
wouldn't it be nice if -for Java 8 (will we ever get to have a Java X? 
How cool would that be??) - we just shipped Scala? </p> 
<p>And that, boys and girls, is how Java outlived the cockroach, in 
our hearts.</p> <P><i>The End!</i></p>
</p>
  			<a href="jl/blogPost/a_survival_guide_to_maven_or_why_mavens_still_cool.html"><h1>A Survival Guide to Maven, OR, Why Maven&apos;s Still Cool</h1></a>
  			<p>27 August 2009</p>
  			<p>
<h2>The Problem: Confusion</h2> <P> I've had a lot of small 
discussions recently with people where they were just absolutely not 
interested in using Maven. Has it somehow gotten a bad reputation when 
I wasn't looking? Am I missing something? When did I suddenly become 
the guy using a tool that was too slow, or not agile enough for 
everybody? I can still sing and dance and jump like you guys, too! 
Even if I do use Maven... </P><P>So, let old Josh tell you a little 
bit about Maven. Maybe we're not all talking about the same thing. 
Consider this a survival guide to Maven. </P><P> Maven, like this 
guide, assumes you're trying to solve the 80% cases effectively. 
Already, we have a point of confusion! </P><P> I'm pretty confident 
that your first thoughts on that last sentence were to what Maven 
considers "80%," and you're probably wondering what you might 
reasonably call Ant's "80%" cases. I would argue that Maven's "80%" 
is 80% of a much, much bigger pie. </P><P> I haven't met an Ant build 
yet that couldn't be cut down in complexity by using Maven. Sure, 
sometimes the resulting Maven <code>pom.xml</code> was more verbose 
(though, that doesn't happen all that often in practice, either), but 
that's not the same as complexity. Intrinsic complexity is one thing. 
Surface complexity is another. I define intrinsic complexity as the 
concepts required to effectively deal with a problem in a problem 
space. I define apparent complexity as the busy work a process 
presents you with to obtain a goal. </P><P> I'm pretty convinced Ant 
suffers from both of those kinds of complexities. I wasn't going to 
start any bar fights about it, but I was pretty sure. Then, Ruby On 
Rails debuted and made code generation popular again. It brought 
"convention over configuration" to the mainstream. Then, I knew I was 
on to something with Maven. </P><P> I might argue that when you 
download Ant and decide to keep it in your tool chain, you think of it 
as providing a solution, assuming you've configured it, to: 
</P><OL><LI> compiling Java source files into classes </LI><LI> 
copying resources to the right place, such as .XML files, .properties 
files, etc. </LI><LI> generating .jar or .war artifacts from the 
aforementioned classes. </LI><LI> generating JavaDocs. I'm adding this 
one as a "maybe." Does anybody still do this and actually keep 
JavaDocs floating around? Is the Eclipse or IntelliJ support for 
rendering in-popup the contents of the JavaDoc not enough? </LI></OL> 
<P>The enlightened Ant user will also, maybe, add dependency 
management with Ivy to Ant's 80% cases. I mention this to be fair, 
though I highly doubt it's that common. I suspect that a lot of Ant 
users  would still relegate that to the fringe 20% cases. </P> <p> 
Alright, so we have our 80%. Most people have a sample ant build.xml 
that they've lugged around and, when it's time to seed a new project, 
they plop it into place and it's got some variables that need to be 
replaced and then it does most of the things above. Except JavaDocs 
and Ivy. I'd be surprised, anyway. </p><p> Maven's got all of those 
features - right out of the box - in 5 lines of XML and a standard 
directory structure. This is where it stops being a fair fight. 
   No matter how much you tug or pull against that list above, chances 
are you're <i>at least</i> going to use Ant to compile. No way around 
it. Even the simplest Ant configuration requires more exertion to 
acheive that than Maven does. This point, and this point alone, is why 
I'm just not convinced people are taking a look at this and 
understanding it. If the goal is simplicity, then there's nothing 
simpler than <i>nothing</i>.  If you've had to put even a moment's 
care into that list above, than you've already wasted time and could 
have been using Maven. 
</p> <p> Now that I've gotten the soap-box speech out of the way, 
read on to understand a little bit about it, including how to set it 
up to do all the things in that list (and hundreds of other things) 
with a few directories and a 5-6 line XML file (the 5-6 lines comes 
from my formatting. It could easily be 3 lines of XML, if we're 
honest. </p><h2>Things To Know</h2> <p> <b> Where Can I get Maven? 
</b> Maven is freely available, just like Ant, <a 
href="http://maven.apache.org/">from Apache</a>. Alternatively, many 
distributions have it in their repositories. For Ubuntu, it's 
<pre><code>sudo apt-get install maven2</code></pre> This version, as 
with all repository packages, is slightly out of date. But, at least 
you're off and running.</p> 
<p> <b> How Do I Install Maven?</b> The simplest way is, like Ant, to 
unzip it, and add the <code>bin</code> folder of the directory to your 
system's <code>PATH</code> variable. Alternatively, skip to the next 
question and simply use your operating system's repository to install 
it, if possible. </p> 
<p> <b> How Do I Build a Maven Project</b> Building a Maven project 
is easy, as the command never changes. <pre><code>mvn 
install</code></pre> 
This is true whether it's your project or somebody elses. It's 
predictable, and consistant. 
To use it, ascend to the highest directory in the directory tree that 
contains a <code>pom.xml</code> file. That's usually the parent 
project. Usually, Maven projects cascade downwards, so you might try 
issuing:<pre><code>mvn install</code></pre> This will generate a 
<code>target</code> directory in each project (if there are any). 
Inspect the <code>target</code> directory for your <code>.jar</code> 
or <code>.war</code>, or whatever you're expecting. 
If for some reason there's no <code>target</code> directory in the 
directory that contains the source code you're trying to build, 
descend into it to the point where you're adjacent to the 
<code>pom.xml</code>. Then, issue again: <pre><code>mvn 
install</code></pre> 
</p> 
<p><b>How Do I Bootstrap a New Maven Project </b> The simplest setup 
requires the creation of directories as well as one XML file. But, 
you'd likely create these directories and at least one XML file with 
Ant, too. 
</p><p>Run the following on the command line. NB: I haven't translated 
for Windows. I'm sure it's easy enough, there, too. 
<PRE><code>mkdir -p 
<b>myproject</b>/src/{main,test}/{java,resources}</code></PRE> 
You can change <b>myproject</b> to whatever you want. 
This will create a directory structure like the following: 
<PRE><CODE>jlong@studio:~/Desktop/myproject$ find . 
. 
./src 
./src/main 
./src/main/resources 
./src/main/java 
./src/test 
./src/test/resources 
./src/test/java 
</CODE></PRE> 
If you're just getting started and aren't test-driven, then you can 
ignore <code>src/test/*</code>. 
That leaves you with <code>src/main/{resources,java}</code>. 
Java code goes in <code>src/main/java</code>. Things you'd like on the 
classpath of the same artifact, such as Spring application contexts, 
go in <code>src/main/resources.</code> 
</p> 
<p> Finally, you're going to need an XML POM file. POM standards for 
"Project Object Model," I think. 
It's the sole center for configuration related to your project. No 
need to do includes, or externalized configuration or anything. 
The simplest <code>pom.xml</code> looks like: 
<pre><code>&lt;project xmlns="http://maven.apache.org/POM/4.0.0" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
http://maven.apache.org/maven-v4_0_0.xsd"&gt; 
 &lt;modelVersion>4.0.0&lt;/modelVersion&gt; 
 &lt;groupId>com.yourproject.crm&lt;/groupId&gt; 
 &lt;artifactId>utilities&lt;/artifactId&gt; 
 &lt;version>1.0-SNAPSHOT&lt;/version&gt; 
&lt;/project&gt; 
</code></pre>You can copy and paste that into a file called 
<code>pom.xml</code>, at the root of the <code>myproject</code> folder 
created above. You're done. 
</p><p>From here, so long as you're just planning on using the JDK, 
etc, then this will work fine.  </p> 
<p><b>What do those directories and 5 lines of XML buy me?</b> 
Think of that as being equivalent to hundreds of Ant targets. The 
project already has enough information to, among other things: 
<ol><li>Generate javadocs: <code>mvn javadoc:javadoc</code></li> 
<li>Compile classes: <code>mvn compile </code></li> 
<li>Compile and generate an artifact (a <code>.jar</code>, in this 
case): <code>mvn install </code></li> 
<li>Generate a Checkstyle report: <code>mvn 
checkstyle:checkstyle</code></li> 
<li>Or, in the alternative (and perhaps a complement): generate a PMD 
report: <code>mvn pmd:pmd</code></li> 
<li>Build a web site with documentation on the structure of the 
project (anemic thing that it is): <code>mvn site</code></li> 
<li>Build a cross reference of the project's sources: <code>mvn 
jxr:jxr</code> </li> 
<li>Setup project files for your favorite IDEs: <code>mvn 
eclipse:eclipse</code>, or <code>mvn idea:idea</code> (<b>NB:</b> if 
you're using <a href="http://www.intellij.com/">IntelliJ IDEA</a> 7 or 
later, or <a href="http://m2eclipse.sonatype.org/">Eclipse with the 
fabulous m2Eclipse plugin</a>, then you don't need these plugins. You 
can simply 'open' the project as you would any project by importing or 
opening the <code>pom.xml</code>. <a 
href="http://www.netbeans.org/">Netbeans</a> also has incredible 
support for opening Maven projects directly. </li> </ol> 
</p><p> <b>How Do I Add JARs to the ClassPath? </b> Short answer: you 
don't. You let Maven handle it for you. 
If you need a <code>.jar</code>, more than likely, it's already 
available in some repository, in the same way that a package might be 
provisioned by an operating system (such as Windows Update on Windows, 
<code>apt</code> on Debian distributions, <code>rpm</code> on RedHat 
distributions, <code>port</code> on OSX, etc..). For Maven, using a 
depdendency is as simple as identifying it and adding the metadata to 
the <code>pom.xml</code>. </p><p> There are many ways to "find" a 
<code>.jar</code>. The simplest is to start browsing <a 
href="http://mirrors.ibiblio.org/pub/mirrors/maven2/">a central 
repository</a> and opening the <code>pom.xml</code> files. To add a 
dependency, you need it's <code>&lt;artifactId&gt;</code>, its 
<code>&lt;version&gt;</code>, and its <code>&lt;groupId&gt;</code>. 
These elements are usually at the top of all <code>pom.xml</code>s. To 
add a dependency on the <a 
href="http://commons.apache.org/lang/">Apache Commons Lang</a> library 
to our project above, add the following lines to your 
<code>pom.xml</code>, right before the closing &lt;project&gt; 
element: 
<pre><code>&lt;dependencies&gt; &lt;!-- plenty of room to add 
dependencies --&gt;&lt;/dependencies&gt;</code></pre> 
Inside the <code>dependencies</code> section, you will add all your 
dependency information. The information you enter could be that for a 
third party <code>.jar</code>, or a <code>.jar</code> in your own 
project. Perhaps one team's project depends on another's. If Maven 
can't find the cached version of the <code>.jar</code>, it'll download 
it for you. 
<pre><code> &lt;dependency&gt;&lt;groupId&gt;<b>commons-lang</b>&lt;/groupId&gt;&lt;artifactId&gt;<b>commons-lang</b>&lt;/artifactId&gt;&lt;version&gt;<b>2.4</b>&lt;/version&gt;&lt;/dependency&gt; 
</code></pre> 
</p> <p> To test, simply rebuild it as before: <code>mvn 
install</code>. Most of the IDE integrations will have suport for 
updating the project configuration in the IDE (i.e., the classpath) 
according to what's in Maven's configuration. If you'd rather not 
spelunk through the <code>ibiblio</code> repository site, you can 
always use one of the many Maven repository indexes. A good one is <a 
href="http://search.mvnsearch.org">Maven Search</a>. Type in a 
fragment of what you're looking for and it'll provide you with 
matches. Thus: I entered "commons-lang" and it found <a 
href="http://search.mvnsearch.org/query.action?cat=jar&q=commons-lang">results</a>. 
Additionally, most of the IDE's will have support for some form of 
repository browsing.</p> 
<p><b>I'm Test Driven!</b> 
This one's easy. If you <i>do</i> want to use JUnit (or TestNG), then 
fret not - that's Maven's default M.O.! By default, any JUnit classes 
put into the <code>src/test/java</code> folder will be compiled and 
run before proceeding with the build. 
</p><h2> The Tour's Over, What Did You Think?</h2><p> In this guide, 
I've given a walk through to the questions I can imagine thinking 
about when setting up a project with Ant. The result is that you can 
get a LONG ways with nothing (the minimal <code>pom.xml</code>). 
</p><p> The balance of a given effort is the 20% stuff. As they say, 
the 20% cases can take 80% of the time. I can't speak to whether this 
is true or not as Maven's never delayed me, for any particular length, 
except when I was pushing it to do stuff that nothing else, including 
Ant, could have done. 
Even so, if you hit the 20% cases, you can rest easy in the knowledge 
that Maven is built to be flexible and extendable. It's whole model is 
exposed as a lifecycle. If you want to inject custom logic at a custom 
point, doing so is easy. It's also insanely interoperable. In fact, 
even if you don't want to use Maven but wan't to get a very high 
quality build script, setup the project using Maven and then use 
<code>mvn ant:ant</code>. It'll generate an ant script that'll handle 
most things you'd want to do. Finally, if you decide you absolutely 
can't live without, or translate effectively, an Ant script, there's 
good support for running Ant scriptlets inside of Maven. 
</p><p> Go ahead and give it a try if you haven't tried it before or 
if you were put off. It's truly powerful. The most visible testament 
to this are the ideas (like Ivy) that are inspired by it in Ant. 
</p>
</p>
  			<a href="jl/blogPost/building_servlets_with_spring.html"><h1>Building Servlets With Spring</h1></a>
  			<p>24 August 2009</p>
  			<p>
<h2>The Problem</h2> <p> <a 
href="http://www.joshlong.com/jl/blogPost/quick_update_to_rss.html">Earlier</a>, 
I wrote about having to build a solution using servlets to write out 
the contents of the RSS feed for my blog. I am using JSF on this site. 
There are solutions - like Pretty Faces - that work and provide a 
lot of flexibility for mouting JSF logic at a given URL. So, 
initially, my RSS and Atom feeds were being handled by a backing bean 
in JSF. Being JSF, this necessitated the need for a session cookie 
(even though, clearly, the RSS / Atom feeds are stateless.) </p> <p> 
The cookie wouldn't have been so bad, except that - I think as a 
consequence - RSS readers consuming the blog were being constantly 
refreshed for the entire contents of the feed, because to them the 
resultant blog requested was "different" than the previous version. 
</p> <h2>The Solution </h2> <p>So, I planned to write a servlet that 
handled the requests and I expose that in my JSF application.  This 
would be a clear differentiator between the new Spring + JSF version 
of the software running my blog and the old Spring MVC version: it's 
uselessly difficult to support stateless endpoints with JSF, where as 
it's as natural a goal as anything in Spring MVC. </p><p> Using a 
servlet meant I'd lose two advantages I'd had in the JSF application 
with Pretty Faces: bookmarkable URLs, and the convenient programming 
environment that Spring Faces afforded me, namely, configuration, 
dependency injection, etc. </p> <h2>Refinements</h2> <p> I decided to 
use <a href="http://tuckey.org/urlrewrite/">URLRewrite</a> to solve 
the boomkarkable URLs (yes, that means this site is hosting not one, 
but <i>two</i> solutions for bookmarkable URLs in the same 
<code>.war</code>!) and Spring's under appreciated 
<code>HttpRequestHandler</code>. </p> <p> 
<code>HttpRequestHandler</code> is an interface that, when 
implemented, becomes serviceable by a Spring framework servlet. The 
interface looks like: 
<pre><code> 
package org.springframework.web; 
<br/> 
public interface HttpRequestHandler {<br/> 
   void handleRequest(HttpServletRequest request, 
HttpServletResponse response)            throws 
ServletException, IOException;<br/> 
} 
</code></pre></p><p>You then configure a Spring framework class 
(<code>org.springframework.web.context.support.HttpRequestHandlerServlet</code>) 
in your web.xml and name the servlet  the same as the bean that 
implements the <code>HttpRequestHandler</code> interface is named in 
your Spring application context. By virtue of the fact that your 
<code>HttpRequestHandler</code> bean is a Spring component, you get 
all the advantages of using Spring or Spring MVC, without having to 
load an entire framework. 
</p><p> For my code, the implementation looks something like the following: 
<PRE><CODE>package com.joshlong.blawg.site.view.servlets; 
<br/> 
import java.io.IOException; 
import java.util.ArrayList; 
import java.util.Collection; 
import java.util.List; 
<br/> 
import javax.servlet.ServletException; 
import javax.servlet.http.HttpServletRequest; 
import javax.servlet.http.HttpServletResponse; 
<br/> 
import org.apache.commons.lang.StringUtils; 
import org.apache.commons.lang.exception.ExceptionUtils; 
<br/> 
import org.springframework.beans.factory.annotation.Autowired; 
import org.springframework.stereotype.Component; 
import org.springframework.web.HttpRequestHandler; 
<br/> 
import com.joshlong.blawg.BlogService; 
import com.joshlong.blawg.model.Blog; 
import com.joshlong.blawg.site.view.util.RssFeedCreationUtils; 
import com.joshlong.blawg.utils.LoggingUtils; 
<br/> 
import com.sun.syndication.feed.synd.SyndEntry; 
import com.sun.syndication.feed.synd.SyndFeed; 
import com.sun.syndication.io.SyndFeedOutput; 
<br/> 
@Component("feed") 
public class BlogFeedServlet implements HttpRequestHandler { 
   static private String FEED_TYPE_VARIABLE = "feedType"; 
   static private int START_FEED = 0, STOP_FEED = 500; 
<br/> 
   @Autowired 
   private RssFeedCreationUtils rssFeedCreationUtils; 
<br/> 
   @Autowired 
   private BlogService blogService; 
<br/> 
   @Autowired 
   private LoggingUtils loggingUtils; 
<br/> 
   private SyndFeed buildEntryList(HttpServletRequest req, 
HttpServletResponse res, String type, int start, int length) { 
       SyndFeed feed = ... // build up the SyndFeed however you want 
       return feed; 
   } 
<br/> 
   private void showAllAtomBlogs(HttpServletRequest request, 
HttpServletResponse response) throws Throwable { 
       SyndFeed feed = buildEntryList(request, response, "atom_0.3", 
START_FEED, STOP_FEED); 
       response.setContentType("text/xml"); 
       SyndFeedOutput syndFeedOutput = new SyndFeedOutput(); 
       syndFeedOutput.output(feed, response.getWriter()); 
   } 
<br/> 
   private void showAllRssBlogs(HttpServletRequest request, 
HttpServletResponse response) throws Throwable { 
       SyndFeed feed = buildEntryList(request, response, "rss_2.0", 
START_FEED, STOP_FEED); 
       response.setContentType("text/xml"); 
       SyndFeedOutput syndFeedOutput = new SyndFeedOutput(); 
       syndFeedOutput.output(feed, response.getWriter()); 
   }<br/> 
   public void handleRequest(HttpServletRequest request, 
HttpServletResponse response) throws ServletException, IOException { 
       try { 
           String feedType = 
StringUtils.defaultString(request.getParameter(FEED_TYPE_VARIABLE)); 
           if (StringUtils.isEmpty(feedType)) 
               feedType = "rss"; 
           if (feedType.equalsIgnoreCase("rss")) 
               showAllRssBlogs(request, response); 
           else 
               showAllAtomBlogs(request, response); 
       } catch (Throwable th) { 
           loggingUtils.log(ExceptionUtils.getFullStackTrace(th)); 
       } 
   } 
} 
</CODE></PRE> 
</p> 
<p> Thus, it's simpler than a standard Spring MVC controller or a 
struts controller (though admittedly lacking a lot of the frills - 
this happens to be a simple use case.</p> <p> I then configured the 
web.xml for all of this: <code><pre> 
   &lt;servlet&gt; 
       &lt;servlet-name&gt;feed&lt;/servlet-name&gt; 
       <b>&lt;servlet-class&gt;org.springframework.web.context.support.HttpRequestHandlerServlet&lt;/servlet-class&gt;</b> 
   &lt;/servlet&gt;<br/> 
   &lt;servlet-mapping&gt; 
       &lt;servlet-name&gt;feed&lt;/servlet-name&gt; 
       &lt;url-pattern&gt;/urlPatternForFeedServlet&lt;/url-pattern&gt; 
   &lt;/servlet-mapping&gt; 
</pre></code> 
</p> 
<p>Note that we've used the name fo the bean (configured using bean 
classpath scanning, so the name is in the <code>@Component</code> 
stereotype at the top of the class - <code>"feed"</code>.) for the 
servlet name. Sure, it smells a bit like engineered coincadence, but 
it works well. </p> <p>From here, all that remained was configuring a 
URLRewrite rule to map the servlet to the endpoints visible on the 
site right now (<code>"/jl/entries/blog.atom"</code>, and 
<code>"/jl/entries/blog.rss"</code>)</p><p> Hope this helps 
somebody... </p>
</p>
  			<a href="jl/blogPost/quick_update_to_rss.html"><h1>Quick Update to RSS</h1></a>
  			<p>22 August 2009</p>
  			<p>
<p> I just published a change to the code that should hopefully
prevent readers (like <a href="http://www.google.com/reader">Google
Reader</a>) from constantly requeuing all my old blog entries as
"unread." �I don't know if it'll work (I've never had to debug this
particular web client!), but we'll see. </p><p>I suspect the issue is
something like the following: the spider hits the page which in turn
causes it to get a cookie from Java Server Faces, which makes the blog
feed look "new." I've checked the last modified dates and so on using
<a href="http://livehttpheaders.mozdev.org/">Http Live Headers</a> and
the Last-Modified dates and everything look alright. Anyway, I'll post
back with results once they manifest (or, hopefully, don't manifest!)
</p> <p>Succinctly, the change involved creating a servlet (sort of)
and using that to write/render (I wanted to say "feed") the feed.</p>
</p>
  			<a href="jl/blogPost/component_oriented_architectures.html"><h1>Component Oriented Architectures</h1></a>
  			<p>20 August 2009</p>
  			<p>
 <p>Warning, this blog entry is as much a rant as a blog, and tends on
the somewhat lengthy side. You've been warned. I'm looking for the
secret of life, as always, and failing it, I'll settle for the secrets
of software. This is a blog I don't know how to write, but have wanted
to, for a long time. I suspect getting it out on paper will let me
revisit with more clarity later. </p> <p> Prompted by <a
href="http://twitter.com/bsbodden">Brian Sam-Bodden's</a> musing on
the subject a week or so ago on Twitter, I've been ruminating on the
notion of a "component."   I think that the evolutions of modern day
software development are embodied in the notion of a component, not a
"service," or a "bean," or anything else. Those words don't convey
enough. </p><p> Thinking about it, a "component" can be broadly
defined as a thing which integrates readily into a bigger thing  -
that is, it's adapted to the thing that uses it, and any other such
thing could be made to follow suit, with the same adaptations. The
container is composed of components. </p><p> Getting more specific, we
think about a component in <i>software</i> as a thing that is
integrated into a <i>container</i> and that can only  function as a
subordinate entity to the container. In practice, this vague
description manifests itself as class that implements an well-known
interface. Sometimes, being a component means is simply a matter of
letting the container control when the component starts working and
when it is stopped. Here, you might not even need to implement an
interface since object creation and destruction or (<i>typically!</i>)
built into the language itself, and thus there's no need to codify it
further. </p><p> This ends up quite often being too much of an
abstraction. Something that is everything is also nothing. So, again,
in practice it's a matter of establishing a common interface. In
recent years, the "interface" for a component has evolved beyond the
literal notion of a language interface and can be any number of things
now. After all, all the interface does is distinguish an object as
being a <i>component</i> in a sea of non-components. Such a
distinction can otherwise be made, as with annotations or attributes
in the Java and .NET platforms, respectively.  </p><p> So, a component
is something that belongs to a container and that so marks itself as
usable in that container with an interface or some other
distinguishing feature. </p><p> Now, when the component is deployed,
it sustains some sort of behavior, perhaps over a period of time.
There is often a setup phase and a destruction phase.  This implies a
lifecycle, to setup state to begin servicing requests and to stop
servicing requests. This lifecycle might provide hooks tot he
component unique the containing environment. </p><p> Because the
component exists inside of a container, collisions are apt to occur.
Language features like assemblies or packages help isolate a
component, but often the container will provide addressing to further
isolate a component from its siblings. </p><p> At this point, I think,
the nuances are what qualify the application of a component. If we
agree on the previous points applying to most components, then surely
we agree that following aspects apply only to some components. The
specification is where the term component is starts being prefixed,
i.e., "web component," "service component," etc. </p><p> Analyzing
these definitions, a HUGE number of things could be consider a
component. </p> <ol> </li><li> the now-defunct Avalon framework had
"components" </li><li> Spring has a @Component stereotype that marks
beans as "components" </li><li> JCDI  - the pending DI component model
in JEE6 describes "components" </li><li> Indeed, EJB's original
documentation spoke of EJB "beans," which you might argue was Sun's
jargon for "component." </li><li> The web frameworks Tapestry, Wicket,
Echo, etc, provide components for the user.  </li><li> The Java UI
model, Swing, provides components </li><li> The J2ME and Android
mobile phone platforms provide "components" </li> </ol> <p> The list
goes on and on, but you can see plainly that the idea of a "component"
is not new. A component by any other name... </p><p> These various
notions of a component - though not all of them - share several more
concepts which we might describe as key to any description of a
component. </p><p> Most of them provide some way to export state. In
Tapestry, Seam and JCDI, you can "outject" values, effectively binding
an internal value to a client's state, so that the internal state is
reflected in the external variable when state inside the component
changes. This is often called just "binding," and is -usually -an
abbreviated way of responding to some event and then synchronizing
client state with the state of the component manually. JavaBeans
themselves, a core tenant of the Java platform, provides this notion
of properties, which are nothing more than accessor/mutator pairs by
which state may be shared in a generic fashion. The Dojo JavaScript
framework, Wicket, Echo, and Spring, ASP.NET, and Swing all provide
support for broadcasting state changes as events. This tends to be
very effective as it decouples the listeners from the component
itself. </p><p> In this discussion I've lumped both events and
properties as goals by which to achieve the same thing, and though
these concepts are not present everywhere, they're key for good
components in this author's experience. </p><p> In this respect,
Delphi, C# and Scala and other languages that embrace these concepts
and codify events and properties have the edge. Software development
can't be about  being able to bundle state and functionality, it has
to be about components that play nicely with each other, not in a box
but in an ocean. Promoting the ideas behind a component promotes
decoupled, and well behaved, software. </p><p> Indeed, the trends in
software development themselves beg for components. Grids, with many
concurrences and actors at play, are very well suited to components
-services exposed behind a publish/subscribe mechanism. Services so
exposed publish functionality that other actors in the system can
consume if they can address them. This sort of dynamism is already
alive and well in things like Jini or GridGain. The components
themselves comply with a life-cycle for their respective containers.
</p> <p> The very idea of a component - things out of which something
bigger is composed - implies composition. The biggest thing to come
out of SOA is the push towards service reuse and composition, which
components encourage.  </p> <p> Clearly, I'm thinking this through as
I write it, and so any input's appreciated (good, bad, or
indifferent.) </p><p> The addressability part is key. Brian mentions
the notion of a REST-ful component. In the specific, he was talking
about a component on a page amight be addressable, but the question is
equally well put to how to expose distributed components uniformally.
</p> <p> Is there an ideal way to build components and to model these
concepts  - what's the next generation of software going to bring us?
Clearly, functional languages are here to stay, but they don't
preclude the idea of a component, in fact I imagine it might work for
it.  </p> <p> What do you think? What's the most succinct way to model
software? Is your architecture composed of objects and services? Of
global variables and functions? Or of components? What will the
architectures of tomorrow look like?</p>
</p>
  			<a href="jl/blogPost/ooops.html"><h1>Ooops!</h1></a>
  			<p>17 August 2009</p>
  			<p>
<p>Today started off nice enough...
I went to <a href="http://www.malibuseafood.com/">Malibu Seafood</a>
today and enjoyed a lovely day on the beach and came back to check my
blogs and, <b>blam!</b> mistake-in-the-face! </p>

<p>In my last blog I discussed that I'd updated the software powering
this blog, and that there might be some bugs to work out. </p><p>Boy,
am was I on the money on that one! Turns out, I updated the logic used
to implement my RSS feed and Atom feed (eh, mainly, the switch - I'm
embarrassed to admit - was to actually use the token that ROME expects
to generate an Atom feed instead of the RSS 2.0 type of feed.)
Bluntly: if you subscribed to my Atom feed, you only got an RSS feed,
because I fat fingered the <code>'feedType'</code> parameter on that
one!
</p>
<p> Apologies to all those were spammed this morning with 'duplicate'
(essentially) blog entries! Everything except this and the one before
it are old and can be marked as read... thanks. </p>
</p>
  			<a href="jl/blogPost/youre_looking_at_a_work_in_progress.html"><h1>You&apos;re looking at a work in progress..</h1></a>
  			<p>16 August 2009</p>
  			<p>
<h2>Man at work</h2>
 <p> You're looking at a work in progress. </p>
 <p> The software that runs this site - joshlong.com - is home-brew. I
built it myself, not because I feel like I'm going to do an inherently
better job than any of the numerous pre-built options - furthest thing
from it, actually.
</p><p>
 I built it myself to be able to eat my own dog food. If I had to
learn at the same pace I take on a new job and get exposed to a new
skill set by force, I'd know much less. Practice is the only thing
that can be usefully attributed to improved skills.
The previous version of this site was written in Spring MVC so I could
refine my understanding of the @MVC model and truly get a feeling for
how it works (very nicely, I should add).
I've long been a fan of Tapestry and have built numerous sites with
it. I figured, with all the new work going on in the JSF world that it
was time for me to refresh myself on that platform, especially as JSF
2.0 creeps ever closer.
 </p>
<p> JSF has seen major "upgrades" (in lieu of <i>actual</i> upgrades
from the specification) from JBoss, with Seam, and with the Spring
Faces support from SpringSource. Additionally, RichFaces and numerous
other projects have evolved their component frameworks so much that
result is rarely portable, but usually very nice. In effect these
component libraries are their own sort of framework and often carry
their own specialized support for core framework concepts like
component development, JavaScript, rendering (i.e., view templates),
Ajax and internationalization. These frameworks can make JSF very
pleasant.</p>

<p>Except... when it isn't. It turns out that JSF's many weaknesses  -
while in some places well addressed by some of these 3rd party
solutions - are not completely surmountable, and in some cases you're
forced to simply "grin and bear it."
 This includes things like statelessness (you'll be greeted with a
<code>JESSIONID</code> on your first request, for example), binary
responses, and SEO-friendly URLs. I've talked about solutions for some
of these problems in Spring MVC before, but they were to augment a
capability that was already there. Here, the solutions and the
home-brew components I had to put together were to avail myself of
these capabilities in the first place.

</p><p> For SEO-friendly URLs, I found an incredible library called <a
href="http://ocpsoft.com/prettyfaces/">Pretty faces</a>. I'm still
using <a href="https://jawr.dev.java.net/">JAWR</a>, as before, but
because I'm also using RichFaces - which has its own CSS/JS
compression mechanism, the solution's not quite as effective as I
would have liked. Still, 2 heavily compressed, minified JS files and
CSS files (one from JAWR, one from RichFaces) still beats 10+ HTTP
requests on non-minified/non-gzip compressed resources required
otherwise!)
</p>

<p> The blog software itself has many components, only about 20% of
which is the UI layer. Thus, porting to a new UI framework's pretty
easy because the back end and most of the processing are divorced from
the UI layer.
 </p>

<h2>But... Why?</h2>
 <p>No good reason, really. I know what you're thinking - "what could
possibly be more 'website site babysitting a database' than a blog?".
Since I'm trying to experiment with things, I've hit a few different
places where it's paid to invest in exploiting temporal decoupling,
and thus in investing other technologies.

Most of these features are part of the creation of blogs, thus, not
something you'll ever notice.
  There are two ways to create blogs on this site. An administration
section in which I can log in and post blogs and save drafts is the
sort of first-blush approach. It works well enough, but it's not
nearly as full featured as the equivalent functionality inside GMail
for composing an email. So, I create a Spring Integration integration
that polls an email and posts that. It's got a white-list on incoming
e-mail addresses, of course, and I've had to do a few unconventional
things to make it work, but it's actually the most fluid way to deal
with my blog. Not surprisingly, this feature's available in other
blogging software, too.
</p>
<p>
Once I do send in a blog, processing occurs on the blog entry itself.
The act of creating the blog triggers a jBPM process that prepares the
blog for final publication. The jBPM process is handled  in a separate
VM, with JMS serving as the transactional queue that pops tasks off of
the queue and handles the work.
 This is useful because it lets longer running tasks happen with no
apparent delay to the readers of the site.</p><p>Any externally
referenced images  in the blog are parsed and their URLs used to
asynchronously download the image, which gets stored in managed file
system. Then, in the published blog, you see a URL pointing to that
managed image, not the original, which means if the original
disappears, my blog will still look correct.
</p>
<p> Another part of the process involves submitting pings to the
various syndicates for a blog to let them know they should update
their listing.  This too is something that a lot of other blog
software will do, but it can take a while which is why in my software
it's modeled asynchronously.</p>
<p> The number one reason for building my own blogging solution is,
simply, that I can say I did. Because the domain model and services
tier are familiar, it's easy to gauge progress with a UI framework by
how quickly I'm able to build for it. </p>
 <p> Naturally, there are many  (seemingly endless) reasons not to do
what I've done. However, they all focus on practicality with respect
to setting up a blogging solution. They fail as means by which to
practice my craft. </p>

<p> Having said that, please excuse any inconsistency in this blog as
I'm still tweaking things (as I tend to do every 6 months or so.
 The software's more or less at parity with where it was in Spring
MVC, having ported the UI layer over. Missing are keywords and
descriptions in the meta tags, a working version of the admin section
(though, as I indicated, I use the e-mail integration more frequently
and that still works since it has nothing to do with JSF or servlets),
working titles (ie, each post's title should appear between the
&lt;title&gt; tags in the browser window,  and I'm sure there's more.
</p>
<p> There are many fixes in this new software, too, but ideally,
you'll never notice them :-) </p>

 <p>If you notice anything I'm missing or you think might be worth
experimenting with adding in a reasonably malleable blogging platform,
leave a comment. Thanks!</p>
</p>
  			<a href="jl/blogPost/composite_components_in_jsf_12x.html"><h1>Composite components in JSF 1.2.x</h1></a>
  			<p>22 July 2009</p>
  			<p>
<p>
  I'm trying to build a component in JSF that in turn has several drop downs that, with the magic of RichFaces, updates the server on the state via Ajax and rerenders the components "downstream" of the component whose state has changed. 
 This is the classical idiom of a drop down has options depend on the previous selections made. 
The component's used in several places on the system and it would be magnificent if we could blackbox its internals. 

 </p>

<p> With Tapestry, you could build a component that does its work and then "outjects" or writes a value to a property upon completion. Imagine, for example, a login form. The login form has two text fields (email, password, or anything like that) and a backing class. As the login form component is rendered, you might have preconditions to establish, so you use the Tapestry component life cycle to setup state on the fields before rendering. Finally the text fields are rendered. When the form is submitted the fields values are updated and you have a chance to read the values and perhaps do something with them. For example, if the credentials are correct, you might do a query and create a valid <code>User</code> object. The <code>User</code> object is then set on a property and that property can be bound to a  property of the client of the component. If you use the same component 10 times on the same page, they all have their own internal copy of the property and they can all update the same one or they could update 10 individual properties. That is, the "backing bean" is scoped to the component, not the page.  

 
</p><p> 
 The difference with JSF is that for any kind of composite components you have to do soething like building the tree or using Facelets. These components will in turn require some place to store the values they submit. For the above example of the login form, the user name and the password need some place to be stored. Since facelet <code>ui:components</code> don't have their own backing bean, you need to provide the backing bean for the values. Thus, it's up to the client of the component to provide storage for internal state of the component. Not very component oriented. And, more to the point, it quickly becomes untenable if you want to use the component more than one time in the scope the backing bean lives. That is, you can only use the component once per request or once per session (without creating new backing beans, at least).

 </p> 

<p> I know that JSF 2.0 will feature better support for composite components, but I need this to work on JSF 1.2, and have not managed to find many good resources / examples on how to build a sophisticated <code>UIComponent</code> subclass so it can handle its own storage. </p> 

<p> Anybody have any   ideas? </p>
</p>
  			<a href="jl/blogPost/joshlongcom_on_ec2.html"><h1>JoshLong.com on EC2</h1></a>
  			<p>19 July 2009</p>
  			<p>
<p> This is my first working version of the system being posted from the EC2 cloud. Performance seems alright. I'll update as I dig more into the capabilities. So far getting things up and running has been relatively painless. 
 There's something inherently awesome about being able to login and setup your own server without having to beg for certain extra capabilities.  

</p><p> I like most that this could eventually grow with a minimum of fuss.  </p> 
</p>
  			<a href="jl/blogPost/my_talk_on_spring_integration_at_theserversidecom_09.html"><h1>My talk on Spring Integration At TheServerSide.com &apos;09</h1></a>
  			<p>15 June 2009</p>
  			<p>
<p> I did a talk <i>waaay</i> back in March on Spring Integration for TheServerSide Symposium. If you're into Spring and want an hours worth of good wholesome ESB fun, may I humbly suggest you check out <a href="http://library.theserverside.com/detail/RES/1242310424_817.html?asrc=vcatssc_sitepost_05_14_09">the talk.</a> I'd love to know what you think so please feel free to leave a comment! 
</p> 

</p>
  			<a href="jl/blogPost/tapestry_51.html"><h1>Tapestry 5.1</h1></a>
  			<p>07 June 2009</p>
  			<p>
<P> Recently, I've been playing with Tapestry 5. The experience has been extremely satisfying. Although there are issues that could be worked on, on the whole this is the most pleasant development environment I've ever use for Java Web development. Frankly, it started as just a way to keep my mind away from a main project I'm working on. I figured I'd give it the five minute test. Actually, this is the third time I 've given it the five minute test, and this time it took. What did it was release 5.1, which sports a few features that indicate that Tapestry 5 is becoming a very "practical" choice, not just the right one.</p><p> Tapestries 5.1 sports the ability to gzip compress, as well as consolidate, JavaScript files. It does other things with images and css, too. It's not just yet on par with JAWR - which, honestly, I love -  because there's something freeing about knowing that if your page needs libraries x, and y, that there's a component out there that's doing everything possible to make the impact of inclusion of that library acceptable. CSS and JavaScript are to the web what "jars" are to the JVM: an encapsulated packaging of externalized, reusable functionality. Being able to optimize loading them, then, is crucial. </p><p> Knowing this, I decided to give it a look. I got into it, just a little. I used the Maven Tapestry archetype and created a separate project. Downloaded Tomcat 6 and even loaded Eclipse 3.4. I imported the Maven project using the m2eclipse plug-in, setup a Tomcat 6 server instance, and deployed my application to the instance. I configured Tomcat to "serve modules without publishing," and disable auto publishing. Then I crossed my fingers and hoped for the best. I loaded the browser and hit the front page. The site that's generated is pretty, but boring. It does, however, prove inviting. I returned to Eclipse, associated the HTML editor to <code>*.TML </code> files, and then started hacking. I started with a change to a <code>.TML </code> file. <code>&lt;h1&gt;Hello, world!&lt;/h1&gt;</code>, placed in the middle of the <code>Index.tml </code> file. I refreshed. It worked...! I went to the Index class itself, and added </p>
 <pre><code>
 public String getMyMessage(){
        return "Hello, moto.";
 } </code></pre>
 <p>
<p> Then, on the Index.tml file, I added <code>${myMessage}</code>. </p> <p>Again, I just refreshed the browser, and it worked! In comparison to Tapestry 3 and 4, this was great. But I've blogged about <a href="http://www.joshlong.com/jl/blogPost/getting_started_with_zero_turnarounds_javarebel.html">Zero Turnaround's JavaRebel</a> product and I've certainly seen Tomcat do some neat things with regular Struts projects or Spring MVC projects. I wasn't.. aghast, just yet. Finally, I started getting into it. </p> <p> I have used the various versions of Tapestry before, so I knew  - essentially - what components to expect and essentially what to imagine possible. I had programmer courage. So I was a little more ambitious and decided I'd tackle something  a little more ambitious. I started with a component to provide a panel. The panel would have a parameter for a ValidationTracker, which is the object that keeps track of what validations have occurred on a <code>@Form </code> component (very much like <code>ActionErrors</code>/<code>ActionMessages </code> in Struts. The panel would turn red if there were errors in the form it contained. This was a hard thing to do before because Tapestry had issues with the order of the layout of the components. </P> <P> Suffice it to say, it worked. It was also blissfully simple. No interfaces, not even annotations if I didn't want them. I was able to parameterize the title of the panel using a <code>@Block </code> (like a facet in JSF). In a package adjacent to my test page, I added a simple POJO, with a few accessor / mutators (a <code>Customer </code> class, with the usual sort of properties..). I declared an instance of it on my test page's class and added a <code>@Property </code> annotation to it - I didn't have to even create a java bean style accesor! I added a Form and a few TextField components to the class, too. </p>
<PRE><CODE>
@Component(parameters={"value=customer.email"}) private TextField email ;
@Component(parameters={"value=customer.password"})  private TextField password ;
@Component private Form form ;
</CODE></PRE>
<p>On my page, the I had:</p>
<pre><code>
&lt;form t:id="form"&gt;
 &lt;t:label for="email" /&gt; &lt;input t:id="email" /&gt; &lt;br/&gt;
 &lt;t:label for="password" /&gt; &lt;input t:id="password" /&gt; &lt;br/&gt;
 &lt;input t:id="signup" type="submit" /&gt;
&lt;/form&gt;
</code></pre>

<p> This seemed like enough, so I hit refresh and .. unsurprisingly, it worked!
 Naturally, this doesn't do anything. I wanted to make the <code>Form</code> component do something on successful submission.
 I looked around, and the simplest way to do that was to name a method as though I was descrbing it in English:

  <pre><code>
  void onSuccessFromForm()  {
    System.out.println( new ReflectionToStringBuilder( this.customer).toString()) ;
  }
  </code></pre>
</p>

<p>And of course, <i>that</i> worked!
 It's worth mentioning that during all of this - method additions, field additions, component adjustments, etc, I've not redeployed or published or even waited for more than a split second even once.
The 5 minutes had become an hour. The reason I write this blog is because I'm now well into hour 7, and I'm thoroughly impressed. It's actually <i>fun</i> to work in.

 If you've ever had that <i>wow!</i> moment in a dynamic language where you just can't beleive how nice it is to hit refresh and work, then you'll appreciate Tapestry.
 I can't usefully compare it to another Java framework because there's nothing like it. It's liberating. Check out Neal Ford's amazing <a href="http://library.theserverside.com/detail/RES/1242309506_447.html?asrc=vcatssc_sitepost_05_14_09">"On the Lame From The Furniture Police"</a>
  to watch a discussion on keeping focus, flow while working. In it, he basically discusses just how damaging a minute idle time is when developing an application.
  Tapestry breaks that cycle for you. No more flow stoppages. I've become impatient with the browser's ability to repaint, actually!
</p><P>I wholely recommend you take a look at <a href="http://tapestry.apache.org">Apache Tapestry 5.1</a>.</p>
</p>
  			<a href="jl/blogPost/my_los_angeles_musings_seam_tapestry_5_javaone_spring_workflow_spring_python_and_more.html"><h1>My Los Angeles Musings, Seam, Tapestry 5, JavaOne, Spring Workflow, Spring Python and more</h1></a>
  			<p>05 June 2009</p>
  			<p>
<h1>Hello, world. </h1> <p>My life has been utterly and completely busy for the last several months. I don't know about you, but I love it when that happens, even if it does take me aay from priority things like maintaining this blog. I'll take this post to sort of stretch my blog legs out again, and then try to establish a blog with more frequency.  </p> <p> <a href="http://joshlong.com/jl/blogPost/moving_to_los_angeles.html">When last I wrote</a>, I mentioned that I had moved from Phoenix, AZ to Los Angeles, CA. I started work on April 1 (cool company, nice people, interesting software, moving on...). I worked pretty consistently and started looking for a place to stay as I was at that point lodging with my mom.   I've found a nice apartment in Canyon Country, CA, which is honest very nice. It's far away from Los Angeles proper that the prices seem acceptable, but close enough that I can make my 20 mile commute in about 24 minutes, which I appreciate. I've also enjoyed (surprise surprise) the weather, which has been beautiful of late. As an example, as I write this it's very, very early in the morning, just after midnight, on Friday, June 5. The temperature is 88F in Phoenix, AZ right now, and 59F here in Los Angeles, CA. Couldn't be happier. Nothing like being able to program with the air conditioning off in the winter. Frankly, I've really just sort of enjoyed the little things.  </p> <p>I don't mean to gloat, but it's amazing what you take for granted when you live here. It doesn't hurt that the economy's so bad  it's sort of leveled out the prices, making parts of Los Angeles very approachable for somebody who's used to Phoenix prices.  I'm a fan of AT&ampT's Uverse ISP here in Los Angeles. I had COX cable in Phoenix, AZ. I paid about $130 a month to get two DVRs, cable internet with very limited storage and no ability to share among the bedrooms and almost no channels. Not to mention, I couldn't get a static IP (the shame, the humanity!) without a business account, which given how little I liked them was out of the question as it would've compelled me to accept a year long contract. Needless to say, all of that's been improved, and I pay less, and I have a much wider channel selection, to boot!  </p><h2>Of Web Frameworks</h2> <p>I've had the chance to play with some very cool technologies in depth of late, one of which is Jboss Seam. I've had issues with Java Server Faces in the past, and have even spoken to some of the issues I've had, but nonetheless it works and, when taken together with something like Tomahawk, Facelets and the various Spring integrations, you can be productive using it. Naturally, JSF has it its battlegrounds, and really scalable, stateless applications with Google indexability is not one of them. Knowing that, you can get it to work. Seam rectifies some of this and worsens it, as well. I've had an amazing time sort of rethinking through problems, learning how to approach things the Seam way. If you let your mind wander, it seems like it's very easy to produce terrible code. Essentially, this stems from certain assumptions JSF, and Seam on top of it, make for you.  </p> <p>One of them is that the HTTP Session is infinite. Seam addresses some of these issues by providing a very cool concept called a "conversation" - which I'm sure we've all seen before, but which really is quite refreshing in its application inside of Seam - which models the idea that you have a unit of work that is greater than a single request but smaller than a session. This is fine as it allows you to keep state around and use it as required and then trust that, when the conversation's finished, Seam will reap all that session memory back. Additionally, because Seam components are basically stateful session beans (unless you're using Seam POJOs, in which case they're basically stateful session beans that you can't use on another framework or EJB3 stack..) there's very little clear separation of tiers. You need to find an entity inside of a JSF action listener? Grab an entity manager and issue a query, and then add JSF validation messages if you can't find it! It almost seems like a step back, honestly.  This extra state, I find, has required me to whip out a debugger more times than I care to admit. In complex interactions it becomes very difficult to keep track of preconditions and postconditions for a given interaction.  </p><p>The real shame to me as a person who is very fond of <a href="http://www.theserverside.com/tt/articles/article.tss?l=jBPMandSpring">jBPM</a>,  Seam doesn't force the concept of conversational state far enough down the throat of the users. JBPM is definitely well integrated, but it's not required. It's also very possible to eschew altogether jPDL based Seam navigation, which makes for an application that has complex continuations and state without rail guards within which to advance. Anyway, giving it credit where credit is due, it's definitely better than raw JSF. I've also come to very much like Ajax4JSF and RichFaces. Part of me cringes when I realize that even simple Ajax requests are basically re rendering the whole page (or, rather, most of the body and several additional script tags), and in the process making the net burden of a given interaction with the server for certain pages on the order of several megabytes of un-cacheable Ajax JavaScript and HTML. The other part of me is utterly stunned with the richness of the results. It does, really, work. Taken together with some of the awesome features Seam itself provides (why couldn't they have just chosen Tapestry? Such apparently talented people working on JSF seems like a crime...) </p><p>I can't help but feel, sometimes, that we're heading down the path of ASP.net with JSF. ASP.net is a component based framework, and component based frameworks like Wicket, JSF, and Tapestry all fundamentally are familiar to somebody who knows ASP.net. ASP.net has a slew of components that you can use and which rammed a lot of state down the clients throat to keep the illusion that the programmer was dealing with a Windows Form application. This worked well until, one day, you wanted to override a style attribute on some component that had inline the CSS and no assigned ID. Now, you were fighting with the framework to restore your will. In this way, I feel like JSF is very similar. When I use Ajax4JSF, RichFaces, and Seam in general I am able to easily forget that I'm working n top of a statless protocol where every request has absolutely no idea what happened just one request before it but for the graces of a cookie or a state field in the request. This is why ASP.net MVC was birthed, to provide an approach for those that wanted more fine grained control. In this way, the .NET community has sort of reversed our evolution in the Java community, going from the action-oriented Strutses and Webworks and even Spring MVC, to the componented oriented JSF, Wicket, Tapestry and GWTs of the world.   </p><p>Using JSF/Seam,  I even forget about the cost of state a little bit. State's what it's all about. The Seam proponents will insist that storing state on the HTTP session is far more efficient than in the database, which is inherently less scalable. In theory, I agree with this. However, Seam still hits the database for non cached data (if you have that setup!), and you're still not excused from reconciling optimistic lock exceptions using Seam, and it leaves you with an HTTP Session brimming with state and a HTML that can easily grow to be several megabytes for midly complex UI interactions and their components.  </p><p>I have met people who were under the illusion that servlets (raw servlets) had a session by default, that it was to be taken for granted. I've spent a long time building applications where the goal was to avoid the session at all costs, until absolutely necessary (make your Struts beans request scope, turn of JSP sessions, and if you're going to do redirect after post, either encode the state in the redirect request or be darned sure you use what's now being called "flash" scope, session persistance in the service of just two HTTP requests. </p><p>Anyway, having invested so much in understanding and learning Seam, I decided I might as well give <a href="http://tapestry.apache.org/tapestry5/">Tapestry 5.1</a> a chance, as it's been a few years since I had a chance to work with Tapestry, and that was Tapestry 4. I always had a personal fondness for Tapestry. It's always been session friendly by default and to be efficient as a component oriented framework. This has led to some gimmicky approaches (the render/rewind cycle, and lack of support for dynamic (read: programmatic) component creation and attachment) </p><p>I spent a little time getting used to it. I have to tell you, given my experience with ZeroTurnaround's JavaRebel javagent for Java class reloading, I really appreciated the intrinsic support for class/component reloading in Tapestry. As a development environment goes, I haven't had this much fun since Python on a web application. Truly amazing. I was somewhat disappointed to see that Tapestry has slackened it's feverish refusal to use the session, and made everything redirect after post unless specified otherwise. The implication here is that there's some session. It's still very efficient, and I've not caught it trying to store an entire backing bean (page or component) in the session yet! If you have a chance, I wholely and completely recommend it. It's lacking support for the things JAWR (a JavaScript/CSS) compression filter) provides - though there seems to be at least some effort aimed at adding it at no additional technical cost to the developer. It just works.  </p><h2> The World At Large </h2><p>I sat, jaw agape, as the rumor milled tossed around the notion that IBM would buy Sun, and wondered what would become of some of the interesting technologies inside Sun. Imagine my surprise when I woke to find the rumors quashed and Sun bought, by Oracle of all things! I couldn't believe it. <a href="http://www.theserverside.com/news/thread.tss?thread_id=54827">Larry Ellision</a> took the stage at JavaOne and reaffirmed interest in JavaFX. JavaFx is one of the few decent options we have in the Java client landscape, and even if I never write an application in JavaFx itself (I once tripped and learned ActionScript 3 and Flex programming, and I don't think I could see the value in switching now..), the work done to support JavaFX has been a boon for the JVM/JDK. Hopefully, this innovation will continue.  </p><p>SpringSource has been doing a lot of great things of late. <a href="http://www.springsource.org/roo">Spring Roo</a> is a promsing mechanism by which useful prototype applications can be created on the fly, a sort of Spring-y version of Rail's application generarots. Spring IDE being released for free, which is a boon as somebody who's used OSGi without good tooling, and - most interesting to me - I discovered Spring Workflow, which looks very promising indeed. I am a huge fan of a good BPM engine, and it's something fundamentally hard to do correctly. Enterprise BPM engines are even harder. Hopefully, <a href="http://www.springsource.org/extensions/se-workflow">Spring Workflow</a> will remedy some of this. Finally, I couldn't help but note the amazing progress of <a href="http://www.springsource.org/node/1482">Spring Python.</a>  I <i>adore</i> Python, and have used it <i>in anger</i> many, many times over the last decade. It's never failed me. I'm pleased to see Spring's offerning not merely being a Java-Spring that happens to be written in Python. This framework seems to be geared towards the Python way, even going so far as to remind people  in the (incredible) documentation that if nothing else, the libraries Spring Python provides can, and very well may be, used independant of any XML format! </p> </p><p>Additionally, May saw the debut of Google Wave, which seems to be an incredibly cool platform on which to build. I'll be very interested to see what comes of this.  </p><p>I wonder what the next month will bring. I'll do my best to keep this blog up to date. I've heads down on a lot of work, and a few cool surprises I'll share when appropriate.  By the by, I encourage you to follow me on Twitter at <a href="http://twitter.com/starbuxman">http://twitter.com/starbuxman</a>.  </p>
</p>
  			<a href="jl/blogPost/moving_to_los_angeles.html"><h1>Moving to Los Angeles.</h1></a>
  			<p>06 April 2009</p>
  			<p>
<p> What a month! 

 I know this is a little late, but boy has it been a crazy month! April's shaping up to be no less crazy, too. </p>

 <p>  First, there was much ado about nothing early in the month when the court in Tempe, Arizona scheduled me for jury duty only to relieve me of it the day-of.  

 </P>
<p> Then, on March 17th, I drove to Las Vegas for <i>the conference</i>  -  my first big speech  - <a href="http://javasymposium.techtarget.com/html/architecture.html#JLongEAI">at the The ServerSide Java Symposium</a> in Las Vegas (which reminds me, I need to remove that banner on the right side of the page... ) which went off fine enough. More usefully, I have  some very interesting new friends.   I was especially happy to have had a chance to see the   <a href="http://www.mandalaybay.com/entertainment/sharkreef.aspx">Mandalay Bay Aquarium,</a> which was amazing. 
</p>

<p> From Las Vegas, I drove to Los Angeles, CA to meet my friend Srinivas who I'd invited to join me for a weekend there. We drove 500 miles in 2 days just inside of Los Angeles, and another 400 when we shared the drive home to Phoenix, Arizona. We went to the Laugh Factory and were delighted to find that Dane Cook was a special, secret guest-of-honor. Awesome! </p> 

<p> 
Then, I came home. I had given notice at my job at Wells Fargo and so the last week of March I spent closing up shop there and preparing for the next step. March 31st was my last, very sad day at Wells Fargo. I said good bye to everyone -- good people I should like very much to keep in contact with -- and packed up a few computers and books (and clothing, I suppose.) and drove to Los Angeles (again!) to start a new job there April 1.  The first step is getting out here and finding a place to live and so on. At the moment, I'm staying with family. </p> <p>These last few days have all about getting into the new job - interesting people there, too - and reuniting with some old friends. </p><p>Boy, am I glad to be back!</p>
</p>
  			<a href="jl/blogPost/the_times_they_are_a_changing.html"><h1>The Times, They Are A Changing</h1></a>
  			<p>15 March 2009</p>
  			<p>
<p> Not to cheapen such an awesome Bob Dylan song, but I felt it was a propos... 
 Things are really going to be busy pretty soon. 
</p> <p> Lot's of things are happening in my life right now. It's going to be a pretty tumultuous two months.
 </p>    <P>For someone who's adamant about encouraging change, and reacting gracefully to change in the software development lifecycle, I'm about to be put to the test.
 I'm moving back to Los Angeles, CA, where I'm from.

 This will put us closer to family.
 	As I move forward and start speaking and doing more open source in my career, I don't want my vacation time to be spent just going to see family if I can instead spend it going to more conferences and being involved in the software world. </P><P>It's a very interesting time to be in software: I haven't felt like this since the late 90s.
 </p><p>
  		I've resigned my current position at my job and am looking forward to the next opportunity.

  		I expect I'll be challenged, and hopefully given a chance to
  		institute positive change. Getting to that opportunity, could be ... tedious, however. State or continental moves are always challenging.   </p>

<P> In the more immediate short term I'm looking forward to The Server Side Symposium in Vegas this week! <a href="http://javasymposium.techtarget.com/html/speakers.html#JLong">I'm speaking</a> on EAI and <a href="http://www.springsource.org/spring-integration">Spring Integration</a>, in particular. It's a very promising new technology and I hope to encourage people to check it out. If you're coming and you want to read some more on it, there's always the site I just linked to, as well as an article I wrote about it a little while ago, <a href="http://www.infoq.com/articles/Spring-Integration-Joshua-Long">"Getting Started With Spring Integration,"</a> on Infoq.com. I definitely encourage you to check those out.
</P>
<p> By the by, anybody know of what parties / events are happening after the event?
	I'd love to meet and greet any of you who are going to be there.
</P>

<p> After that, it's off to Los Angeles, where I'll be advance scouting for a place to stay. If anybody wants to grab a beer while I'm there, let me know. I can be reached at josh 'at' my domain name. Or, contact me on <a href="http://www.twitter.com/starbuxman">Twitter</a>.
</P>
</p>
  			<a href="jl/blogPost/embedding_the_apache_mina_ftp_server.html"><h1>Embedding The Apache Mina FTP Server</h1></a>
  			<p>08 March 2009</p>
  			<p>
<p>I had the requirement to provision users of a system with an FTP solution. I wanted something lightweight and very configurable. I chose to embed <a href="http://mina.apache.org/ftpserver/downloads.html">The Apache Mina FTP Server</a> since it's flexible, imminently hackable,  (it's written in Java and is deployed using Maven and Spring) and embeddable. This entry is about that process.</p>

<p> Essentially, I didn't want to have to wrap it in a layer of abstraction just to support adding and removing users and configuration options like their home directory. It also had to be flexible, as there may be different requirements down the line oriented towards security. </p><p>

My use case is simple: I want to build  a processing pipeline for images (who doesn't?). I want users of the system to be able to login to an FTP with their same credentials and upload media. On the server, <a href="http://www.springsource.org/spring-integration">Spring Integration</a> will watch for uploads and send off a message to the message queue which is where the BPM engine sits, and is waiting to begin image processing on inbound images.
</p>
<p> What could be simpler? In this blog entry, I will only discuss addressing the first requirement: provisioning system users with accounts on an FTP server.
</p>

 <p> I did look at some other alternatives, namely HermesFTP and AxlRadius, which seemed both to be interesting projects. I really have no opinions  for  - or against - them, Apache just has the backing foundry's name and more sophisticated documentation.</p>


<P>To test, I suggest using  <a href="http://filezilla-project.org/">FileZilla</a>, because it's powerful, free and features  a no-pain installation for the big 3 operating systems,  </p>

<p>

 You can run the application as a stand alone server, but I'm running it as process that piggybacks the web application. In this blog, I'll simply introduce using it a   simple <code>public static void main(String [] args)</code> context.

</p>
<h2>Installation</h2>
<p> Getting the server is easy, as I'm using Maven. Below are the dependency elements to add to a POM if you don't already have them. Note the strangeness with <code>slf4j</code>. I don't know if you'll encounter any issues with it in your configuration. My setup was riddled with ClassNotFound exceptions, and the configuration resolved them. You may very well be able to remove the exclusion from the <code>org.apache.ftpserver</code> dependency as well as the two explicit  dependencies on <code>slf4j</code> at the top.
          I don't include the Spring framework dependencies here, but I do make use of Spring 2.5.x, though I suspect this would run just fine with Spring 2.0. Your mileage may vary.
<PRE><code>
        &lt;dependency&gt;
            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
            &lt;version&gt;1.5.3&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
            &lt;version&gt;1.5.3&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.ftpserver&lt;/groupId&gt;
            &lt;artifactId&gt;ftpserver-core&lt;/artifactId&gt;
            &lt;version&gt;1.0.0&lt;/version&gt;
            &lt;exclusions&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
                &lt;/exclusion&gt;
            &lt;/exclusions&gt;
        &lt;/dependency&gt;

</code></pRE>
</p>

<h2>Code</h2>
<p> Now that the JARs are in place, you need some a Java class to launch it and some configuration.

The java code is below. It loads the Spring application context and punts the chore of configuring the server to it and the Spring XML file I've setup, <code>ftp-server.xml</code>. Once a freshly obtained instance of the server is obtained, the server is started.
<pre><code>
package com.foo.integrations.ftp;

import org.apache.ftpserver.FtpServer;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Main {
    public static void main(String[] args) throws Throwable {
        ApplicationContext classPathXmlApplicationContext =
           new ClassPathXmlApplicationContext("ftp-server.xml");
        FtpServer ftpServer = (FtpServer)
           classPathXmlApplicationContext.getBean("server");
        ftpServer.start();
    }
}
</code></pre>.

</p>

<h2>Configuration</h2> <P> The configuration's the most involved bit, but should be pretty self explanatory shortly. It's included below. The FTP server exposes configuration using a Spring XML Schema, which acts as something of a DSL in this case.
The XML configures the server instance, tells it to defer authentication to a database. It seems like the component provide is expecting data to be available in a table called ftp_user. In this case I modeled a table called ftp_user and created columns in it for testing. The final solution will either be a view on top of existing data that vends the table and columns expected by the component, or a series of triggers that keep a real <code>ftp_user</code> table in sync with the canonical user/password and status data in other tables.
I'm not sure which is more performant, and will address that later. It should be evident how that might work, I hope. In the code below you can see we're giving the database authentication component the SQL queries to use. I'm not sure I want to keep the delete/update functionality in place there. I don't think it's accessible from the FTP protocol, but instead there are APIs that Mina ships with, and I think use of those APIs delegates to these queries.
</p> <p>  The <code>dataSource</code> is just like any other dataSource inside of Spring. I'm not using the Apache Commons Connection Pool class here because I didn't want to require more jars for you, dear reader, to try this example out. But use your judgment. If your application server requires something else, then use that.  </p>

<P>Finally,
a word about directories. Below, in the <code>&lt;select-user&gt;</code> configuration, I return a result set that contains a column <code>homedirectory</code>. The home directory in this case is not an Operating System home directory (~, for example), but instead the directory the logged in user should be dropped. Here I'm using ficticious UNIX path and suffixing it with the user's ID. The user ID and the path are then returned as the home directory when the user tries to login. As it's configured now, if the user's folder doesn't exist on login then Mina FTP server will create it. This behavior is controllable  by setting the <code>create-home</code>  attribute on the <code>native-filesystem</code> element below.
</p><p>
I tested this code on Unix and Windows. I set it to run on port 2121, so that I wouldn't have to get access to the privileged port 21 on Unix. The configuration for that is on the <code>nio-listener</code> element. The other interesting behavior which only became evident to me when, surprisingy, it still worked on Windows, is that the path <code>/folder/to/store.. </code> resolved under Windows! Now, I'm not sure if <code>java.io.File</code> has some intrinsic support for POSIX-style paths, or there's some handler registered by cygwin on my particular system, or what, but I tried opening up a grails console and verifying the absolute path of a <code>java.io.File</code> object for "/" and sure enough it returned "C:". So, don't worry if you want to test this on either operating system, I guess!

</p>
 <PRE><CODE>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans:beans xmlns="http://mina.apache.org/ftpserver/spring/v1"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:tx="http://www.springframework.org/schema/tx"
             xmlns:aop="http://www.springframework.org/schema/aop"
             xsi:schemaLocation=" http://www.springframework.org/schema/beans
             http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
             http://www.springframework.org/schema/tx
             http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
             http://www.springframework.org/schema/aop
             http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
             http://www.springframework.org/schema/lang
             http://www.springframework.org/schema/lang/spring-lang-2.0.xsd
             http://mina.apache.org/ftpserver/spring/v1
             http://mina.apache.org/ftpserver/ftpserver-1.0.xsd "&gt;
    &lt;beans:bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource"&gt;
        &lt;beans:property name="driverClassName" value="JDBC_DRIVER"/&gt;
        &lt;beans:property name="url" value="JDBC_URL"/&gt;
        &lt;beans:property name="username" value="YOUR_USER"/&gt;
        &lt;beans:property name="password" value="YOUR_PASSWORD"/&gt;
    &lt;/beans:bean&gt;
    &lt;server id="server"&gt;
        &lt;listeners&gt;
            &lt;nio-listener name="default" port="2121"&gt;&lt;/nio-listener&gt;
        &lt;/listeners&gt;
        &lt;db-user-manager encrypt-passwords="clear"&gt;
            &lt;data-source&gt;                &lt;beans:ref bean="dataSource"/&gt;
            &lt;/data-source&gt;
            &lt;insert-user&gt;INSERT INTO FTP_USER ( user_id, user_password, home_directory,
                enable_flag, write_permission,
                idle_time, upload_rate, download_rate ) VALUES ('{userid}', '{userpassword}', '{homedirectory}',
                '{enableflag}', '{writepermission}', {idletime}, {uploadrate}, {downloadrate})
            &lt;/insert-user&gt;
            &lt;update-user&gt;UPDATE FTP_USER SET user_password
                ='{userpassword}',home_directory='{homedirectory}',enable_flag={enableflag},
                write_permission={writepermission},idle_time={idletime},
                upload_rate={uploadrate},download_rate={downloadrate}
                WHERE user_id='{userid}'
            &lt;/update-user&gt;
            &lt;delete-user&gt;DELETE FROM FTP_USER WHERE user_id = '{userid}'&lt;/delete-user&gt;
            &lt;select-user&gt;SELECT user_id as userid, 100000 as maxloginperip ,
                100000 as maxloginnumber , user_password as
                userpassword, '/folder/to/store/files/uploads/'|| user_id as homedirectory, true as
                enableflag, true as writepermission, true as readpermission, 100000 as idletime, 100000 as uploadrate,
                100000 as downloadrate FROM FTP_USER WHERE user_id = '{userid}'
            &lt;/select-user&gt;
            &lt;select-all-users&gt;SELECT user_id FROM FTP_USER ORDER BY user_id&lt;/select-all-users&gt;
            &lt;is-admin&gt;SELECT user_id as userid FROM FTP_USER WHERE user_id='{userid}' AND user_id='admin'&lt;/is-admin&gt;
            &lt;authenticate&gt;SELECT user_password as userpassword from FTP_USER WHERE user_id='{userid}'&lt;/authenticate&gt;
        &lt;/db-user-manager&gt;
        &lt;native-filesystem case-insensitive="false" create-home="true"/&gt;
    &lt;/server&gt;
&lt;/beans:beans&gt;</CODE></PRE>

<p>All in all, I'd say using the FTP Server's been pleasant - except for the ugliness concerning <code>slf4j</code> - and I hope it works for you. I am well aware of the availability of other FTP servers that support database backends, but I really was looking for something lightweight and embeddable, and ideally something I could unit test in Java. This worked out well. It's interesting to see how much of our own dogfood we Java developers manage to get away with using. I used Apache's James email server several years ago. It was very powerful and not a little bit complicated, but it worked, and it was all Java. It scaled and was also very robust, and even with it's wharts was still easier to get working than <code>sendmail.</code> So: I use a Java editor, Java web /application server, Java middleware, Java build tools, Java FTP servers and even a Java text editor. I should really start looking into H2 or Derby and see if I can't close the gap on a completely Java infrastructure stack! It'd be freaking sweet if I could <code>mvn clean install</code> an entire environment (which, for that matter doesn't care which host operating system it's on...)

 </p> <p> Now to begin the count down to having a completely Groovy based stack! </p>
</p>
  			<a href="jl/blogPost/the_west_wing_house_md_and_mythbusters.html"><h1>The West Wing, House MD, and MythBusters</h1></a>
  			<p>03 March 2009</p>
  			<p>
<P><img style = "float:left;padding-right:10px;" width  = "200" src = "media/17890"/> My favorite show on television used to be <i><a href="http://en.wikipedia.org/wiki/The_West_Wing">The West Wing</a></i>. The show was witty, and featured arcane, blissfully self contained plots and narrative.. dialogue... banter that would tickle Shakespeare. It was amazing. It was an ideal view of the White House and the men and women inside the executive branch. There were, with rare exceptions, no ludity, no over-the-top romances, no digressions into the characters' personal lives. Except, of course, where these digressions served the episode's plot. The plot - the challenges these characters faced in day-to-day governance - was the only thing respected. </p> <p> It appealed to me in the same way that <i><a href="http://en.wikipedia.org/wiki/Watchmen">The Watchmen</a></i> (which, btw, I'm going to see tomorrow, days ahead of the US premiere!) appealed to me. It was layered, multi faceted. Each episode featured many continuations that - while they often dovetailed nicely one with another by the end of an episode - didn't always have anything to do with each other in substance. Every show was like an essay. The series took the art of narrative to a new form, and entire episodes were often just very ornate interjections into an argument or discussion. People walking, and talking.</p>

<p> My new favorite TV series is with no qualifications <a href="http://en.wikipedia.org/wiki/House_(TV_series)"><i>House</i></a>. I noticed that a lot of other nerds/engineer types like this show, as well. Follow any sampling of the programming world on twitter and you'll see people speaking to their fondness for the show in 140 character exclamations. It's riveting for a problem solver. Dr. Gregory House is a diagnostician in  at the ficticious Princeton Plainsboro Teaching Hospital where he and his team tackle medical mysteries deemed otherwise unsolvable. House's character is <i>brisk</i>, lacking all tact. He doesn't suffer fools, hates wishy-washy ideas founded on expressions of feeling. He is a scientist to the last, often refusing to even see his patients and instead letting the symptoms - the facts - stand on their own.
 </p><p> He would make  a very fine programmer. He is the quintessential "debugger."
</p>
<p> The Wikipedia page I linked you to elaborates on some of the parallels between House's character, a doctor, and Sherlock Holmes, a detective. Their staunch adherence to the facts, their disinterests in what people say or think, and their abilities of deduction.
Apparently, Sherlock Holmes himself was based on a doctor, so it's something of a full circle.
</p> <p> Now, I'm wondering what other shows are popular among nerds. I appreciate shows that can pull off the art of satire, of deadpan, well. I also love shows with strong "whodunnit" plots. I appreciate shows aimed at resolution of issues. I love MythBusters. I appreciate shows dripping in irony, and really like a lot of the programs on the BBC, because a lot of that sort of humor is unavailable here in the states.</p><p>What do other people watch? What kind of show is interesting to a nerd?</p>
</p>
  			<a href="jl/blogPost/and_were_back.html"><h1>And... we&apos;re back!</h1></a>
  			<p>26 February 2009</p>
  			<p>
<p> A lengthy upgrade process caused my blog to die, but it's back! </P> 

<p>  Usually when I upgrade the software it's not so big a deal, but this version introduced  a few new components into the architecture, which complicated things.  I really ought to open-source this sucker. 

</p> <p>Anyway, there's very little that you - dear reader - would likely see in the new software. But stick around, that's to come! </p>
</p>
  			<a href="jl/blogPost/obsolescence_of_skills.html"><h1>Obsolescence of Skills</h1></a>
  			<p>24 February 2009</p>
  			<p>
<h1>

</h1>
<p>In my last post I talked about habits geared towards acquisition of
skills. It does sometimes happen the other way â where you need to
unlearn something, or re-frame an existing skill in a different way in
order to advance with it. This is a natural part o moving forward in
life, of adapting. I like to think that I do an acceptable job of
keeping current, of adapting.
</p><p>The proof is in the pudding: how many skills do I have the have
been obsolesced*? I hadn't counted, honestly. I'm still not going to
count (not that you will see, anyway!) but you might try taking a look
at the <a href="http://www.obsoleteskills.com/skills/skills">Obsolete
Skills Wiki</a> to see if anything you've learned has become
irrelevant, and whether you've successfully crossed that chasm.
</p><p>
Don't freak out if you see something you swore was still relevant â
some of the entries are on the site, but are disputed! </p><p>
Some are pretty dead on, or scary. <a
href="http://www.obsoleteskills.com/skills/countingbackchange">"Counting
back change"</a> is - saddeningly - appropriate. How many merchants do
you know that employee people who can count back change? How many
people do the math to leave a 20% tip?  </p><p>
How many things do you know that have become irrelevant?  </p>


<hr />
 <p><i>obsolesce </I>- become obsolete, fall into disuse; "This word
has not obsolesced, although it is rarely used"</p>
 <p> Has the word "obsolesce" ... obsolesced?</p>
</p>
  			<a href="jl/blogPost/a_weekend_with_the_voices.html"><h1>A Weekend With the Voices</h1></a>
  			<p>21 February 2009</p>
  			<p>
<p>   I'm  looking forward to the chance to get some code done unabated by distractions of living with somebody: synchronized meals, activities, favorite TV shows, etc. No disractions. 
Not if I can help it. 
</p> 
<p> Often, I will run across an idea or concept that I'd like to explore but don't have the time to immediately pursue. I acrrue these ideas in an email thread sent to myself.  I call it my "negative resume" - a listing of all the things I don't have any experience and can't claim to know. 
</p>
 
<p>When that list gets too long (for me that's about 10 items), I start popping things off the queue, attacking each entry. The items on the list are usually innocuous. Occasionally I'll add significant changes / ideas that involve starting in on a rapidly new technology. In this case I make sure to either qualify a very specific, obtainable success scenario, or I diminish the other suggestions and move them to another list. 
 In a way, the process is very much like updating a bug tracker. </p>
 
 <p> I'm tracking bugs in my knowledge. Deciding which bug to remedy first requires prioritization. 
 
 
</p> 
<p>You can imagine how complicated this process was before I added, "learn basics of Project Managment" to a list!</p>
<p>The last list  included the following: "try out H2 database",  "See if you can get Seam Framework 2.0 working under Maven," "check out  Hibernate Search," "Read a few chapters from Manning's <i>iPhone In Action</i>," and so on. I don't like to let more than 10 things accrue because then there's no chance I could get it push through all of them in a weekend - even with intense focus (which I am not usually blessed with on weekends, above and beyond my day-job hours. )</p>  

<p> The sentiment behind these bursts of learning is simple. As my dad always said (I'm sure he still does, he's just no had reason to recite of late...): "It's a sinch by the inch, hard by yard." 

 </p> 
 
 <p> This weekend I've got another such list. I'm looking forward to address some of the items on this list with no direction or instinct besides the chorus of prioritizing voices in my head.  </p> <p> What do you want to learn?</p>
</p>
  			<a href="jl/blogPost/mobile_news_recap.html"><h1>Mobile News Recap </h1></a>
  			<p>18 February 2009</p>
  			<p>
 <p>
As I like to do every now and then I'm checking into the world of mobile. Theres been a flurry of activity in this space recently, so it's high time I recap, lest I forget. Among the headlines: Adobe announces massive Flash Mobile deployments: iPhone not accounted for, WebKit's just about the official  mobile platform browser of choice, though irrelevant for mobile platform development, and finally JavaFX Mobile announced (surprisingly) amidst questions of relevance. 
</p><p>
Let's tackle each of these one by one. 
</p><p>
First, Adobe's FlashPlayer 10 for SmartPhones debuts. Adobe has also unveiled eBook and PDF Mobile support. Palm's joining the OpenScreen project â Adobe's initiative to bring Flash to the handset as a platform (announced later last year) and finally Flash 10 itself will ship on the Palm Pre, which lends big name brawn to Flash's platform claims. This, and a lot more, is <a href="http://scobleizer.com/2009/02/15/did-adobe-snub-apple-with-flashplayer-10-and-development-fund-announcements/">recapped here on Scoble's site.</a></p><p>

All of this brings to the foreground just how prevalent the WebKit platform is. WebKit's now the main browser agent on Apple's iPhone in the form of Safari. It's the browser on Google's Android platform, as Chrome. It's the WebOS on Palm. Nokia's Series 60's using it, and a lot more. This means that a consistant browsing experience can be had on many of the new smartphones. Missing from that lineup, curiously, is the Storm. I expect that it'll catch up, eventually, though in the meantime I think there are other issues more prominent in deterring users of the <a href="http://www.msnbc.msn.com/id/28158098">"Flopberry"</a>. 
</p><p>
Having said all of this, don't get too excited. The presence of this browser doesn't mean what it would if a browser shared that level of prominence on the desktop specifically because a browser simply isn't rich enough to model typical mobile application development scenarios. Things like backgrounding â the ability of a client to "pause" during a phone call - and "actions" or "intents" are simply something that must be modeled at a lower level closer to the firmware. 
</p><p>
The only thing potentially helpful is that your investment in languages that terminate statements with ";" is safe! Today, the modern development environment â with the glaring exception of the iPhone â is Java (though not the JME platform!) or JavaScript. The iPhone of course requires Objective C.</p><p> 

Adding another Java platform to the roster, JavaFX 1.1 was just announced and with it news of release and adaptation plans for JavaFX Mobile. Information on the main site (http://www.javafx.com) is sparse, but the list of <a href="http://www.javafx.com/partners">partners is interesting</a>: LG, Sony Ericsson, among them. It'll be interesting to see what traction this platform gets especially in light of Flash Mobile and the iPhone. 

</p> 
</p>
  			<a href="jl/blogPost/getting_started_with_zero_turnarounds_javarebel.html"><h1>Getting Started With Zero Turnaround&apos;s JavaRebel</h1></a>
  			<p>14 February 2009</p>
  			<p>
 

<p>
I go out of my way to make the development experience quick. I'm still a java developer and not, say, a Python developer, but I loathe the iteration time. It's the number one thing I wish we could do better in Java. Sure, during development I go out of my way to make iteration less painful. One aspect of this is using Maven's Jetty plugin, which lets me edit HTML, JSP(X), CSS, JS files without undo redeploys. However, it's not enough.  I keep my model and services tier in a separate VM for testing, so that the code isn't collocated by default. This has the effect of making the occasional redeploy of a web application much more bearable.  However, even thoere, sometmes you find yourself fidgeting with things inside of an Action or a Spring MVC controller that aren't broad strokes but really sort of fine granularity changes. Each time you redeploy you lose your session and it's just generally an unnerving mental interference, even if it is only a few seconds.
</p><p>
Recently, I was trying to show this application to a friend (one of those PHP people I keep hearing about...) and he complained that the redeploys on changes to the Java class were annoying. I know he was just trying to spread some religion. That's alright. In this case, he was right. If you use a scripting language and are used to the instant feedback cycle, then Java's a hard sell (even in light of the less and less meaningful, "well, it scales," or "it has a broad library" arguments).
</p><p>
This next paragraph reads something like a sales pitch. I'm in no way affiliated with JavaRebel. You may, however, skip the next paragraph if you want.
</p><p> <a href="http://www.zeroturnaround.com"><img border = "0" src = "media/17892" style = "float:left; margin-right :10px; " /></a>
I'd heard of, and even experimented with, JavaRebel before when it came out, so I knew of the solution. My main reservation was that it was proprietary. There's a US $99.00 personal license fee to pay in its use. However, the license wasn't a license for deployment, it was a license for development, in much the same way you can deploy a million instances of software written using one license for IntelliJ IDEA, the same applies here. Additionally, the jar doesn't need to be deployed in the production artifact. You carry it with you and use it on any development. As tools go for engineers - it's really cheap. I already spend on (or win! Thank you <a href="http://www.phxjug.org">Phoenix Java User Group!</a> ) copies of IntelliJ because as a craftsman I demand the best tools. An extra US $99.00 for hassle-free development seemed a great compromise. More to the point, there's a proven productivity gain had in zero turnaround development iteration from other languages, so this would only be a win-win for any projects I worked under. I might even be able to pitch it to a boss one day and get them to spring for it!
</p><p>

At this point I decided I'd need to walk the walk if I want to talk the talk. I set about integrating it. My setup's pretty plain:
</p><p>
<ul> <LI>
Maven 2.0.8</li><li>
IntelliJ IDEA 8.1 for edits (by the by, have you tried the new <a href="http://www.intellij.com">IntelliJ</a>? Markedly faster, in some cases especially related to large projects.)
</li><li>
Java 5 </li><li>
Spring MVC 2.5</li></ul>
<p>
My definition of success would be to be able to update a Controller, compile that one class, and then refresh the page and have those changes reflected. This meant that all code relying on Spring itself should also work. For example
</p>
<p>
You can declare variables to be injected into you controller via annotations.
</p>

<code><pre>@Autowired private IServiceInterface service;</pre></code>
<p>
And, similarly, you can add new configurations for Spring MVC requests inside a Controller with no problem, thus:
</p> <code><pre>
@RequestMapping("foo.do")
public String handleRequestForFooDo( Model model) {
  model.addAttribute( "message", "Hello, World!" ) ;
 return "foo" ;
 }
 </pre></code>
 <p>Both of these code snippets should just do the right thing and work when I refresh the page.  </p>
 <p>

So, the first part of the solution was getting JavaRebel installed for development at all.
</p><p>
This was relatively straight forward. Go to zeroturnaround.com and <a href="http://www.zeroturnaround.com/download">download the Jar for the trial.</a> Unzip it and put the <code>javarebel.jar</code> someplace you can find it.  I created a folder called javarebel in my home directory and put the jar in there. You will put the license in the same folder if you buy the product.
</p><p>
The next trick is to make sure it's available to your Java server's process as a boot agent. Since I'm using Maven's Jetty plugin, my configuration was simply to update <code>MAVEN_OPTS</code>, before running Maven, thus:
</p> <code><pre>
export MAVEN_OPTS="-noverify -Drebel.log=true -javaagent:~/javarebel/javarebel.jar "     ;
mvn jetty:run ;
</pre></code>
<p>
This is already an improvement.
</p><p>
I did one more thing, which was to disable Intellij's urge to build a .war itself each time I compiled anything. Do this by right clicking on the web application in Intellij, File > Project Structure, clicking on the Web component of your web project (it's a blue icon.), then clicking on Java EE Build Settings. I unchecked both "Create web facet war file", and "Web Facet Exploded Directory."
</p><p>
At this point, if I modify a class in IntelliJ (say I have a controller open and I change a method body) the change will be manifest if I reload the controller in the browser. However, if I add any new fields, or change any method signiatures, it won't be reflected in the reloaded class because Spring won't have had a chance to "refresh" the class. Any annotations for Spring injections will be there, but the Spring runtime won't have had the chance to react to them.
</p><p>
So the next piece is to ensure you give Spring a chance to react to the new class. This is done using a plugin. The plugin's free open source software, which you can download readily from <a href="http://www.zeroturnaround.com/javarebel/plugins">here</a>. You can add the plugin however you like. I'm using Maven. While I know that ZeroTurnaround has a repository, I found that the jar didn't work. So, I just downloaded that one and deployed it to my own repository and dependended on that .jar, which has worked just fine. At this point, I can now edit a controller in Intellij, including addding methods, etc, without more than a compile (<code>ctrl + shift + F9</code>) - it's tantamount to the time it'd take to save a class in Eclipse) and a page refresh.
</p><p>
Hope this helps somebody else looking for information on how to get started. This is really quite powerful.
</p>
</p>
  			<a href="jl/blogPost/dust.html"><h1>Dust</h1></a>
  			<p>04 February 2009</p>
  			<p>
<p>Sometimes people tell me, "Josh, you're an idiot!" Then I have myself a good cry and walk it off.
</p> <p>
 Then people ask me about the 7-node grid I keep in my home office. </p> <p>They wonder why I would keep that many computers in so small a space. They wonder, "why?"
 Besides providing something of an electric heater (the room's consistently 10F warmer than the rest of the place!), the computers let me test algorithms/concepts in scale. Frameworks like <a href="http://terracotta.org/">Teracotta</a> don't test very consistently on a single node, after all. And, of course, there's nothing like having 2TB of space exposed as one giant mount.
</p>
<p>Finally, people ask me if there are any disadvantages. They ask if the electric bill's high. It isn't, but that's a side effect of living in Arizona, where my air conditioner's on 24/7 and so an extra few computers doesn't really make a difference.

 They ask if I spend my time maintaining them.I tell them I run <a href="http://en.wikipedia.org/wiki/Ubuntu">Ubuntu</a>, so I never get viruses. If a PC malfunctions then I simply repair it and reimage the node.

 They press me. Surely there's <i>something</i> disadvantageous to running so many computers. I tell them the honest truth. It's the <a href="http://en.wikipedia.org/wiki/Dust">dust</a>. The dust alone is the reason I want to just invest in EC2. And of course, I'm an asthmatic <b>and</b> a green fiend. So I can't use the aerosol canisters to dispel the dust. Nor can I use the Ozone-friendly canisters -- they both trigger my asthma or offend my green sensibilities. So, I have to clean them with a rag on occasion (once every couple of weeks).

</p>

<p>Next time I get a home office, I'm going to get it with tile. Remember, if you're going to setup a grid, the biggest challenge you face may not be technical.
</p>
</p>
  			<a href="jl/blogPost/revised_spring_integration_maven_codepomxmlcode_example.html"><h1>Revised Spring Integration Maven &lt;code&gt;pom.xml&lt;/code&gt; Example</h1></a>
  			<p>04 February 2009</p>
  			<p>
 

<p> I published an article on <a href="http://www.infoq.com/articles/Spring-Integration-Joshua-Long">Infoq.com recently</a>.
The code was sound but it used the cock-a-many OSGi friendly
 Maven jar dependencies that were being provided off the Spring Source Maven repository.
 	The problem was that these jars were custom to SpringSource's build of the product. If you had
 	an existing Spring application and then you introduced the Spring Integration jars it would
 	bring down a different set of jars -- possibily conflicting with your existing jars' classes.

It wasn't addressable using Maven's <code>dependencyManagement</code> element either, as the <code>artifactId</code>s were different.

A bug was <a href="http://jira.springframework.org/browse/INT-245">filed</a>. Finally - and regretfully after the article was beyond my editorial control  - the correct
 jars are in the public Maven repository using the correct for the Spring Framework proper.
 </p> <p>What follows is my sample POM for another project. Use it at your discretion. Please note that in this case <code>&lt;spring.version&gt;</code> is <code>2.5.6</code> and <code>&lt;spring.integration.version&gt;</code> is <code><b>1.0.1.RELEASE</b></code>. That updated version is the release that contains the corrected revisions. Upgrade time!
<pre>
    &lt;dependencies&gt;
             &lt;dependency&gt;
                 &lt;groupId&gt;log4j&lt;/groupId&gt;
                 &lt;artifactId&gt;log4j&lt;/artifactId&gt;
                 &lt;version&gt;1.2.14&lt;/version&gt;
             &lt;/dependency&gt;
             &lt;!-- COMMONS STUFF --&gt;
             &lt;dependency&gt;
                 &lt;groupId&gt;commons-lang&lt;/groupId&gt;
                 &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;
                 &lt;version&gt;2.2&lt;/version&gt;
             &lt;/dependency&gt;
             &lt;dependency&gt;
                 &lt;groupId&gt;commons-io&lt;/groupId&gt;
                 &lt;artifactId&gt;commons-io&lt;/artifactId&gt;
                 &lt;version&gt;1.1&lt;/version&gt;
             &lt;/dependency&gt;
             &lt;dependency&gt;
                 &lt;groupId&gt;commons-collections&lt;/groupId&gt;
                 &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;
                 &lt;version&gt;3.2&lt;/version&gt;
             &lt;/dependency&gt;
             &lt;dependency&gt;
                 &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;
                 &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;
                 &lt;version&gt;1.7.0&lt;/version&gt;
             &lt;/dependency&gt;
             &lt;!-- SPRING FRAMEWORK --&gt;
             &lt;dependency&gt;
                 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
                 &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
                 &lt;version&gt;${spring.version}&lt;/version&gt;
             &lt;/dependency&gt;
             &lt;dependency&gt;
                 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
                 &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
                 &lt;version&gt;${spring.version}&lt;/version&gt;
             &lt;/dependency&gt;
             &lt;dependency&gt;
                 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
                 &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;
                 &lt;version&gt;${spring.version}&lt;/version&gt;
             &lt;/dependency&gt;
             &lt;dependency&gt;
                 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
                 &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
                 &lt;version&gt;${spring.version}&lt;/version&gt;
             &lt;/dependency&gt;
             &lt;dependency&gt;
                 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
                 &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;
                 &lt;version&gt;${spring.version}&lt;/version&gt;
             &lt;/dependency&gt;
             &lt;dependency&gt;
                 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
                 &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;
                 &lt;version&gt;${spring.version}&lt;/version&gt;
             &lt;/dependency&gt;
 	  		&lt;dependency&gt;
 				&lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;
 				&lt;artifactId&gt;spring-integration-core&lt;/artifactId&gt;
 				&lt;version&gt;${spring.integration.version}&lt;/version&gt;
 			&lt;/dependency&gt;
 			&lt;dependency&gt;
 				&lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;
 				&lt;artifactId&gt;spring-integration-httpinvoker&lt;/artifactId&gt;
 				&lt;version&gt;${spring.integration.version}&lt;/version&gt;
 			&lt;/dependency&gt;
 			&lt;dependency&gt;
 				&lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;
 				&lt;artifactId&gt;spring-integration-file&lt;/artifactId&gt;
 				&lt;version&gt;${spring.integration.version}&lt;/version&gt;
 			&lt;/dependency&gt;
 			&lt;dependency&gt;
 				&lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;
 				&lt;artifactId&gt;spring-integration-jms&lt;/artifactId&gt;
 				&lt;version&gt;${spring.integration.version}&lt;/version&gt;
 			&lt;/dependency&gt;
 			&lt;dependency&gt;
 				&lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;
 				&lt;artifactId&gt;spring-integration-adapter&lt;/artifactId&gt;
 				&lt;version&gt;${spring.integration.version}&lt;/version&gt;
 			&lt;/dependency&gt;
        &lt;/dependencies&gt;
        </pre>
</p>
  			<a href="jl/blogPost/scalability_is_not_an_architectural_capabity_anymore_on_artimacom.html"><h1>&quot;Scalability Is Not An Architectural &quot;Capabity&quot; Anymore,&quot; on Artima.com</h1></a>
  			<p>02 February 2009</p>
  			<p>
I've just posted a new blog entry on my Artima.com blog: <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=248983">"Scalability Is Not An Architectural "Capabity" Anymore"</a>. Any input's appreciated. 
</p>
  			<a href="jl/blogPost/my_favorite_month.html"><h1>My Favorite Month</h1></a>
  			<p>31 January 2009</p>
  			<p>
<p>
<img alt ="This is Pancit. I'm vegetarian, so there's no Shrimp or sausage in the variety I eat. But still: yummy!" style = "float:left; margin-right:10px;" width ="300" src="media/17843"/>Today - the 31st of January  - is my birthday. I celebrated it by sharing a wonderful meal of Pancit (http://en.wikipedia.org/wiki/Pancit ) with my girl last night, and then finally going to see <a href="http://en.wikipedia.org/wiki/Russell_Peters">Russel Peters</a>  last night at the Improv at the invitation of my good friend Venkatesh. That was probably the hardest I've laughed in a month. My brother from another mother Mario took me out drinking last night afterwards, and the fact that I don't remember much of it attests to how well we did!
</p><p>January 31st's also my dad's birthday! Yes, that's right, I was an awkward birthday gift :-) He's 71, now. Astonishing. I'm very surprised that a man's years can so belie a man's youth. I hope everybody gets to be as interesting, and wonderful a man as he is - even once in there lives. I love my dad very much, and owe a large debt of gratitude to him. I wouldn't be the man I am without his unique contributions. I'll be going to Los Angeles next Friday to see him. I can't wait.
</p><p>January in recent years has become more involved because there are two new special occasions to celebrate.
</p><p>My buddy's daughter Makani - a light in dark, boring times - joined the eternal conversation of life on January 26th, 2007. She's one year old now. Long may she live, and smile.  I don't normally like babies. It's not that I dislike them - I just don't know what to do with them. This one's different. She's humbling. She inspires. I can't believe it's been one year, and I can't believe she's come as far as she has. She's been 100 different Makanis over the last year - constantly, and manifestly, evolving and growing. Part of that is biological imperative. Part of that is... something else altogether miraculous.
</p> <p><b>Here's to January</b>.</p>
</p>
  			<a href="jl/blogPost/thinking_about_meebo_s_enterprise.html"><h1>Thinking About Meebo&apos;s Enterprise Service Bus</h1></a>
  			<p>27 January 2009</p>
  			<p>
<P>I don't know if they're using an ESB, but they should be.
</P><P>Meebo.com's a very novel little Ajax-oriented IM client. It's acheived some stunning success, all very well deserved. Recently (a few weeks ago), I noticed Meebo.com has added support for talking to Facebook as well as MySpace users via their presence-aware messaging feature ("Instant Messaging"). This means that they're exposing connectivity with services provided by the platform. They built their previou lot of IM connectivity/functionality using a concurrency-friendly version of libpurple (<a href="http://en.wikipedia.org/wiki/Meebo">This article on Meebo on WikiPedia metnions that</a>, and so does <a href="http://blog.meebo.com/?p=126">these</a> <a href="http://blog.meebo.com/?p=428">two</a> from Meebo's Blog). <code>libpurple</code> is the library behind the ubiquitous F/OSS <a href="http://www.pidgin.im/">Pidgin (formerly, GAIM)</a>. Essentially, it knows how to speak/receive messages from all sorts of IM protocols/platforms.  

</p>  
<P> I want to take this opportunity to imagine their architecture a little bit, and explore it as an ideal  candidate for an ESB-based solution. Architecting an application like that requires some of the features that an ESB best provides: messaging, routing, transformation. </p><p> The <b>messaging</b> quality I attribute to their natural requirement to send and receive messages. Their application has endpoints that know how to "receive" messages and endpoints that know how to "send" messages. That these endpoints are written on top of <code>libpurple</code> or on top of the <a href="http://developers.facebook.com">Facebook Chat</a> and <a href="http://developer.myspace.com/community">MySpace IM API's</a> is irrelevant.
  </p>  <p>Naturally, Meebo needs to provide <b>routing</b>. It wouldn't be kosher if you sent a message to <i>Fred</I>, and a complete stranger <i>Wilma</I> got it!
</p>
<p> Finally, Meebo must provide support for <b>transformation</b> - I can only imagine - if for no other reason than that's a requirement in the <a href="http://www.eaipatterns.com/CanonicalDataModel.html">Canonical Data Model Pattern</a>, which describes integration across many disparate endpoints made possible by reducing the permuations of connective channels. This is feasible by having all endpoints "adapted" into a normalized message format. All channels to and from those endpoints undertand this format. This makes adding a new endpoint as simple as adding an adapter from its format to the normalized system format. Thus, for Meebo, it is imperative that for any messages being passed from point to point, the message model itself is normalized and then pased on to a channel bound for an adapter. This avoids "<i>architectural spaghetti!</I>"</P>
<p>
    Finally, their architecture must make use of certain design patterns, for example a <a href="http://www.eaipatterns.com/CorrelationIdentifier.html">correlation ID</a> would be invaluable in a cloud application where anybody can send messages at any time but they must consistantly show up in a normalized sequence for all clients of the discussion involved.  
</p>

<p>
  I don't know what Meebo's made of, though I am happy to speculate. Plenty of people have tried to build solutions, like <a href="http://soashable.sourceforge.net">SOAShable</a>, for example, which has since stopped functioning. But, it's a good start at the project, and is worth a look. There are other explanations of some of the hard core nitty gritty behind Meebo. One such article, <a href="http://news.oreilly.com/2008/07/how-comet-brings-instant-messa.html">How Comet Brings Instant Messaging To Meebo</a>, is a good read. Finally, to see how some of this might be implemented it's worth noting that there's already support for some of this functionality in a few different ESBs. <a href="http://ankiewsky.blogspot.com/2008/12/integrating-xmpp-into-jboss-esb.html">Here's an example using XMPP and JBoss ESB</a>. <a href="http://www.google.com/url?sa=U&start=2&q=http://www.mulesource.org/display/MULE2USER/XMPP%2BTransport&ei=86F_SbDsKpmRmQeanp2tBA&sig2=iKUf0hUSAa17G9xPbd9ebw&usg=AFQjCNEjeFLNFj1KDsIpcdSFVI4qRNcUwQ">This example  provides XMPP support for the popular Mule ESB</a>.  Who knows, perhaps with a little work and some C I'm sure you could get a server-ready, concurrency friendly version of <code>libpurple</code> running yourself!  
</p> <p> Just food for thought.. </p>
</p>
  			<a href="jl/blogPost/whatever_is_ray_ozzie_going.html"><h1>Whatever is Ray Ozzie Going To Do?</h1></a>
  			<p>26 January 2009</p>
  			<p>
<p>
I'm catching up on some of my reading (more on that later). I was reading the
December issue of
<a href=http://www.wired.com/techbiz/people/magazine/16-12/ff_ozzie?currentPage=all id=lvmq title=WIRED>WIRED</a>.
I don't envy Ray Ozzie his situation. He's the new chief software architect at
Microsoft (taking over Bill's job). Questions need to be asked about whether
Microsoft's viability is certain. Ozzie is himself a wunderkind that Bill Gates
hs called the "one of the top five programmers in the universe". Certainly,the
proof is in the pudding. He invented Lotus Notes based on the research and
learning environment Plato (see this
<a href=http://thinkofit.com/plato/dwplato.htm id=b4ro title="good article">good
article</a> ), which he tinkered with during his college years. As an aside, I
note that the WIRED article attributes
<a href=http://www.pwc.com/ id=hah: title="Price Waterhouse">Price
Waterhouse</a>'s purchase of Notes as a turning point for Ozzie and his work one
that eventually made it attractive to IBM, which then bought Lotus two years
later. My mother worked at Price Waterhouse during that time, and I remember her
having this incredible workgroup software on her laptop. It was only later that
I'd understand how powerful it was. Now, Ozzie isn't just changing the face of
office workgroups, he's chaning the landscape of the computer desktop in
general, and he's got to do it through Windows and Office.</p>  <p>
He's come on strong. In 2005 he wrote, and with Bill Gates, sent a memo to high
level executives at Microsoft whose purpose was two-fold: evaluate the current
situation and landscape and map out what the future holds. He was writing on he
money in describing the next computing platform as a cloud based paradigm. The
latest and greatest out of Redmond confirms this. A lot of the stuff that was
supposed to be in Vista, including a cohesive service-oriented platform, seems
to be present in this new version of Windows,
<a href=http://www.microsoft.com/azure/default.mspx id=g3j9 title="Windows Azure">Windows
Azure</a>. It seeks to make the internet as much a fiber of the next generation
of applications as an operating system's kernel is today.</p>  <p>
He's also previewed the cloud-friendly version of Office. For a good review,
check out this
<a href=http://channel9.msdn.com/posts/PDCNews/First-Look-Office-14-for-Web/ id=a1s1 title="MSDN webcast">MSDN
webcast</a>. The cloud-friendly Office -- honestly, Linux and Java zealot that I
am -- looks really cool. The idea is that you can drift between the web, the
web, and the mobile version of the client. Finally, communal workflows are
supported natively -- they're showcasing examples where somebody makes a change
in a thick client and that change is propogated instantly to the ajax version of
a document. I'd love to see how that particular ESB's being secured. I wonder if
it's channeled centrally through Microsoft's servers, or if it's installable on
the client's servers? I know they mentioned Sharepoint, but I genuinely hope
they don't compel users to buy that whole boondoggle of a stack just to get the
integration features. 'Sides, what am I griping about? And, really, perhaps I'm
not their customer anyway. I'm using
<a href=http://extensions.services.openoffice.org/project/ooo2gd id=xyqd title="OpenOffice and Google Docs to write this">OpenOffice
and Google Docs to write this</a>.</p>  <p>
But the question is -- is it too late?
<a href=http://docs.google.com id=ftau title="Google Docs">Google Docs</a> is
already thoroughly entrenched, and even Apple's
<a href=http://www.apple.com/iwork/ id=c3g5 title=iWork>iWork</a>
/<a href=http://www.apple.com/ilife/ id=p5_8 title=iLife>iLife</a> suite are in
the cloud already.
<a href=http://www.iTunes.com id=uulm title=iTunes>iTunes</a>, the number one
music application and service by far, has been a thick-client/cloud hybrid since
day one, and has been doing it successfully. Even infrastructure has
successfully, and comercially, been made available through services like
<a href=http://code.google.com/appengine/ id=ybg_ title="Google's App Engine">Google's
App Engine</a> and
<a href=http://aws.amazon.com/ec2/ id=v66t title="Amazon EC2">Amazon EC2</a>.
The list goes on and on (photo albums, email, etc.) for all the things Microsoft
might do that it doesn't do. It seems like the only thing they have left,
realistically, is the operating system itself. And in this respect, perhaps
Windows Azure is viabe. After all, I haven't yet heard about a cloud-oriented
version of OS X or Linux, though I'm not sure what makes Azure cloud-friendly in
the first place.</p> <p> Perhaps he can turn the ship around. So far, I'm impressed with what I've seen. 
 What, exaclty, does "success" look like for Microsoft, though? 
</p>
</p>
  			<a href="jl/blogPost/if_you_build_it_they.html"><h1>If You Build It, They Will Come: Communally Crazy</h1></a>
  			<p>25 January 2009</p>
  			<p>
<p> Do the web 2.0 communities remind any one else of the glory days of the wild dot-com boom (and bust?) of the early 2000s? </p>
<P> The communal web (isn't that redundant?) has inspired so many different applications that one wonders why any startup would want for  a business model. Upstart and favorite Twitter just raised <A HREF="http://www.techcrunch.com/2009/01/24/twitter-raising-new-cash-at-250-million-valuation">250 million US</A>   through an unknown VC. Meebo <A HREF="http://techland.blogs.fortune.cnn.com/2008/04/30/meebo-snags-25-million"> went through similar</A>  rounds of funding a year ago. At the time, it was unclear what the business model behind the then naked/unadorned Ajax-powered IM client would be. Twitter, with a similarly large proliferation, faces the same question: what is the business model? Meebo.com solved the problem by adding advertising to its property, which works well because the property is what the users interact with. Twitter, I imagine, is something that people use from their cell phones, from desktop rich clients like Spaz and Twitterific, and so on. Twitter is the network, not the home page. I don't know - short of suffixing every 140 character update with an ad on all outbound messages – how they can monetize it. </P>
<P>  
But, as we've seen time and time again, if you build it, they will come. Or, they will build it on top of what you built. Or something. Twitter is valuable as it's become the standard bearer for any type of "status" requirement. <A HREF="http://www.facebook.com/apps/application.php?id=2231777543">Facebook</A>,  <A HREF="http://www.plaxo.com">Plaxo.com</A>, etc, all incorporate it. You can embed a Twitter status on your home page, should you like. It's become an platform for an essential part of a community: presence. </P>
<P>  
In the same vein, Facebook has become so menacing a threat to established giant MySpace by encouraging development on top of its platform, where MySpace had done everything possible to thwart it. MySpace failed to provide an API and a marketplace for such improvements. There were ambitious “hacks” that tried to integrate with the site, but were ceremonially squashed through MySpace's various “security” enhancements. This is the same tact that Microsoft took with Windows in its early growth: it made development on top of Windows a very cheap proposition and promised an entrenched market for those applications. 
Now a days it seems like Facebook integration's de rigueur, an absolute must for any application wishing to get off the ground and into the hands of a large audience quickly. There's also a cross pollination between larger apps, such as the one between the various applications on the Facebook platform itself and other standalone services, like Yelp.com, or the new <A HREF="http://losangeles.beta.citysearch.com/listings?geoId=56050&what=restaurants&where=los+angeles,+ca">Citysearch beta</A>. </P>
<P>  
There's no way to monetize these integrations in of themselves except that they broaden the applicability of the application.  </P>
<P>  
The iPhone has had a simialar effect; it's marketplace has birthed many different applications that have been carried to exorbitant levels of profitability simply by being accessible to the audience that the iPhone application marketplace carries with it. Witness: the <A HREF="http://blog.wired.com/gadgets/2008/12/iphone-fart-app.html ">iFart application</A>.</p><P> 
This all makes me wonder: are we seeing another dot-com boom? Do these new folksonomy-based applications rely on a quality that isn't by itself profitable and achieve profitability solely through VC investment? </P>
</p>
  			<a href="jl/blogPost/new_article_on_infoq_com.html"><h1>New article on Infoq.com</h1></a>
  			<p>20 January 2009</p>
  			<p>
<p> I wrote an article about getting started with Spring Integration, available at <a href="http://www.infoq.com/news/2009/01/Spring-Integration-Joshua-Long">Infoq.com</a>. If you get a chance, please check it out. </p>
</p>
  			<a href="jl/blogPost/new_entry_on_artima_com.html"><h1>New Entry on Artima.com: &quot;Modeling to Avoid Hacking Your Model in ORM Mapping Format&quot;</h1></a>
  			<p>17 January 2009</p>
  			<p>
I just posted another blog entry on Artima.com, called "Modeling to Avoid Hacking Your Model in ORM Mapping Format," and naturally would appreciate any feedback. The entry is available <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=247671">here.</a> The entry is a discussion on modeling, and its advantages, using either UML or ER. A solution using Maven is provided to provide a work flow using ER modeling.
</p>
  			<a href="jl/blogPost/web_framework_utility_llibraries_urlrewrite.html"><h1>Web Framework Utility Llibraries: URLRewrite, JAWR, DWR, and HeaderFilter</h1></a>
  			<p>09 January 2009</p>
  			<p>
<p>
I've had the dubious pleasure of doing some web programming in the last week (actually, 4 days) and I've had quite a few different requirements which, frankly, I was surprised to find weren't eally me by the framework I was using (Spring MVC). Instead, I came upon a sle of single-focused, quality components out there that I think ever Java web developer should have in his or her arsenal. These component usually work across frameworks and are Servlet agnostic. They seem to be reasonably well documented. While I promise I will go into great depth about them in a future post, I want to at least list them here right now i the hopes that they save some people some trouble.  </p>

<H3>Url Rewriting For Servlets</H3>
<p>
I've had to do some URL rewriting to support search engine optimization. SEO is something of a black art, I admit, but there' still something to be said for building your web application wit search engine navigability in mind.  Naturally, this means man things, not the least of which exposing your pages on friendly book markable URLs. Spring MVC supports accessing low level servle configuration, but what is most appropriate for this sort o requirement is mod_rewrite. Mod_rewrite let's you map URLs coming into the server and transform them into other types of URLs, which then are used to access HTTP resources on your application. I didn't have - and didn't want to commit to – a full installation of Apache HTTPD or anything like that. Instead, I wanted something inside the servlet container. I stumbled upon <a href="http://tuckey.org/urlrewrite/">UrlRewriteFilter</a>. It's fairly well documented and definitely powerful enough for 80% of your usecases. It can even match against request variables. It's got support for wildcard syntax as well as regular expressions. My regex-fu was strong enough that it just made sense to use that from the get-go. </p>

<h3>JavaScript, CSS Minification and GZIP Compression  </h3>
<p>
I had to deploy quite a bit of CSS and JavaScript, but wanted to take advantage of the compression savings of gzip, css and JavaScript minification and of the enormous HTTP latency reduction had by consolidating my JavaScript and css into one file. Lacking the discipline and time, I turned to <a href="https://jawr.dev.java.net">JAWR</a>, which does all of the above an plays nicely with your choice of frameworks. It's got smarts enough that you won't have to have to deploy/build yourself, like knowing whic revision of IE 6 should not be served gzip content. I wrote about this <a href="http://www.joshlong.com/jl/entry/20080412">filter before</a>.  </p> <h3>Ajax</h3> <p>The following are pretty commonly known, but they bear repeating.
I needed to do Ajax and talk to a simple Spring bean I was exposing as a client facade from the servlet. I used a package called <a href="http://directwebremoting.org">DWR</a>, which stands for "Direct Web Remoting." This package has been well documented and covered elsewhere. Suffice it to say that it allows you to invoke methods on a JavaScript object from your web page and it takes care of marshaling that to the server and invoking methods on a server-side bean. It's got all sorts of options and definitely merits some investigation of your own.  </p> 
 <h3>Performance With YSlow and <code>Expire Headers</code></h3>
<p>

I wanted to make sure that any page elements I use were reasonably performant and in line with good standards like what the <a href="http://developer.yahoo.com/yslow">Yslow</a>  plugin from Yahoo! Recommends.  One of the main improvements was  sending <code>Expire Headers </code> for  <code>*.jpgs</code>, <code>*.gifs</code>, <code>*.css</code> and <code>*.js</code> resources. I did this using <a href="http://juliusdev.blogspot.com/2008/06/tomcat-add-expires-header.html">a very powerful filter by "Julius, A simple dev", to add headers to requests</a> whose code is similar in spirit to this <a href="http://www.onjava.com/pub/a/onjava/2004/03/03/filters.html">oldie but goodie by Jason Falkner</a>. Either is powerful enough to do the job. 
 </p>  
<h3>Synergies of the Solutions </h3> 
<p> The synergy between JAWR and DWR is wonderful. DWR tends to expose your beans as JavaScript, which it dynamically writes for you. The onus is on you to include that JavaScript file in your page. So, if you have 10 server side beans and you want to talk to all of them on the client, then you'd end up with 10 different HTTP requests and JavaScript <code>&lt;script&gt;</code> tags. JAWR, however, sports an integration option with DWR and will treat your dynamic DWR URLs exactly as if they were standard JavaScript using special configuration elements.</p>
<p> The synergy between JAWR and the HeaderFilter's been wonderful. JAWR's gzip compressing and minifying content. It servers content on random URLs based on a hash of the content itself. So, if content changes it gets a new URL, which is immune to the cache issue, if you need to upgrade your application. Otherwise, the existing content is cached for a long time. Beautiful! 
</p>
 <p>What a week! I had a fascinating time building this solution. Because of all the techniques I've used, the application is now very SEO friendly, very performant (it has a grade 'B' on the YSlow plugin, which Yahoo.com itself does, as well. I wouldn't want to have had to do all that manually, though. Thanks again to the creators of those many brilliant utilities!</p> 

</p>
</p>
  			<a href="jl/blogPost/my_other_blog_on_artima.html"><h1>My other blog on Artima.com, and my first post, &quot;The New Old&quot;</h1></a>
  			<p>18 December 2008</p>
  			<p>
<p><a href="http://www.artima.com/weblogs/viewpost.jsp?thread=245528">The
New Old</a>, my first post on Artima.com</a>. Check it out. Let's
talk.
</p>
</p>
  			<a href="jl/blogPost/a_journey_of_a_thousand.html"><h1>A journey of a thousand miles begins with a single step: “Programming Collective Intelligence”, by O&apos;Reilly</h1></a>
  			<p>17 December 2008</p>
  			<p>
<p> Working through my reading list. You might infer that I'm a bit
behind because this review is about a book published in September of
2007.</p>
<p>You'd be correct.</p>

<p>"Programming Collective Intelligence" is astonishingly clear and
concise in the examples, and a brilliant introduction to the
foundations of a lot of fields of study. A well presented discussion
on many of the key items in the AI/algorithm world. Why is this so
worth repeating? Because these concepts – genetic algorithms/ AI /
optimization, etc, are NOT common nor are they simple. Anybody who
manages to make them appear so is worth of praise. The examples are
further interesting because they're written in Python, which is as
simple as a language can get. (Digression: Python 3.0's out! How come
I didn't see a flurry of news? How come there was no ball drop in
Times Square? I'm excited, and proportionately confused by some
people's reactions, <a href=
"http://www.mooseyard.com/Jens/2008/12/python-30-whats-the-point/">like
this one</a>. Get your <a
href="http://python.org/download/releases/3.0">copy while it's
hot!</a>
</p><p>
The book is sort of the first rung of knowledge on a whole gamut of
complex topics, but that's OK because these topics become approachable
only once you've gotten the introductory tour. Finding that "tour",
the source for the inevitable epiphany, is what's so hard about these
concepts. It's even further difficult because it's not like there's a
lot of mainstream thinking going on here and these concepts just
represent a slight tangent on what you're already dealing with.
Anything but. People who know why they want to use something like
JBoss Rules already knew it. You'll notice there's no good "sales"
rhetoric on the JBoss website. It's the chicken and egg problem.
Understanding the concepts in this book is key to caring about, and
eventually understanding, things like JBoss Rules.
</p> <p> All in all, a very worthy read. If nothing else, it's a good
refresher.   </p>
</p>
  			<a href="jl/blogPost/a_quick_guide_to_posting.html"><h1>A Quick Guide to Posting To (A Few) Blogs with Java</h1></a>
  			<p>17 December 2008</p>
  			<p>
First, How to Post to Any API that supports the (admittedly) outdated
MetaWeblog API.
<p>
<b>How to Publish A Blog Entry For Roller 4.0 Software</b>

I found very little in the way of a solid API in Java on top of this
XMLRPC API. However, I did find quite a bit using just good old Apache
XMLRPC 3.0. Here's how that solution looks:

<pre><code>
 /**
 * @param serverUrl if youve unpacked a stock Roller 4.0 url, it's
likely going to be http://www.YOURHOST.com/roller-services/xmlrpc
 * @param user the user you have configured on Roller itself
 * @param the password for the user name
 * @param blogId the id of the blog. When you log into the Admin
screen most pages will mention it.
 * @param title the title of the post
 * @param content the content of the post (can be in HTML)
*/
  public String createPost( String serverUrl, String user, String
pass, String blogID, String title, String content) throws IOException
{
        String ret = null;
        try {
            XmlRpcClientConfigImpl config = new XmlRpcClientConfigImpl();
            config.setServerURL(new URL(serverUrl));
            XmlRpcClient client = new XmlRpcClient();
            client.setConfig(config);
            Map<String, Object> m = new HashMap<String, Object>();
            m.put("title", title);
            m.put("description", content);
            m.put("dateCreated", new Date());
            m.put("category", "Java");
            Object[] params = new Object[]{blogID, user, pass, m, true};
            ret = (String) client.execute("metaWeblog.newPost", params);
        } catch (Throwable th) {
            System.out.println( "blam!") ;
        }
        return ret;   // a unique ID generated by Roller
    }

</code></pre>

</p>


<P>
<b>How to do the same thing with Blogger Usign Google's GData.</b>
 <pre><code>
 GoogleService service = new GoogleService("blogger", "");
        service.setUserCredentials(user, pass);
        Entry myEntry = new Entry();
        myEntry.setTitle(new PlainTextConstruct(title));
        myEntry.setContent(new PlainTextConstruct(content));
        Person author = new
Person(StringUtils.defaultString(authorName), null, null);
        if (!StringUtils.isEmpty(authorName)) myEntry.getAuthors().add(author);

        URL postUrl = new URL("http://www.blogger.com/feeds/" + blogID
+ "/posts/default");
        return service.insert(postUrl, myEntry);
</code></pre>
 </P>

<p> The Google Data stuff was using the Java Google Data APIs. The
XMLRPC library is quite formidable. I'd not recommend using Apache XMLRPC
3.1.1 from Maven, as it didn't seem to be a valid artifact. </p>
</p>
  			<a href="jl/blogPost/anyone_else_noticing_the_extreme.html"><h1>Anyone else noticing the extreme slowness of Java applications on Ubuntu 8.10?</h1></a>
  			<p>17 December 2008</p>
  			<p>
<p> Anyone else noticing the extreme slowness of Java applications on
Ubuntu 8.10?  I upgraded and was expecting that the seminal Java 6u10
(strike that!<b> 11! </b>)  would do better than this.
</p>
<p> I was expecting draggable applets and for the performance of my
Java applications to not deteriorate. I was disappointed on both
fronts.

If you're having issues with IntelliJ crawling, a lot of people have
downgraded to 8.04 Ubuntu. </p>
</p>
  			<a href="jl/blogPost/apple_news_mobile_and_otherwise.html"><h1>Apple News, Mobile and Otherwise</h1></a>
  			<p>17 December 2008</p>
  			<p>
<P><img STYLE = "float:left; padding-right:10px;" width = "100"
src="media/17842"/>
 <a href="http://livelabs.com/seadragon-mobile/" target =
"_blank">SeaDragon</a>, an application from Microsoft that extracts
the "Deep Zoom" component from Silver Light and enables it on an
iPhone, has been released to the Apple Application Store (Wonders
never cease!) because the Apple iPhone has a fantastic GPU.
 </p> <p>What's very interesting to me about this feature is not the
mobile component, but <a href="http://livelabs.com/seadragon-ajax/"
target = "_blank">the ajax one</a>.


 <p> <a href="http://www.internetnews.com/bus-news/article.php/3791651/MacPainful+Apple+Bows+Out+of+Macworld+Expo.htm"
target="_blank">Apple, Steve Jobs, bow out of MacWorld Expo.</a>
 This fuels the usual debate on Steve Jobs' health, as usual, and
rumors run rampant. What do you think? Sick? Disincentivized?
 </p>
<p>
       PLUS: My new favorite iPhone Application: <a
href="http://www.techcrunch.com/2008/12/16/taxi-magic-hail-a-cab-from-your-iphone-at-the-push-of-a-button/">Taxi
Magic</a>. Seriously -- how slick is that? When do you usually need a
Taxi? When you're most impaired, likely, say perhaps after drinking?
One button. Finally, technology for fun and profit.
</p>
</p>
  			<a href="jl/blogPost/how_to_ride_spring_integration.html"><h1>How to Ride Spring Integration Head</h1></a>
  			<p>13 December 2008</p>
  			<p>
<p>How to build Spring Integration (for Maven) locally... 
Posting this for my own reference as much as anyone else.</p> 
<p>
<code>svn co  https://src.springframework.org/svn/spring-integration/trunk/build-spring-integration <br/>
cd trunk/build-spring-integration <br />
ant clean jar package publish-maven-local  <br/>
</code>
</p>
</p>
  			<a href="jl/blogPost/maven_2_0_9_andromda.html"><h1>Maven 2.0.9, Andromda 3.[2,3]</h1></a>
  			<p>06 December 2008</p>
  			<p>
<P> I was building a project I have that's using the <a href="http://galaxy.andromda.org/docs-3.3">Maven Andromda plugin</a> to cross compile UML class diagrams into Java EJB3 entity classes. The plugin's worked flawlessly for a long time now, but this time it failed. It complained that it couldn't find the UML file that was referenced in the configuration file. It's no wonder: the file path it was looking for was doubled up, that is, it was equivalent to <code>/myfolders/foo/uml.uml2/myfolders/foo/uml.uml2</code>. I did some research and <a href="http://galaxy.andromda.org/forum/viewtopic.php?t=5862&sid=0d9daa204dea84e3141a98af9c57ea3d">found this bug report</a>. This proves that it wasn't my Andromda installation, but the Maven installation. This makes sense as I'd just recently upgraded from <u>Ubuntu Hardy Heron (8.04)</u> to <u>Ubuntu Intrepid Ibex</u> (what's an Ibex?; 8.10) and the package I was using (<code>maven2</code>) had been updated to 2.0.9. So, the moral of the story here is: <b>make sure your Maven package didn't change under your nose.</b>
</p>
</p>
  			<a href="jl/blogPost/javafx_1_0_released.html"><h1>JavaFX 1.0 Released</h1></a>
  			<p>04 December 2008</p>
  			<p>
<p>Finally, <a href="http://www.javafx.com">JavaFX 1.0</a> – it's been 2 long years, but I'm glad to see this thing get going. Even if it shares the same fate as Silverlight and becomes a clumsier Flash, it's still a MUCH more agile Java. As the libraries enabled via JavaFX are all just Java code, you can still leverage them in standard Java. You needn't use JavaFX, for example. This means that the amazing integration with video and audio is yours for the taking. 
 </p>
<p>
It is unfortunate that they haven't released the Linux bits, yet. But that will change, and in the meantime, 1.0 is chock full of goodies. The blogosphere's been abuzz with information leading up tot the 1.0 release. People are interested in graphics on the Java platform (again?)! I've seen everything from information on using <a href="http://blogs.sun.com/mobility_techtips/entry/how_to_develop_and_run">Java Webstart with JavaFX</a> (do you remember Java Webstart? That was something I always wished had taken off), information on using the toolkit <a href="http://m2-javafxc.sourceforge.net ">with Maven</a>, information on using it <a href="http://www.weiqigao.com/blog/2008/12/04/using_javafx_1_0_on_linux.html">on Linux</a> (why does every neat graphical platform have to support Linux last? Flash: I don't understand why Flex took so long to get there. Silverlight... well, I'm pleased it ran on more than one version of Windows, so no complaints, I suppose as I should've known. But Java?) and <a href="http://java.dzone.com/articles/javafx-10-this-could-be-someth">more</a>. 
 </p>
<p>
I have some questions: what's the video streaming solution look like on this platform? On the Flash platform you typically use something like LightHTTPD or Nginx and use Flash Video (or, now, H264). I understand that On2 is going to be providing a format for video (similar to FLV?) just as they did for the Flash platform. Do the same rules apply with respect to security and performance? What about remoting? My understanding is that JavaFx will have considerable support for this (which should come as no surprise given the incredible wealth of remoting toolkits on the Java platform) and will even respect the crossdomain.xml file (which comes from the Flash platform). 
 </p>
 <p> All in all, this is exciting and I can't wait to see where the platform goes from here. The other redeeming value about JavaFX is the unification of the paradigms: working in J2ME meant learning one set of APIs (CLDC, Midlets, J2ME Polish, and more recently, LWUIT), working on Java on the desktop meant SWT, or Swing (which meant... clawing your eyes out using a toothbrush), and working on the server meant using a web framework that didn't have any rich client functionality. Now, it's JavaFX for the desktop, the client, the mobile clients and soon, the TV. This is very promising. </p>
</p>
  			<a href="jl/blogPost/spring_integration_1_0_released.html"><h1>Spring Integration 1.0 Released</h1></a>
  			<p>03 December 2008</p>
  			<p>
<p>Spring Integration is almost ready (<a href="http://www.theserverside.com/news/thread.tss?thread_id=52095">website updates notwithstanding!</a>) </p><p>  
Spring Integration is an API for building integration solutions using Spring. It works, conceptually, very much like Axway Integrator or Mule or ServiceMix or Petals or, well, you get the idea: it provides functionality to respond to messaging / interactions in a system and route / transform the message to an endpoint. These messages could be JMS, FTP submission, a file suddenly appearing, etc. Spring Integration is an API that provides ESB like functionality. Usually, the ESB is a server to which application integrations are deployed. This API flips that idiom on its head and lets your application become the endpoint by which integration is achieved. </p><p>Spring Integration itself is significant because it codifies in a Spring API  the whole field of knowledge surrounding ESBs, which itself can be said to stem from <a href="http://www.amazon.com/Enterprise-Integration-Patterns-Designing-Addison-W
esley/dp/0321200683">Enterprise Integration Patterns</a>: this has the boon of making it a commodity. And of course, there are the usual reasons: it works better for the things it does, it's well tested, easy-to-test, etc. But you knew about those already.   </p><p>

I'm waiting with baited breath for the Maven releases :-) 
   </p><p>
Congratulations to the Spring Integration team! Wonderful tool and I look forward to being able to recommend it moving forward. <a href="http://www.springsource.com/download/community?project=Spring%20Integration">Get the bits!</a>   </p> 

<P><B>Update</B>: The old way still works and they've updated those bits already if you're <a href="http://forum.springframework.org/showpost.php?p=194665&postcount=6">looking to get the Maven jars</a></p>


<P><B>Update</B>:I linked to the wrong book and gave the wrong title, despite having the correct book sitting on a computer tower right next to me. Now <i>that's</i> impressive! Thanks to Mark Fisher (lead on the Spring Integration project!) for the correction.  </p>
</p>
  			<a href="jl/blogPost/intellij_8_0.html"><h1>Intellij 8.0</h1></a>
  			<p>11 November 2008</p>
  			<p>
<p><a href = "http://www.intellij.com">IntelliJ</a> <a href="http://www.jetbrains.com/idea/features/newfeatures80.html">8.0's</a> <a href="http://www.jetbrains.com/idea/features/25-can.html">a large</a> step forward (and none back!)</p>
<p>I just downloaded the latest and greatest revision of Jetbrain's flagship product, Intellij IDEA 8.0.  It is, in a word, pretty awesome. This is due in large part to the refactoring of the core that has occurred between 7 and 8 to improve the application of the IDE for different languages. Support includes, but is not limited to, Groovy, Scala, Ruby, and Java (wherein you also have a dozen different DSLs with which IDEA contends admirably). </p>
<p>What seems to happen with Intellij is that they include  feature and support for a feature that's, shall we say, half baked. Don't get me wrong: a half baked Intellij feature's usually worth 2 or 3 fully baked Eclipse features. Compared to the usual level of quality, some times things slip through that don't meet expectations but that do – nonetheless – work. Where 7.0 of the IDE was pretty revolutionary, version 8.0 seems evolutionary (at least in terms of features.) </p>
<p>Instead, things are better polished, faster. Maven support was good when it was introduced in 7.0. Now, it's remarkably well thought and configurable. Intellij has supported displaying test coverage data when unit tests are running. Now it's possible to jump from a class to a test case. Ever wanted to be able to ride the data flow analysis and see where values in the system come from? Now you can. The support for Subversion and Subversion 1.5 is pretty stellar, and includes the ability to see which version of a change have already been integrated into a branch. Actually, the Subversion support is one of the things I've long liked from Intellij. Eclipse hasn't until version 3.4 officially supported Subversion at all. Eclipse 3.4 includes part of the functionality for accessing Subversion, but due to licensing issues you're on your own to install the remaining bits yourself. Intellij already had support for Flex (and the best JavaScript integration I've ever seen), but not much more than support for referencing and coding ActionScript. Now, you can almost effectively remove Flex Builder from your life if you're not planning on doing anything graphical. </p>
<p>And of course, there are new features, too. Support for Seam, better support for Jruby (which was already being called the best in the industry, and is now the extracted core of Intellij's RubyMine product), 20+ new intelligent refactoring capabilities, the ability to assign and swatch of text a “language” so that Intellij can enable proper editing for it, and the UML capabilities round out the features. One of my favorite new features is the ability to... remove... features. Intellij has a LOT of features. While they're not obtrusive or glaringly present like an overloaded Eclipse instance can be, they are there when you launch the application and they consume RAM.  I loaded IntelliJ and it gave me a Plugin configuration wizard by which I could <I>disable</I> plug ins. I'm not likely going to be using the Perforce SCM integration, and nor am I likely going to be using the FreeMarker and Struts configuration tools. So, why not disable them?  The speed boost at both runtime and startup is marked. 
</p>
<P>
There are many more new features to like in this tool as well as the coder-friendly editor itself, which is just as tight a fit now as it's ever been. IntelliJ has always taken refactoring to a new plateau hiterto unmatched by Eclipse or Visual Studio, and this release is now exception. </p><P>
What I didn't like: the tool had some JSP validation errors because of a URL that needs to be downloaded to resolve. In previous versions a little intelligent tooltip would prompt you to let IntelliJ download the file. Not so much in this case. Instead, I was prompted by IntelliLang's tool tip, asking me if I wanted to declare the URL to be a fragment of .. insert your favorite schema/dialect/language/grammar here. 

Annoying. I still don't know how to get the old functionality to return. Thankfully, in this case, the code was one "old" style JSP and the rest of the site consists of JSP Documents, which all displayed and edited perfectly. And quickly! IntelliJ is pretty quick, anyway, but it seems like the price you pay for invalid HTML is more pronounced in the IDE than, say, with DreamWeaver. )
 </P> <p>All in all, a worthy upgrade and I wholeheartedly recommend it.</p>
</p>
  			<a href="jl/blogPost/how_to_get_your_twitter.html"><h1>How to get your twitter results visible on your site</h1></a>
  			<p>08 November 2008</p>
  			<p>
Matt Raible added <a href="http://www.twitter.com">Twitter</a> updates to his blog. (<a href="http://www.raibledesigns.com">Exhibit A</a>). I decided to the do same. First, you'll need the twitter.js JavaScript. This can be found <a href="http://twitterjs.googlecode.com/">here</a>. I would download <a href="http://twitterjs.googlecode.com/files/twitter-1.11.2.min.js">this one</a>.  Install that script onto your site, ie: 
 <pre><code>
 &lt;script type = "text/javascript" src="/js/twitter-1.11.2.min.js" &gt;&lt;/script&gt; 
 </code></pre>
</p>
<p> Finally, add the code on your page to configure and use it.  </p>
<p>This looks something like this: 
<pre><code>&lt;script type = "text/javascript"  &gt; 
     getTwitters('twitter_box', {
        id: 'YOUR_TWITTER_ID', 
        prefix: '', 
        clearContents: false, // leave the original message in place
        count: 3, 
        withFriends: true,
        ignoreReplies: false
    });
&lt;/script&gt;   </code></pre></p>

<p> This javascript tells the script to load the latest 3 updates (<code>count</code>) in the HTML element (in my case, a regular old DIV element) having ID "twitter_box". It tells the script that, if there's already something inside that DIV element, it should merely append to it, not overwrite it. </p> 

<p>The <code>prefix</code> attribute let's you specify what code you want to have inserted above and beyond the link and status text. This javascript has its own little macro substitution routine! You can dynamically insert variables like the url of your tweet ("<i>tweet</i> being what a single status update on twitter is called.) into the prefix string and it'll get replaced at runtime. </p> 

<p>Finally, make sure to insert the HTML element where you want the Twitter updates to display somewhere on your page. 
</p><p>The html is easy, and could be as simple as <br/>
<code> <PRE> &lt;div id = "twitter_box"&gt; My &lt;a href="http://www.twitter.com"&gt;Twitter.com&lt;/a&gt;. &lt;div&gt;  </PRE></code> 
 </p>
<p> Thanks, Matt!</p>
</p>
  			<a href="jl/blogPost/the_code_that_almost_toppled.html"><h1>And now for something completely different, OR, The code That Almost Toppled Microsoft. Almost.</h1></a>
  			<p>06 November 2008</p>
  			<p>
<p>I just visited the Phillipines. While there, my-brother-in-law gave me a hard disk with 60GBs of photographs. I
    wanted them on Flickr. Complicating matters further were the photos that my girl's photos. Her photos - every
    blessed one of them -- were perfect. Mine, on the other hand, were an affront to color, tone, lighting and God.
    Nothing short of a week in front of GIMP and Flickr could save them. </p>

<p>
    Nothing, that is, except perhaps some automation. I devised a plan: auto color correct the images using ImageMagic
    (You know how Photoshop has the "Auto Levels" command that transforms images from Warhol's to Monet's?), correct
    some of the EXIF issues I had, and then upload all 65GBs of photos to Flickr. </p>
<h2>Approach </h2>
<P>
    I chose Ruby for the solution because I've worked with some of these APIs before. I know how I would approach this
    problem from Java: <a href="http://jmagick.wiki.sourceforge.net">JMagick</a> for ImageMagick access, <a
        href="http://flickrj.sourceforge.net/">FlickrJ</a> for Flickr, and I'd probably just shell out to
    <a href="http://www.sno.phy.queensu.ca/~phil/exiftool"><code>exiftool</code></a>, which is a command line tool on
    Linux. I've disabused myself of the notion that this script going on to become the 100 lines of code that topples
    Microsoft, and thus I don't care if it just works on Linux. </p>
<P>
    I chose not to use Java because, frankly, I'm really picky about how I build my Java applications. Picky, to the
    point that sometimes it hinders me when I'm just trying to express an application. Unless it's for the most trivial
    of applications (where "trivial" most certainly does NOT include assimilating 3 different libraries and performing
    image processing for 2 days) I can't help but introduce elements from my war chest. </p><p>My war chest is derived
    from years of doing this singular task, from programming in Java. Years of experience have taught me to readily
    employ, for example: Maven, unit testing, persistence (so that I can keep track of what's been processed, for
    example) and with all of that, why not Spring? After all, I was going to write to interfaces anyway. My years of
    experience have taught me that I should plan the application out a little bit before I take to coding. After all, by
    the time I've integrated all those APIs, change will be slower going, and it's easier to refactor UML than DDL. My
    years of experience have made me slow for the small applications and fast for the big applications. </p>
<p>I chose not to use Python because I didn't know the APIs for Flickr that well in Python. Simple enough. I always use
    Python. It's the language I write my one-offs in. It's the language I go to when I want to express a solution
    without UML. It would have been perfect for this job. It's most redemptive quality is, in fact, how frequently I
    find myself thinking it would be perfect for a job. It inspires hope. But again, I don't know the API very well, no
    need to get lost in the weeds of Ruby offers a paved road. </P>
<h2>Prerequisites </h2>
<p>The players having been selected, I wrote a small checklist of what I'll need.</p>
<OL>
    <LI>

        <a href="http://www.flickr.com/services/api/keys/apply/">Flickr API License key</a> Make sure you choose the non
        professional version.
    </li>
    <li> Photos</LI>
    <LI>Ruby compiler. And the gem command, definitely don't forget those. You'll need some packages to get this
        running. I installed the packges using my Operating Systems package manager. I'm using Ubuntu Hardy Heron. The
        script I used to reproduce the solution on another machine (and thus to whose viability I can speak) is: <br/>
<PRE><CODE>
    sudo apt-get install libimage-exiftool-perl
    sudo apt-get install libfreetype6-dev libfreetype6
    sudo apt-get install libwmf0.2-7 ghostscript libjpeg62
    sudo apt-get install libpng3 libpng3-dev
    sudo apt-get install imagemagick
    sudo apt-get install make gcc autoconf ruby rubygems ruby1.8-dev libmagick9-dev

    sudo gem install rflickr
    sudo gem install rmagick
    sudo gem install mini_exiftool
    sudo gem install openwferu-extras
</CODE></pre>
    </li>
</oL>

<h2>Code! </h2>
<P>
    I took large swatches of this from loadr.rb script that ships with the Flickr library's source code. The application
    is anything if not fragile, and perhaps not even very efficient, but it does work, and that's what mattered here.
</P>
<PRE><CODE>#!/usr/bin/ruby

    require 'rubygems'
    require 'pp'
    require 'find'
    require 'RMagick'
    require 'fileutils'
    require 'mini_exiftool'
    require 'flickr'

    <B>#you will get these values when you sign up with Flickr. Make sure you choose the non professional version. </b>
    $flickr_email = 'YOUR_YAHOO_EMAIL'
    $api_key = 'YOUR_YAHOO_FLICKR_API_KEY'
    $shared_secret = 'YOUR_YAHOO_SHARED_SECRET'
    $flickr = Flickr.new("/tmp/flickr.cache", $api_key, $shared_secret) <B># change the path as you like </b>
    setname = 'the_set_to_which_I_want_to_upload_these_photos'

    def filename_to_title(filename)
    arr = filename.split(File::SEPARATOR).last.split('.')
    arr.pop
    my_title = arr.join('.')
    end

    <B># this will run each time. The first time it runs
        # it will cause Flickr to display a screen prompting you
        # to give permission to the application, which you will do.
    </B>
    def auth_rflickr(api, secret)
    unless $flickr.auth.token
    $flickr.clear_cache
    $flickr.auth.getFrob
    url = $flickr.auth.login_link
    `firefox '#{url}'`
    puts "A browser is being opened to bring you to:\n#{url}. When you are done authorizing this application, hit
    enter."
    gets
    $flickr.auth.getToken
    end
    end

    <b># change the paths as you like </b>
    dir_for_output =Dir.new( FileUtils.mkdir_p("../output"))
    dir_for_input = Dir.new "/home/yourUser/Desktop/photos/"

    <b># here we run through the input folder and examine
        #the contents, building up the array of files to upload.</b>
    files= []
    Find.find(dir_for_input.path) do |path|
    if !FileTest.directory?(path)
    tags = File.dirname(path )[dir_for_input.path.length .. -1]
    if tags[-1]== '/' or tags[0] == '/'
    tags = tags[1 .. -1]
    end
    if ['.jpg', '.tiff', '.tif'].include? File.extname(path).downcase <b>#only include images</b>
    files << path
    end
    end
    end


    auth_rflickr($api_key, $shared_secret) unless $flickr.auth.token

    <b># clean up the existing tmp folder</b>
    if File.exists?(dir_for_output.path )
    FileUtils.rm_rf(dir_for_output.path )
    end

    if not File.exists?(dir_for_output.path )
    if not Dir.mkdir(dir_for_output.path )
    raise "Can't create the directory!"
    end
    end

    sets = $flickr.photosets.getList
    set = sets.find{|s| s.title == setname}
    set &&= set.fetch

    eligible = (set ? set.fetch : [])
    to_upload = []
    uploaded = []

    files.each do |filename|
    my_title = filename_to_title(filename)
    photo = eligible.find{|photo| photo.title==my_title}
    if photo
    uploaded << photo
    else
    to_upload << filename
    end
    end

    tix = []
    to_upload.each { |fn|
    <b> # here's where the most interestig work is done. </b>
    ifile= File.new fn<b> # output file</b>
    ofile = File.join( dir_for_output.path, File.basename(fn))<b> # input file </b>
    before = Magick::Image.read( ifile.path ).first<b> # read in an image using ImageMagick </b>
    after = before.normalize
    after.write( ofile )
    exif_out = MiniExiftool.new ofile
    <b> # open the file with MiniExiftool, which wraps exif
        #tool, and perform operations on the exif metadata.</b>
    exif_in = MiniExiftool.new ifile.path
    exif_out['Orientation'] = exif_in ['Orientation']
    puts 'couldnt save exif data!' if !exif_out.save
    tags = File.dirname(fn )[dir_for_input.path.length .. -1]
    if tags[0]== '/'
    tags = tags[1 .. -1]
    end
    if tags[-1] == '/'
    tags = tags.chomp
    end
    tags = tags.strip.split('/')
    tix << $flickr.photos.upload.upload_file_async( ofile, filename_to_title(ofile),
    nil, 'tag1 tag2 tag3'.split(' ')+tags)
    <b># change these tags as you need to. They will be used to categorize the images on Flickr. </b>
    }


    tix = $flickr.photos.upload.checkTickets(tix)
    while (tix.find_all{|t| t.complete==:incomplete }.length > 0)
    sleep 2
    puts "Checking on the following tickets: "+
    tix.map{|t| "#{t.id} (#{t.complete})"}.join(', ')
    tix = $flickr.photos.upload.checkTickets(tix)
    end

    failed = tix.find_all{|t| t.complete == :failed}
    failed.each { |f| puts "Failed to upload #{to_upload[tix.index(f)]}." }
    0.upto(tix.length - 1) { |n| puts "#{to_upload[n]}\t#{tix[n].photoid}" }

    uploaded += tix.find_all{|t| t.complete == :completed}.map do |ticket|
    $flickr.photos.getInfo(ticket.photoid)
    end
    uploaded.each do |photo|
    if set
    set << photo unless set.find{|ph| ph.id == photo.id}
    else
    set = $flickr.photosets.create(setname, photo, 'DESCRIPTION_HERE')
    set = set.fetch
    puts "creating set #{setname}"
    end
    end

</CODE></PRE>
</p>
  			<a href="jl/blogPost/testng_spring_testcontext_and_maven.html"><h1>TestNG, Spring TestContext, and Maven</h1></a>
  			<p>07 October 2008</p>
  			<p>
<p>If you've ever used the testing support in prior versions of Spring you know that it was essentially JUnit 3.x, oriented. There were ways to make those scaffolding classes work for (my personal favorite) TestNG or even Junit 4, but they largely were engineering hacks, not real solutions. For example, with the TestNG case you could override the setUp method and annotate it such that TestNG would call that method for setup, while also complying with Junit's interface requirements. Now there's a better way. Here's how I got it workiung with Maven and Surefire and TestNG 5.7. 
First, I added support for TestNG 5.7 (which is current as of this writing.):  </p>

<p>&lt;dependency&gt;  &lt;artifactId&gt;testng&lt;/artifactId&gt; &lt;groupId&gt;org.testng&lt;/groupId&gt; &lt;version&gt;5.7&lt;/version&gt; &lt;classifier&gt;jdk15&lt;/classifier&gt; &lt;/dependency&gt;</p>

<p>Then I added support for SureFire to the Maven POM: </p>
<pre>  &lt;plugins&gt; <br />               &lt;plugin&gt; <br />                   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; <br />                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt; &gt;<br />                     &lt;version&gt;2.4&lt;/version&gt; <br />                  &lt;configuration&gt; <br />                       &lt;suiteXmlFiles&gt; <br />                           <br />&lt;suiteXmlFile&gt;${basedir}/src/test/resources/testng.xml&lt;/suiteXmlFile&gt; <br />                        &lt;/suiteXmlFiles&gt; <br />           &lt;/configuration&gt; <br /> <br />     &lt;/plugin&gt;          <br /> <br />       &lt;/plugins&gt;</pre> 
<p>Finally, it comes time to write the test. Maven has a structure that's realized using the following command:</p>
<code>mkdir -p src/{test,main}/{java,resources}; </code>
<p>Your unit test code goes into <code>src/test/java</code> and your <code>testng.xml</code> goes into <code>src/test/resources</code>. </p>
<p>Here's an example of the testng.xml:</p>
<pre>&lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;<br />&gt; &lt;suite name=&quot;myProject&quot; verbose=&quot;5&quot;&gt; <br />  &lt;test name=&quot;serviceTests&quot;&gt; <br />        &lt;packages&gt; <br />           &lt;package<br />name=&quot;com.joshlong.myProject.test.services&quot;/&gt; <br />        &lt;/packages&gt; <br />   &lt;/test&gt; <br /> <br /> &lt;/suite&gt; <br /></pre><p>And, finally, here's an example of a test class that works:</p> 
<pre>package com.joshlong.myProject.tests.services;<br />import com.joshlong.myProject.utils.LoggingUtils;<br />import org.springframework.beans.factory.annotation.Autowired;<br />import org.springframework.test.annotation.DirtiesContext;<br />import org.springframework.test.context.ContextConfiguration;<br />import org.springframework.test.context.testng.AbstractTransactionalTestNGSpringContextTests; <br />// THIS ONE's IMPORTANT! There are one of these for each of the 3 frameworks you're likely to want to use. <br />import static org.testng.Assert.assertTrue;<br />import org.testng.annotations.BeforeMethod;<br />import org.testng.annotations.Test;<br /><br />/**<br /> * @author Josh Long<br /> */<br />@ContextConfiguration(locations = {&quot;classpath:service-context.xml&quot;, &quot;classpath:test-context.xml&quot;})<br />public class MyProjectTest extends AbstractTransactionalTestNGSpringContextTests {<br /><br />    @BeforeMethod public void announceClass() throws Throwable {<br />        loggingUtils.log(&quot;Inside of MyProjectTest!&quot;);<br />    }<br /><br /> <br />    @Autowired<br />    private LoggingUtils loggingUtils;  // this gets automatically injected from one of the contexts listed in the @ContextConfiguration annotations.<br /> <br />    @Test<br />    public void testBasicMath() throws Throwable {<br />        loggingUtils.log(&quot;foo()&quot;);        <br />        assertTrue( 1 &lt; 2, &quot;1 &lt; 2 -- pray that this is correct and that this test never does fail!&quot;);<br />    }<br />}<br /></pre>
</p>
  			<a href="jl/blogPost/gwt_continues_to_produce_beautiful.html"><h1>GWT Continues to Produce Beautiful Sites</h1></a>
  			<p>04 October 2008</p>
  			<p>
<p>I stumbled upon the samples site from <a href="http://phpgwt.com">phpgwt.com</a> – which features this <a href="http://samples.gwtphp.com/pax4/merchants/index.php">application.</a> The application seems to perform and work reasonably well in all browsers, although the transparent .pngs that are prevalent on the site don't seem to work well in Internet Explorer 6. Naturally, your mileage my vary, but I tested it against Firefox 3.0, Chrome, and Internet Explorer. Gorgeous. Similarly, look at the sample applications coming from <a href="http://extjs.com/products/gxt">ExtJS </a>OR <a href="http://www.gwt-ext.com/demo">GWT-EXT</a>. The first one's not quite as impressive as the second one, however, the second one may be at a dead end due to a licensing spat (<a href="http://www.gwtsite.com/ext-gwt-gwt-ext-what-now/">as detailed here</a>). </p><p>I should have a tutorial detailing how to get started with some of these technologies pretty soon.</p>
</p>
  			<a href="jl/blogPost/http_code_google_com_p.html"><h1>http://code.google.com/p/java-libcdrip/</h1></a>
  			<p>02 October 2008</p>
  			<p>
I've just <a href="http://code.google.com/p/java-libcdrip">open sourced and released</a> on Google code an Open API for interacting with CDDA data from Java. Right now the API does basics, only: 

<ul><li> Eject a disc from a drive</li><li> Provide information about whether a CD is loaded</li><li>List the devices on the system (though this seems to be a little flaky at the moment, so we'll have to implement a strict policy of no refunds! &lt;grin&gt;</li><li>Enumerate how many tracks there</li><li>Rip tracks to a .WAV <code>java.io.File</code> object.</li><li>Derive the DISCID from the CD, which in turn can be used to get CDDB data</li></ul> 

<p>Naturally, there are many things <a href="http://code.google.com/p/java-libcdrip/issues/list">to do be done</a>, and the list is constantly growing.</p>

<p>The code itself is JNI code that exposes native code that I've built using two <strong>amazing</strong> open source projects.</p>

<p> On Linux, I'm using <code>grip</code>, <code>cdio</code>, and more, not to mention the GNU toolchain. On Windows, I'm using <code><a href="http://cdexos.sourceforge.net/">CDex</a></code>. 
</p> 

<p> Since the layer of code that is actually mine is very thin (just enough to normalize the two APIs so that I could get them to conform the JNI-vended header files), it would not be very much use working on this project (unless you <strong>REALLY</strong> want to<strong>!</strong>) Instead, support those projects directly. </p>
<p>Any feedback on the project is helpful. The C/C++ code is sort of slapdash and isn't necessarily the easiest to build unless you've had time with <a href="http://www.eclipse.org/cdt/">Eclipse CDT</a> or Visual Studio .NET 2008, which is why there are prebuilt binaries in the <code>lib</code> directory in subversion.
</p>
  			<a href="jl/blogPost/j2me_and_android_consitancy.html"><h1>J2ME and Android consitancy</h1></a>
  			<p>02 October 2008</p>
  			<p>
Why is it that the basic 'optional' components on J2ME are pretty much the optional components on Android? What am I missing here? If you get a relatively new phone you're likely to get the same minimum requirements that you'll get from an Android phone – the things that are really interesting and attractive are optional, just as they're optional on J2ME. This applies, for example, to the GPS support, the ability to play MP3s, access the camera, etc. One thing I expect is that, because it's Google, that once you develop for Android and the phone "supports" the feature, then it won't be that hard to go from emulator to deployment on the handset with the same features. In the J2ME world, it's not easy to get an application that works identically once deployed without multi-hundred dollar certificates and so on. And of course, you still are better are programming to a common denominator if you want the application work across a lot of phones. Additionally, there are features that some phone supported that aren't supported in any one emulator, which means that testing j2ME is fine using the Wireless Toolkit but difficult if you're trying to access features from a Samsung A900 without then using Sprint's SDK. The Gphone is almost here, perhaps we'll start to get a feel for what that entails.
</p>
  			<a href="jl/blogPost/getting_started_with_jbpm_and.html"><h1>Getting Started with jBPM and Spring</h1></a>
  			<p>22 September 2008</p>
  			<p>
<p>My first article for <a href="http://www.theserverside.com/tt/articles/article.tss?l=jBPMandSpring">TheServerSide.com</a>. I am very excited to have this finally happen, and am frankly really looking forward to doing some more. The article is a discussion on setting up an architecture using worklists that depends on jBPM and Spring. 
</p><p> 
Any ideas? Suggestion? Leave a comment! </p>
</p>
  			<a href="jl/blogPost/oracle_enterprise_pack_for_eclipse.html"><h1>Oracle  Enterprise Pack for Eclipse</h1></a>
  			<p>17 September 2008</p>
  			<p>
<p>Dear Oracle,</p>
<p>You recently released  
<strong><a href="http://www.oracle.com/tools/enterprise-eclipse-pack.html">Oracle Enterprise Pack for Eclipse</a></strong>, which  is a release of either Eclipse 3.3 (Europa) or Eclipse 3.4 (Ganymede) that supports using Weblogic as a server. This is nice because, up until now, the only way that I knew  of to use WebLogic was to either use the Workshop product - which is an increasingly bad option  as it's based on the equivalent of Eclipse 3.1 - or to use something like MyEclipse, which has a sort of half-hearted integration with Weblogic that misses the mark.  I wanted to applaud your release. This isn't some cranked up Eclipse distro like Workshop and it's not some tightly-wound monster like JDeveloper. It's a simple solution to a simple requirement.  Honestly, I'm surprised it happened after BEA got accquired! I would have thought Oracle would <em>discontinued</em> something like this! 
</p><p> I know that Oracle Enterprise Pack includes other niceties besides the integraion with Weblogic, but they are uninteresting to me, as Ganymede is a very compelling upgrade on its own strength. </p> <p>
Thank you, Oracle, for making development in the Enterprise a little easier.   <br /><br/>Josh Long</p>
</p>
  			<a href="jl/blogPost/google_chrome_beta.html"><h1>Google Chrome, beta</h1></a>
  			<p>02 September 2008</p>
  			<p>
<p>Alright, so I was really caught off guard by the announcement of Google Chrome (<a href="http://www.google.com/chrome">http://www.google.com/chrome</a>). I’m REALLY impressed. It has every little key command I ever wanted: Ctrl+tab / ctrl + shift + tab moves you back and forward in your tabs. Ctrl + t create a new tab. Ctrl +L places the cursor in the location bar (and the location bar does double duty as your search bar, too! Nice! Even nicer: you can choose Microsoft as your search and they didn’t have to ask to get it that way!), etc. It even has the ability to drag tabs from the browser and 'attach' them, or detach them, at will. Again, very nice touch. It has every shortcut except one: F11. F11 (at least on IE, Firefox and Konqueror. Not Safari on Windows, I note!) maximizes the window and removes all the chrome. The reason for this should be stunningly obvious: it’s already as bare-minimal as you can get. But still, it’d be nice to have some way to go full screen. After all, how are the kiosk-esque apps supposed to work? What could be cooler than an entire application, full screen mode, written using GWT and the Google Gears extension library for GWT, deployed on Google Chrome, say at the library, or the airport? Who'd need the apple store? Imagine getting the Flash support up to snuff and deploying that on this crazy fast browser!</p><p>As a development tool, it’s definitely a solid third. Firefox + Firebug + Web Developer are the reigning champions, of course, then Safari and the hidden 'Developer' menu, then Chrome’s available but Spartan JavaScript debugger/ process monitor (a freaking process monitor! Awesome: Shift + Escape. Genius.)</p><p>Unlike Safari on Windows, the Chrome’s UI chrome seems to be rock solid. Of course, given the name it’d be ironic if that were anything less. If you manipulate Safari quick enough, it’ll stop painting itself and the grey brushed metal look will disappear to reveal standard blue + gray Windows 2000 chrome (you know, the minimize, maximize buttons, the title bar), but not so with Chrome. This could be because it’s very fast and I just haven’t found a way to get it to slow/falter. </p>
<p>I did have some issues with it, however. Flash flickers a bit for me – watching the video explaining Chrome, the faces would every so often flicker. I wonder if this is why they did <a href="http://www.google.com/googlebooks/chrome" target="_blank">a comic strip</a>) It’s built using Webkit as the renderer, so most things work just fine, and it’s built using their own proprietary JavaScript VM, called V8. V8 is very interesting in that it means could potentially advance the state of the art with JavaScript. Or foul it up completely and introduce a 4<sup>th</sup> incompatible JS variant into the market. I tested a lot of different applications, however, and it seems to be working just fine. Great, in fact. I tried the usual suspects: Gmail, YouTube, Meebo, Flickr, Google Calendar and they all seemed to work fine. I use Roller for my blog and it in turn uses a widget for rich text editing. That rich text editor barked that it didn't support Mozilla &lt; 1.3 when I tried to write this entry, but then insisted that it would try to materialize everything. It went ahead and sure enough everything works perfectly, even if the widget doesn't know it yet! Obviously the HTML heavy sites like <a href="http://www.slashdot.org" target="_blank" title="Slashdot">Slashdot.org </a>or <a href="http://amazon.com/" target="_blank">Amazon.com</a> worked just fine too, given the WebKit heritage. </p><p>I’m a little annoyed by the lack of Linux support (both from Google, and from Apple and their Safari product) given that WebKit was born of Konqueror’s source code. There does seem to be hope, though: the <a href="http://dev.chromium.org/">developer site</a> at least has a doc explaining that Chrome doesn’t yet build/do anything useful on OS X / Linux. But at least they’re not pretending no one’s going to be looking for those builds!</p><p>All in all, bravo Google!</p> <p><br /> <strong>Update (08/03/2008)</strong> So, I wanted to install this sucker at work. I tried runninig it and sure enough it failed, bitten by the corporate firewall. Good for firewall, bad for me. I googled and with a little luck I chanced upon <a href="http://mandriva.blogspot.com/2008/09/google-chrome-installer-error-solved.html">this revealing blog by Guru Prasath</a>. I tried it and it works! </p>
</p>
  			<a href="jl/blogPost/continous_integration_conundrum.html"><h1>Continous Integration Conundrum</h1></a>
  			<p>19 August 2008</p>
  			<p>
<p>I'm not feeling so hot so I'm sleeping irratically and so I'm productive when I least expect it. </p><p>I've been looking at the various continous integration server's out there for possible employment in a project I'm working on. We have in-house experience with <a href="http://cruisecontrol.sourceforge.net/">Cruise Control</a>, the defacto standard, so that's definitely got one value point. Plus, it's open source, which helps in the &quot;can-we-trust-it?&quot; category. 
 We are hopefully going to be working with Maven 2, so there's definitely value in being able to talk to the build system, which I know <a href="http://continuum.apache.org/">Continuum</a> (because, after all, they're the makers of <a href="http://maven.apache.org/">Maven</a>) can do easily. In terms of what I've heard about -- as in from direct contact with other people -- I know Hudson has a pretty good reputation, and so do the Atlassian products, namely <a href="http://www.atlassian.com/software/bamboo/">Bamboo</a>. Actually, now that I think of it, I attended a JUG wherein the Atlassian folks demo'ed the Bamboo product, and it was pretty impressive, if you go for the pie charts. Which I suspect will be true of the people looking at the project I'm working on. So check off that one for Bamboo.</p>
<p>
Most of these servers have some kind of integration with the tooling, but of course, it's not strictly necessary that they do, is it? After all, isn't the idea that you're going to remove the onus of constantly testing the build from the shoulder's of the developers? Even still,  <a href="http://www.jetbrains.com/teamcity/">TeamCity</a> , from IntelliJ (makers of <a href="http://www.jetbrains.com/intellij/">IntelliJ IDEA</a>) is indicative of where the market is heading.. part of the ALM market craze that caused Borland to switch course a few years back. I wonder what their integration is... <a href="http://www.borland.com/us/products/silk/gauntlet/index.html">Apparently it's something called Gauntlet.</a> I wonder why I haven't heard more from them about this.  
 </p><p>
I write this down now so I have something to mind map tomorrow when I'm more lucid.
</p>
</p>
  			<a href="jl/blogPost/mvn_archetype_generate.html"><h1>mvn archetype:generate</h1></a>
  			<p>14 August 2008</p>
  			<p>
Did you know that <code>mvn archetype:generate</code>, by itself, on the command line, yeilds a listing of all the archetypes you have available? I just stumbled upon this today - great trick!
</p>
  			<a href="jl/blogPost/keith_donald_speaking_on_spring.html"><h1>Keith Donald speaking on Spring Web MVC 2.5 and Beyond at this week&apos;s Phoenix Java User Group</h1></a>
  			<p>10 August 2008</p>
  			<p>
<p>
Keith Donald's going to be at this week's <a href="http://www.phxjug.org/">Phoenix Java User Group</a> talking about Spring MVC and Spring WebFlow 2.5/2.0, respectively! I am bringing at least 3 friends, I suggest if you can make it, you should try and go. I had a weird month last month so I missed it, but I can't wait for this one! 

</p>
</p>
  			<a href="jl/blogPost/subversion_1_5_intellij_idea.html"><h1>Subversion 1.5, IntelliJ IDEA, and you</h1></a>
  			<p>10 August 2008</p>
  			<p>
<p> I recently had to upgrade a project to Subversion 1.5 which caused IntelliJ's Subversion support to lose its mind. It would paint the files blue as though it realized the file was &quot;dirty&quot; but then when I hit ctrl + k to submit the changes to Subversion, it would respond, &quot;No Changes found&quot;.  I did some sleuthing: <a href="http://www.jetbrains.net/confluence/display/IDEADEV/Selena+EAP">IntelliJ IDEA build 7938</a> fixes the issue.
</p><p>I installed the new version and opened up a project and everything was in error. It was almost as thought it didn't have a JDK set, so I tried to point it at a JDK but that didn't work. Finally, I removed my IntelliJ metadata folder (a desperate move, but I had little time and nothing to lose) which is where IntelliJ stores user specific metadata (<code>/home/jlong/.IntelliJIdea70</code>). <b>That</b> worked! 
</p> <p> In all, I lose 20 minutes of time. By far, one of the longest periods that IntelliJ itself (where it wasn't genuine user error!) has delayed me... now, Eclipse on the other hand...  </p>
</p>
  			<a href="jl/blogPost/installng_postgis_and_the_tiger.html"><h1>Installng PostGIS and the TIGER Geocoder</h1></a>
  			<p>13 July 2008</p>
  			<p>
<p>Note this is an incomplete document. I have yet to confirm that this works 100%, but here are the things I noted while installing PostGIS' TIGER Geocoder. First and foremost, the source code is available via <code>svn co http://svn.refractions.net/postgis/trunk/extras/tiger_geocoder</code>. A lot of this information is an incomplete copy of what's available from : <a href="http://postgis.refractions.net/support/wiki/index.php?PostgisOnUbuntu">http://postgis.refractions.net/support/wiki/index.php?PostgisOnUbuntu</a> </p><p>What follows are the instructions as present in the source code. I'll interpolate the bits that were a little unclear and required assistance for me so you can benefit from them.</p> <ol> <li>Install postgresql-8.2-postgis (For various GIS bits). For Ubuntu Hardy users, this was a mere <code>sudo apt-get install postgresql-8.3 postgresql-contrib-8.3 postgresql-8.3-postgis</code>. Invariably, you'll need some extra tool support so: <code>sudo apt-get install gdal-bin python2.5-gdal </code> (Obviously, you should have Python installed, too.). Interestingly, my installation has thus far been a failure since I chose to use Postgres 8.3. If you're on Gutsy or prior, you may have better luck (in fact, I'm almost 100% sure you will) with Postgres 8.2, against which the geocoder code seems to have been tested. I can't guaranteee these instructions are the same, however. They should be.. I can't imagine any of these dependencies not existing in the version of the distro that's just 6 months old :-), but the versions may be different. Anyway: take away is that you should install 8.2 but be cautious. The rest of these instructions are referencing my 8.3 installation, so please change them as necessary. </li> <li> Install PostGIS functions and spatial ref definitions. This enables PostGIS itself on your database. <br /> <code> \i /usr/share/postgresql-8.3-postgis/lwpostgis.sql \i /usr/share/postgresql-8.3-postgis/spatial_ref_sys.sql </code> </li> <li> Install postgresql-contrib-8.3 for soundex (from fuzzystrmatch)<code>This looks something like: </code> psql -U postgres your_database_name &lt; /usr/share/postgresql/8.3/contrib/fuzzystrmatch.sql . There's all sorts of worthy things in the contrib modules, so take your time and do some research and install anything you think useful. </li> <li> Obtain the TIGER data from the Census site. I used <code>wget -r http://www2.census.gov/geo/tiger/tiger2006se</code> </li> <li> You need to modify, and then run, <code>import/load_tiger.sh. </code>. What this will do is load all the TIGER data from http://www2.census.gov/geo/tiger/tiger2006se/ into the database in a sort of raw unfettered way so that the processing to setup the Geocoder works. Here are the modifications I made before running it:<br /> <code></code><pre>#!/bin/bash<br /><br />FIRST=&quot;&quot;<br />for file in /home/jlong/Desktop/gis/www2.census.gov/geo/tiger/tiger2006se/*/*.ZIP; do<br /> ./tigerimport.sh append MYDATABASE $file $FIRST<br /> if [ -z &quot;$FIRST&quot; ]; then<br /> FIRST=&quot;-a&quot;<br /> fi<br />done</pre> You see? All I change was the value for MYDATABASE and the value for pointing tot he directory where I had downloaded all the data fromthe census site. Also, I modified tigerimport.sh itself. Whenever I saw lines starting with ogr2ogr, I modified the connection paramaters as appropriate: <code>ogr2ogr $PRE $OGROPTS $SRS &quot;PG:dbname=$DATABASE user=MYUSEr password=MYPW host=127.0.0.1&quot; $TIGER CompleteChain $POST</code>. For my setup, I needed to specify the host. Which I guessed was done using a 'host=127.0.0.1' parameter. That seemed to work. Simialarly, before you start importing everything, you may run into encoding issues down the line after this step. You can 'undo' it afterwards. This was necessary as the client's talking to my database were trying to send non UTF8 data to my database which was UTF8. <code>ALTER DATABASE lemanger SET client_encoding=latin1; </code>. Alright, finally, run the script above once you're confident everything's changed the way it needs to be! <strong>Warning</strong> On my personal workstation with a 3GHz Pentium 4 (Not dual core, but still, no slouch) and 2 GB of RAM, this process took 28 hours and 30GBs or so of space. This is not a 'grab a cup of coffee' situation. This is, 'go visit the family ... in the next state... and stop all other concurrently running programs on the workstation for a day' situation. In total -- by the way -- so you don't get in over your head, I needed upwards of 100 GB of free space to complete this process. Some of that space is eventually recoverable, because it's temporary. But still, if you want to preflight this process with just one state, that may be advisable if you have a small hard disk. Another thing to note by the way is that a 'State', in this case, is a state of the United States and includes in its definition 59 entities that aren't from the 50 proper US 'States', including Puerto Rico, for example. Very cool. </li> <li> Here's where I'm only a little sure of what to do and I could -- in fact -- be wrong. I did get pointed in the right direction (thank you Stephen Woodbridge!), so hopefully this is correct. The next step consists of creating tables that the geocoder will need from another set of data, the US Census Shape Boundry files. They are are at http://www.census.gov/geo/www/cob/bdy_files.html. You don't need them all, just a few. They organized according to a code, as described here: http://www.census.gov/geo/www/cob/filenames.html. Thus, each file is a data set, and some correspond to granularities smaller than 'national'. When you see some of the tables that you're expected to have installed, it's looking for 'national' data sets, and I couldn't find them for all of them. It needs tables of the following type: <ul> <li> cs99_d00 - <a href="http://www.census.gov/geo/www/cob/cs2000.html"> county subdivisions</a> </li><li>pl99_d00 <a href="http://www.census.gov/geo/www/cob/pl2000.html">places</a> </li><li>co99_d00 <a href="http://www.census.gov/geo/www/cob/co2000.html">counties</a> </li></ul> Mouse over the links to verify that data you're looking at has the code as the data you want. Since 99 means national, and 00 means year 2000, and the part in the begining is the abbreviation, then you know that cs99_d00 is probably county subdivisions from the year 2000 for the national level, which is http://www.census.gov/geo/www/cob/cs2000.html. Notice that there's no 99. And that there's no single set of data! in this case I think we're after <em>just</em> the .SHP files. For me, it was easier to download those listing pages to my local disk somewehre and then extract the URLs and then download them from that list. Here's I did that.<br /><pre><code>#!/bin/bash<br />cat cs_listing.html |grep -i shp |grep geo|cut -f2 -d\&quot;| while read url; <br /> do <br /> nurl=&quot;http://www.census.gov$url&quot; <br /> echo $nurl; <br />done &gt; base_of_zip_files.txt <br /></code></pre> That got me a listing of the zip files that I wanted. The next trick was to download those zip files: <pre><code>#!/bin/bash<br />cat base_of_zip_files.txt | while read url; <br /> do <br /> nurl=&quot;http://www.census.gov$url&quot; <br /> echo $nurl; <br /> wget $nurl <br />done <br /></code></pre> That will take a few minutes. I couldn't get the data all in one for anything but the counties dataset. So, I had to download all the data and forge from them one aggregate data. It helps to be meticulous and create a 'boundry' folder inside of which you create separate 'cs', 'co', and 'pl' folders for these datasets. </li> <li> Once you've downloaded all the datasets, you'll need to install them. Here's my slightly modified version of the script from the installation instructions that come witht he Tiger geocoder. I created one for each dataset and ran it in the same folder as the particular dataset itself:<br /><pre><code>#!/bin/bash<br /> find . -iname &quot;*ZIP&quot;|while read l;<br /> do<br /> mkdir -p x; <br /> rm -rf x ;<br /> mkdir x ;<br /> cd x; <br /> unzip .$l; <br />BASE=`echo *.shp | cut -f1 -d.` ;<br />ogr2ogr -append -f PostgreSQL -a_srs EPSG:4269 &quot;PG:dbname=DATABASE host=127.0.0.1 \</code><br /><code> user=USER password=PASSWORD&quot; $BASE.shp $BASE -nln <em>TABLE_NAME</em> -lco DIM=2<br /> cd ..; <br /><br />done <br /></code></pre> Basically, TABLE_NAME is the name of the table (one of the three I mentioned above, dependant on which dataset you're dealing with.) and the rest is just the information needed to get into your database. By the way, if you didn't do the client encoding step I mentioned above, this is where it may bite you in the butt. </li> <li> Create geometry indexes on all the tables using GiST, eg: <pre><code> CREATE INDEX completechain_geom_idx ON completechain </code><br /><code> USING GIST (wkb_geometry public.gist_geometry_ops);<br /></code> </pre> <br/> Naturally, since this is operating on the 66 million record behemoth you created in the beginning, this will take many hours. Go watch a movie... or two. </li> <li> NB: the following steps are pretty straight forward, if a bit tedious. In particular, one of them is <strong>REALLY</strong> slow and another one is going to break if you're trying this on 8.3 due to cast errors, complaining of comparisons of integers to char/text/varchar data types. The errors are pretty self explanatory and will show you what needs to be fixed. Typically it's just a matter of changing the expression in question to what it was, plus &quot;::text&quot; to incur a cast. </li> <li> Create lookup tables using <code>tables/lookup_tables.sql</code>. </li> <li> Create roads_local using <code>roads_local.sql </code>. I think this one is the one that does a derivation from a dataset produced by a join on one of the bigger tables, and so it too takes an incredibly long time. 5 hours, or so. </li> <li> Create 'tiger_geocode_roads' using <code>tiger_geocode_roads.sql</code> </li> <li>Run <code>create_geocode.sql</code> to load the functions </li> <li> Profit! </li> </ol>
</p>
  			<a href="jl/blogPost/1.html"><h1>Digression: Setting Up Spring, Velocity, JavaMail, Multi Part MIME messages and Gmail</h1></a>
  			<p>14 June 2008</p>
  			<p>
This took quite a bit of Googling to get right, so here it is summarized to help prospective journey makers. Spring's integration is very good for the common cases, but lack of insight can prevent you from achieving more complex integrations. For example, I wanted to be able to authenticate against Gmail (this is a program I'm writing to scratch a personal itch, but nonetheless knowing how to authenticate against SSL is a very useful thing in the enterprise.). Then I wanted to be able to send email messages that rendered as HTML for the sophisticated email clients that supported it (I suspect that's the overwhelming majority at this point - it's been a while since <a href="http://rfc.sunsite.dk/rfc/rfc822.html" target="_blank">RFC 822</a> was relevant!)&nbsp; and have the content fall back to plain text content otherwise. Finally, I wanted to integrate with Velocity so that I could parameterize my emails readily. This begat the following method, a few stanzas of Spring configuration, and a properties file. <span style="FONT-WEIGHT: bold">NB</span>: Replace the values in the properties file with your own information!&nbsp; <br />
  <p>See the <code>public static void main(String[] args)</code> method to see an example invocation of this code. <br /></p>
  <pre># utils.properties<br />mail.smtp.host=smtp.gmail.com<br />mail.username=USERNAME@gmail.com<br />mail.password=PASSWORD <br />mail.smtp.port=465 </pre>
  <p>The Spring configuration file is not as overwhelming as it looks - most of it is scaffolding.</p>
  <pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br /><br />&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; <br />    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;<br />       xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; <br />      xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;<br />       xsi:schemaLocation=&quot;<br />         http://www.springframework.org/schema/beans<br />         http://www.springframework.org/schema/beans/spring-beans-2.0.xsd<br />         http://www.springframework.org/schema/tx<br />         http://www.springframework.org/schema/tx/spring-tx-2.0.xsd<br />         http://www.springframework.org/schema/aop<br />         http://www.springframework.org/schema/aop/spring-aop-2.0.xsd<br />         http://www.springframework.org/schema/lang<br />         http://www.springframework.org/schema/lang/spring-lang-2.0.xsd<br />        &quot;&gt;<br /><br /><br />    &lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;<br />        &lt;property name=&quot;host&quot; value=&quot;${mail.smtp.host}&quot;/&gt;<br />        &lt;property name=&quot;port&quot; value=&quot;${mail.smtp.port}&quot;/&gt;<br />        &lt;property name=&quot;username&quot; value=&quot;${mail.username}&quot;/&gt;<br />        &lt;property name=&quot;password&quot; value=&quot;${mail.password}&quot;/&gt;<br />        &lt;property name=&quot;javaMailProperties&quot;&gt;<br />            &lt;props&gt;<br />                &lt;prop key=&quot;mail.smtp.host&quot;&gt;${mail.smtp.host}&lt;/prop&gt;<br />                &lt;prop key=&quot;mail.smtp.port&quot;&gt;${mail.smtp.port}&lt;/prop&gt;<br />                &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;<br />                &lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;true&lt;/prop&gt;<br />                &lt;prop key=&quot;mail.debug&quot;&gt;false&lt;/prop&gt;<br /><br />                &lt;prop key=&quot;mail.smtp.socketFactory.port&quot;&gt;${mail.smtp.port}&lt;/prop&gt;<br />                &lt;prop key=&quot;mail.smtp.socketFactory.class&quot;&gt;javax.net.ssl.SSLSocketFactory&lt;/prop&gt;<br />                &lt;prop key=&quot;mail.smtp.socketFactory.fallback&quot;&gt;false&lt;/prop&gt;<br />            &lt;/props&gt;<br />        &lt;/property&gt;<br />    &lt;/bean&gt;<br /><br />    &lt;bean id=&quot;emailUtils&quot; class=&quot;com.joshlong.example.util.EmailUtils&quot;&gt;<br />        &lt;property name=&quot;mailSender&quot; ref=&quot;mailSender&quot;/&gt;<br />    &lt;/bean&gt;<br /><br />    &lt;bean class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;<br />        &lt;property name=&quot;location&quot;&gt;<br />            &lt;value&gt;utils.properties&lt;/value&gt;<br />        &lt;/property&gt;<br />        &lt;property name=&quot;ignoreUnresolvablePlaceholders&quot;&gt;<br />            &lt;value&gt;true&lt;/value&gt;<br />        &lt;/property&gt;<br />    &lt;/bean&gt;<br /><br />&lt;/beans&gt; <br /><br /></pre> </p>
  <p>And finally, the utility code itself. I have a Maven POM that's bringing in most of this stuff. You could probably get there by using Spring-All and making sure to add velocity, Apache Commons Lang, and the JavaMail/Activation jars. <p>
  <pre><br />package com.joshlong.example.util;<br /><br />import org.apache.commons.io.IOUtils;<br />import org.apache.commons.lang.StringUtils;<br />import org.apache.log4j.Logger;<br />import org.apache.velocity.VelocityContext;<br />import org.apache.velocity.app.Velocity;<br />import org.apache.velocity.tools.generic.DateTool;<br />import org.springframework.context.ApplicationContext;<br />import org.springframework.context.support.ClassPathXmlApplicationContext;<br />import org.springframework.mail.MailException;<br />import org.springframework.mail.javamail.JavaMailSenderImpl;<br /><br />import javax.mail.Message;<br />import javax.mail.internet.InternetAddress;<br />import javax.mail.internet.MimeBodyPart;<br />import javax.mail.internet.MimeMessage;<br />import javax.mail.internet.MimeMultipart;<br />import java.io.StringWriter;<br />import java.util.ArrayList;<br />import java.util.HashMap;<br />import java.util.List;<br />import java.util.Map;<br /><br /> /** <br />  *<br />  * @author Josh Long<br />  * <br />  * This class is designed to support _easily_ sending out e-mails and parameterizing them. <br />  * In approach, this is &lt;i&gt;almost&lt;/i&gt; as simple as PHP's send() function! Naturally, it's<br />  * quite a bit more powerful for it's simplicity. <br />  * <br />  */<br />public class EmailUtils {<br /><br />    private Logger log = Logger.getLogger(EmailUtils.class);<br />    private JavaMailSenderImpl mailSender;<br /><br />    public JavaMailSenderImpl getMailSender() {<br />        return mailSender;<br />    }<br /><br />    public void setMailSender(JavaMailSenderImpl mailSender) {<br />        this.mailSender = mailSender;<br />    }<br /><br />    public static void main(String a[]) throws Throwable {<br />        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;utils.xml&quot;);<br />        EmailUtils utils = (EmailUtils) context.getBean(&quot;emailUtils&quot;);<br />        Map&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;();<br />        params.put(&quot;user&quot;, &quot;John Doe&quot;);<br />        utils.sendEmailMessage(&quot;from@foobar.com&quot;, new String[]{&quot;towhoever@gmail.com&quot;}, <br />           &quot;A Subject&quot;, &quot;Hello ${user} from plain text&quot;,<br />           &nbsp;&quot;&lt;h1&gt;Hello ${user} from High Fidelity HTML&lt;/h1&gt;&quot;, params);<br />    }<br /><br />    public String mergeTemplate(String template, Map&lt;String, Object&gt; macros) throws Throwable {<br /><br />        if (StringUtils.isEmpty(template))<br />            return StringUtils.EMPTY;<br /><br />        String answer = null;<br /><br />        VelocityContext context = new VelocityContext();<br /><br />        context.put(&quot;dateTool&quot;, new DateTool());<br /><br />        for (String key : macros.keySet())<br />            context.put(key, macros.get(key));<br /><br />        StringWriter writer = new StringWriter();<br /><br />        Velocity.init();<br /><br />        if (Velocity.evaluate(context, writer, &quot;LOG&quot;, template)) {<br />            IOUtils.closeQuietly(writer);<br />            answer = writer.toString();<br />        }<br />        return answer;<br />    }<br /><br />    public void sendEmailMessage(String from, String[] to, String subject, String textBody, String htmlBody, Map&lt;String, Object&gt; params) throws Throwable {<br /><br />        MimeMessage msg = mailSender.createMimeMessage();<br /><br />        msg.setFrom(new InternetAddress(from));<br />        msg.setSubject(subject);<br />        msg.setRecipients(Message.RecipientType.TO, getInternetAddresses(to));<br /><br />        MimeMultipart content = new MimeMultipart(&quot;alternative&quot;);<br /><br />        if (!StringUtils.isEmpty(textBody)) {<br />            MimeBodyPart text = new MimeBodyPart();<br />            text.setText(mergeTemplate(textBody, params));<br />            content.addBodyPart(text);<br />        }<br /><br />        if (!StringUtils.isEmpty(htmlBody)) {<br />            MimeBodyPart html = new MimeBodyPart();<br />            html.setContent(mergeTemplate(htmlBody, params), &quot;text/html&quot;);<br />            content.addBodyPart(html);<br />        }<br /><br />        msg.setContent(content);<br />        msg.saveChanges();<br /><br />        try {<br />            mailSender.send(msg);<br />        } catch (MailException ex) {<br />            log.info(&quot;Issue with sending out mail having body &quot; + StringUtils.defaultString(textBody) + &quot;; params are:&quot; + params, ex);<br />        }<br />    }<br /><br />    private InternetAddress[] getInternetAddresses(String... emails) throws Throwable {<br />        List&lt;InternetAddress&gt; addys = new ArrayList&lt;InternetAddress&gt;();<br />        for (String e : emails)<br />            addys.add(new InternetAddress(e));<br />        return addys.toArray(new InternetAddress[0]);<br />    }<br /><br />}<br /></pre>
</p>
  			<a href="jl/blogPost/20080612.html"><h1>Modeling Conversations</h1></a>
  			<p>12 June 2008</p>
  			<p>
<p>Most systems have context that lasts longer than the typical request/ response of the clients and servers involved in the system, but shorter than the lifetime of the business entities that define the domain model. This is called "conversational" state. The naïve way to handle conversational state is to clutter the domain model with "state" flags that mark benchmarks against some sort of process. </p> <p>Typically, these state flags aren't useful data to the enterprise. Sometimes they do correspond with business events, in which case they perhaps deserve a flag. When they don't however, it is a grave mistake to enshrine these passing values in the data tier. Take for example the simple process of signing up a user. <br></p><p><img src="media/17879"><br></p> <p>The only real business data here is that the customer has signed up and is in a consistent state, or that she hasn't, in which case perhaps the inconsistent data should be expunged from the system. To model this, however, you would have to have some way to note whether or not the user is in the process of signing up, whether she's gotten a confirmation email, whether she's clicked on the confirmation link in the email and whether she's completed the sign up process. And that's for a very SIMPLE process with two "actors" (modeled as swimlanes – the user and the services)! Imagine what something even mildly complex with concurrent processes would look like! </p> <p>What you need is some way to divorce process state from the domain model entirely and keep it in a structure designed to measure state. In the case of something like Spring Web Flow or JBoss Seam's jPDL page flow language for the wizard interaction, that state is stored in the session and measures progress against mile-markers in a "flow". In the case of a true workflow / Business Process Management system like jBPM that state is typically stored in the database. Each milestone is called an activity. Because the structure keeps track of where any given process is relative to the whole process, you can derive metrics from these systems that are useful to the business. </p> <p>So now you know how to model a conversation. Generally. What you need is some way to "code" an activity diagram. That's where a BPM system comes in play. </p> <p>Next, we'll discuss actually using a BPM system, <a href="http://www.jboss.com/products/jbpm" target="_blank">jBPM</a>.</p>
</p>
  			<a href="jl/blogPost/20080525.html"><h1>Samuel Jackson for HTTP error codes!! Awesome.</h1></a>
  			<p>25 May 2008</p>
  			<p>
<a href="http://streaming.linux-magazin.de/events/apacheconfree/archive/rfielding/frames-java.htm" target="_blank">Roy Fieldings on Apache 3.0</a> (well, sort of -- more of a series of hopeful hypotheticals than anything else...). It's brilliant: my favorite idea? Using <a href="http://www.samuelljackson.com" target="_blank">Samuel Jackson</a> pictures and quotes for all HTTP error codes!
</p>
  			<a href="jl/blogPost/20080524.html"><h1>Webmonkey.com is back!</h1></a>
  			<p>24 May 2008</p>
  			<p>
Webmonkey.com is back! I just noticed this -- it's laid dormant for years and was -- in my humble opinion -- one of the coolest places to catch up on technology in its heyday. Go <a href="http://www.webmonkey.com/" target="_blank">webmonkey.com</a>!
</p>
  			<a href="jl/blogPost/20080430.html"><h1>Spring Application Server</h1></a>
  			<p>30 April 2008</p>
  			<p>
<p>Uh oh! I guess I was asleep at the wheel on this one! SpringSource (the company that was formerly called Interface21 and (obviously) which funded the development / growth of the Spring Framework) has announced a Java application server. I am more than a little leary about this, however. It's not based on Java EE (yet, though apparently that's not out of the picture with Java EE6's "profiles"), and is instead a sort of best-of-breed setup of Tomcat and a slew of components from the "Spring Portfolio."&nbsp; (Think: Spring web flow, Spring web services, Spring LDAP.. is Spring batch in there?) </p><p>Could be interesting. Using OSGi to sidestep the whole kernel architecture issue was smart, and reflective of what everybody seems to be doing. OSGi seems to be the "next big thing." Super packages, a proposed feature set in Java 7, reflects this.</p><p>Do you remember when there was just a Spring IOC container, and then for a long time, a Spring IOC container, a web framework and a page flow framework? I suppose I should've seen this coming when the dependency injection container grew web-framework legs. </p><p>Anyway, the application server looks interesting (at this second I cant find any mention of it on either SpringFramework.org or SpringSource.com), but infoq.com has an interesting bit on it (http://www.infoq.com/news/2008/04/springsource-app-platform). They've taken Tomcat (which they contend - rightly so - is all the application server 80% of JEE users are using anyway) and loaded it up with the "Spring Portfolio" and - using OSGi - have provided a kernel to service the components deployed to the server. In short, it sounds like a full blown application server wherein the lookups have been removed. I am not sure if this is revolutionary or evolutionary. If they've merely provided an OSGi core and brought commodity libraries into the fold to provide an integrated solution, then I'm not sure how it'll help people who've already got a JBoss or a Glassfish working.&nbsp; If however you're looking to craft a "lightweight" solution from scratch, maybe this is just what the doctor ordered.</p><p>I don't really like the tact SpringSource.com seems to be taking with their marketing: (from <a href="http://www.springsource.com/web/guest/products/enterprise/edition">their marketing</a>)</p><p>"Spring Enterprise Edition is certified and warranted to be virus-free and has undergone rigorous testing to ensure that you receive the highest reliability. Indemnification is provided at the gold and platinum subscription levels. Indemnity provides organizations with additional peace of mind and the assurance that SpringSource promptly rectifies any potential intellectual property issues." </p><p>Is that really an issue? Viruses? Did they mean bugs? I don't know that I've ever had to run a virus scan on a Java assembly before I used it. </p><p> I love the Spring framework. I'm sorry to see such pandering. &nbsp;I wonder what else the technology will yield. </p>
</p>
  			<a href="jl/blogPost/20080412.html"><h1>JAWR: a JavaScript compression library</h1></a>
  			<p>12 April 2008</p>
  			<p>
<p>With rich internet applications being all the buzz these days people are finding themselves pouring more and more interactivity onto their pages. Typically, this is if nothing else through a slew of external third party libraries, or as with Dojo and Scriptaculous and YUI, entire frameworks! Taken one at a time these various scripts – used sparingly and perhaps compressed – don't cause too much a burden on your server or the client during download. Right... &nbsp;</p><p>So say you build up a complex layout / widget set for your site. Say that you're also consistently using prototype.js and rico.js and a few of the scriptaculous libraries and that you've also got a few other 'commodity' scripts that are used everywhere (company libraries, a widget built on prototype, etc, etc).&nbsp; Anything. Now you've got 6 different .js files to include on every page, and you haven't even STARTED loading your code – you remember that code, right? The code that actually does the line of business you set out to help with this application in the first place? All these HTTP requests are bad for the server, but they're also really bad for the client. Load enough scripts and eventually things to start to deteriorate, even crash, on the client. </p><p>So now you see the problem. Different half-solutions exist. The Dojo framework has done extensive work to provide a compressor that runs as an ant task and that even obfuscates your code. One version – thanks to a donation by AOL - even does dead code path elimination! However this is a Dojo-only solution and, frankly, I found it a little fragile if you do anything cute in your JavaScript.&nbsp; Another solution is the GWT route from Google. GWT takes lava code and &quot;compiles&quot; into JavaScript. The advantage of this is that the JavaScript is super-lean / optimized to work across browsers and mechanically, and utterly concise. The disadvantage of it is that – like the Dojo solutions – is inextricably tied to the GWT framework. </p><p>There are JavaScript compressors. http://www.brainjar.com/js/crunch/ has been around for the better part of a decade! There are others- - and the idea is the same: take JavaScript and regex your way into a more compact JavaScript file. Some of these solutions become unusable if you neglect to terminate your statements with a semicolon as they blindly wrap all the lines together, yielding non-runnable JavaScript code. Two other problems with this solution – as with the others previously mentioned-- is that it's not automated. Each time you update your code, you need to re run it all through that program on the site. Similarly, it's only compressing the code itself, not the format in which its delivered to the client. G-Zip compression works great for JavaScript content, so long as it it's not served to browsers that don't support it. </p><p>My definition of an ideal solution would be something that knew how to combine multiple libraries into one, compact that code except where the resulting source code would be made un runnable – and that conditionally served gzip content. </p><p>Enter JAWR, a library freely available from https://jawr.dev.java.net/ that does all of the above. It even can work its magic on .css files! It provides tag libraries (accessible from both JSP and now –with the 2.0 release – from Facelets). I'm sure if you were so inclined you could reverse engineer the tag library handlers and wrap it in a Tapestry component or a Wicket widget. </p><p>Below, I walk through setting up a simple example: </p><p>For my example, I'm using JSF and Maven. Set up the web application however you like. If you're using Maven, here is the dependency I'm using: </p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>&lt;dependency&gt;<br />&lt;groupId&gt;net.jawr&lt;/groupId&gt;<br />&lt;artifactId&gt;jawr&lt;/artifactId&gt;<br />&lt;version&gt;[1.4,]&lt;/version&gt;<br />&lt;/dependency&gt;</code><p>Ensure that you have the following repository added to Maven: </p><code>&nbsp;&lt;repository&gt;<br />&lt;id&gt;maven2-repository.dev.java.net&lt;/id&gt;<br />&lt;name&gt;Java.net Repository for Maven&lt;/name&gt;<br />&lt;url&gt;http://download.java.net/maven/2/&lt;/url&gt;<br />&lt;layout&gt;default&lt;/layout&gt;<br />&lt;/repository&gt;</code><p>I configured the JAWR servlet to handle my JavaScript files in my web.xml as follows:</p><code>&lt;servlet&gt;<br />&nbsp; &lt;servlet-name&gt;JavascriptServlet&lt;/servlet-name&gt;<br />&nbsp; &lt;servlet-class&gt;net.jawr.web.servlet.JawrServlet&lt;/servlet-class&gt;<br />&nbsp; &lt;init-param&gt;<br />&nbsp; &lt;param-name&gt;type&lt;/param-name&gt;<br />&nbsp; &lt;param-value&gt;js&lt;/param-value&gt; &lt;!-- this could be css --&gt;<br />&nbsp; &lt;/init-param&gt;<br />&nbsp; &lt;!-- Location in classpath of the config file --&gt;<br />&nbsp; &lt;init-param&gt;<br />&nbsp; &lt;param-name&gt;configLocation&lt;/param-name&gt;<br />&nbsp; &lt;param-value&gt;jawr.properties&lt;/param-value&gt;<br />&nbsp; &lt;/init-param&gt;<br />&nbsp; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;<br />&nbsp; &lt;/servlet&gt; &nbsp;&lt;servlet-mapping&gt;<br />&nbsp; &lt;servlet-name&gt;JavascriptServlet&lt;/servlet-name&gt;<br />&nbsp; &lt;url-pattern&gt;*.js&lt;/url-pattern&gt;<br />&nbsp; &lt;/servlet-mapping&gt;<br /></code><p>The above configuration requires the presence of a file named jawr.properties on the classpath. </p><p>Here's my <code>jawr.properties</code>. </p><code> #https://jawr.dev.java.net/docs/descriptor_syntax.html<br /># Common properties<br />jawr.debug.on=false<br />jawr.gzip.on=true<br />jawr.gzip.ie6.on=false<br />jawr.charset.name=UTF-8 # Javascript properties and mappings<br />jawr.js.bundle.basedir=/lib/js<br />jawr.js.commonURLPrefix=003<br />jawr.js.bundle.names=appcore,railsjs# All files within /js/lib will be together in a bundle.<br /># The remaining scripts will be served sepparately.jawr.js.bundle.effects.id=/bundles/effects.js<br />jawr.js.bundle.effects.global=true<br />jawr.js.bundle.effects.mappings=/lib/js/scriptaculous/**<br />jawr.js.bundle.effects.prefix=effects</code><p>&nbsp;</p>jawr.js.bundle.appcore.id=/bundles/appcore.js<br />jawr.js.bundle.appcore.global=true<br />jawr.js.bundle.appcore.mappings=/lib/js/appcore/**<br />jawr.js.bundle.appcore.prefix=appcore &nbsp;&nbsp;<p>The configuration format is somewhat akin to editing a log4j.properties property file.</p><p>In the example above, I'm creating two &quot;bundles&quot; of JavaScript files. All JS in a set is compressed together and made available as one file. It also condenses the JavaScript within the file, condensing new lines. However, if you have JavaScript on two lines and didn't use a semi-colon to terminate the first one, it will leave the second line of JavaScript on a new line. </p><code>var a = 1&nbsp; <br />var b = 2&nbsp; ; <br />window.alert( 'a = ' + a + ' &amp; b = ' + b ) ; <br /></code><p>roughly becomes: </p><code>var a = 1&nbsp; <br />var b = 2&nbsp; ; window.alert( 'a = ' + a + ' &amp; b = ' + b ) ;&nbsp; <br /></code><p>Pretty cool, eh? </p><p>So, in the example above, I tell JAWR to create two &quot;bundles&quot;: </p><p>One bundle called &quot;effects&quot; takes together all the JavaScript files in the /lib/js folder and yields one single compressed JavaScript file. Accessing the JavaScript file is simple thanks to the tag libraries shipped with the framework. It's also smart: if you've enabled gzip compression and the client support its, an appropriate URL will be rendered, otherwise a non GZIP'ed but still &quot;minified&quot; JavaScript URL will be rendered. Nice!</p><p>Compiling the files at these URLs is time intensive, so by default when your application starts up JAWR caches the permutations of the files it'll deliver, so theres no overhead in request processing except for the tag library to render. If you are debugging in, say, Jetty and would like to make changes to your JavaScript and still benefit from immediate changes, you can enable debug mode and you can enable a periodic &quot;refresh&quot; of the cached bundles. This way, JAWR will write out the individual JavaScrpt files in the same way you were doing before the switch to JAWR. Flip the debug flag off and now it'll render the URL for the single cached / compressed JavaScript file.</p>
</p>
  			<a href="jl/blogPost/200804121.html"><h1>Adobe Media Player</h1></a>
  			<p>12 April 2008</p>
  			<p>
<p> Adobe's Finally Released Their Much Rumored Media Player: "Adobe Media
Player"It's sweet. Built on AIR, it's a stand-alone "installable" Flash
program that allows you to manage, search out, and watch FLV / H264
content inside of Flash. It's beautiful to use but my big gripe is that
because it runs on AIR, there's no Linux version.They seem to have
lined up some pretty big content-producers, which should make the
deployment easier. I wonder if they're fixing to be to digitial video /
flash video what iTunes is to music. A one-stop video content shop /
hub.. Absolutely stunning UI - and it's consistent with some of their
more recent stuff, including Colour and Adobe Photoshop Express. I
wonder where they'll take this - I wonder if there's a way to share
video playlists etc? Integration with Youtube.com just like Apple TV
did?</p>
</p>
  			<a href="jl/blogPost/20080119.html"><h1>Hibernate and RMI and you.</h1></a>
  			<p>19 January 2008</p>
  			<p>
Alright -- this one bugs me to no end. <br><br>Have you ever worked with Hibernate, and some sort of Java remoting API on Java 1.6? That could apply to ALMOST anyone. EJB3 users <span style="font-weight: bold;">(me!).</span> Spring HttpInvoker/Hibernate3 <span style="font-weight: bold;">(me!).</span> RMI/Hibernate3 <span style="font-weight: bold;">(me!).</span> They all count. <br><br>Did you get a bug whereby a remote client complains (err, blows chunks with a ClassCastException) about not being able to set a field on an entity/POJO that makes use of Hibernate's "lazy" initialization across the wire? You did? Were you going to tell me about it? I mean, come on. I thought we were friends.<br><br>I upgraded Ubuntu and JBoss on my dev machine at home to be able to test. Amazingly bad things ensued. I spent a good hour finding a bug that I was sure must be afflicting other people. After all, it's essentially a bug in JBoss' EJB3. And Hibernate. And Java. And RMI. I don't know but it seemed rather hard to pin. <br><br>It was a bug in Java 1.6. I don't know why, I don't know the details. <a href="http://jira.jboss.org/jira/browse/JBAS-3952" target="_blank">This</a> lone result (which eluded a lot of my google searches -- which means this was so minor an issue that even Google didn't find it!?) suggested a workaround and I - ears burning - jumped at the completely ridiculous, nonsensical solution. Because... it was just crazy enough to work. A few <span style="font-weight: bold;">update-java-alternatives</span> later, I was back on Java 1.5. I re-ran my tests. <br><br><font size="2">IT WORKED WHY WOULD IT WORK? HOW WOULD THAT EVEN BEGIN TO BREAK?</font><br><br>Everything's fine now! Hurrah. I can have my hour back, too?&nbsp; No? <br><br><span style="font-weight: bold;">MySQL got bought by Sun</span>. <span style="font-weight: bold;">Oracle bought BEA</span>. I understand the BEA acquisition. Oracle's Application server sucks rocks. BEA is the gold standard and Oracle has cash to burn. Simple economics: don't innovate what you can accquire quicker.<br><br>But why would Sun buy MySQL? Sun is pitching it as a rounding-out of its stack -- now they have the language (Java!), the database (JavaDB for embedded, MySQL for enterprise), the server (Glassfish) and the tool chain (javac, Netbeans, and the recently retired Sun Java Web creator, etc.).<br><br>Does this put them in the line of sight of Oracle, which has a better database and a better application server? Why didn't they buy the company supportig Postgres, which is a better database (well, that is, I define "better" as being more readily deployed as a replacement for Oracle. Neither have particularly good clustering, enterprise features, but Postgres comes closer in terms of portability.)? Is Sun betting on the up-and-coming InnoDB database engine replacement (whose parent company Oracle owns, a propos) Falcon to make MySQL an Oracle killer? Even a Microsoft SQL Server killer? <br><br>And of course, what does this mean for the PHP/Lamp community? MySQL's crossed over. It's got an air of "enterprise" to&nbsp; it from Sun's purchase. More so than even their teamup with SAP. More so than MySQL's oft-public proliferation and succcess storeis. This database, which until recently didn't support constraints in a useful way, is now Sun's. Will they keep making releases available for free? Will they switch to the commercial model completely? Will this again jeopardize the MySQL /PHP extension's status? Heck, does this mean that the Java MySQL driver will get some love?<br><br>I can't wait to hear more. <br><br><br>
</p>
  			<a href="jl/blogPost/20071110.html"><h1>The world keeps spinning.. quickly.</h1></a>
  			<p>10 November 2007</p>
  			<p>
This is sort of Java-related, but as it's used in some way by all of the major java web frameworks, it's worth noting that <a href="http://dojotoolkit.org/" target="_blank">Dojo 1.0</a> has been released! <br><br>As for me -- I've been knee deep in amazingly cool code. I've not had a chance to take too deep a look at Spring 2.5, but it seems promising -- particularly the renewed support for alternative configuration patterns. Maybe Guice is stirring the pot? <br><br>Also, I've noticed that the benefits of grids are increasingly popular. I'm very interested in grids -- they're useful for process intensive applications like search engines, and almost anything that can be represented as a directed edge graph. Microsoft's <a href="http://www.youtube.com/watch?v=WPhE5JCP2Ak" target="_self">Dryad&nbsp; </a> seems to be a graph based implementation of a the grid computing paradigm from Google, 'MapReduce'. That is, where as MapReduce is just one type of algorithm distributed over a grid, Dryad is a way to express algorithms, distributed over a grid. Sounds amazing. <br><br><br>
</p>
  			<a href="jl/blogPost/20070722.html"><h1>Quick Update, DIY Zoning, Mac/Ubuntu shock, and phantom key commands</h1></a>
  			<p>22 July 2007</p>
  			<p>
<p> It has been forever and a day since I've blogged, and not for want of trying!</p><p>It's been an amazing, wonderful month at my latest gig. </p><p>As I type this on my windows copy of MS Word, I find myself reaching for my Mac-imbued command keys and trying to use alt to do weird things. </p><p>I got introduced to Ubuntu Linux, the first Linux distro to ever, ever, completely work out of the box with the super-proprietary hardware on my old Sony VAIO laptop. Even my wireless card works, which was unthinkable! The wireless card never works on Linux without insane hacking on MadWifi (you know the whole ndiswrapper dance?) and some sort of sacrificial lamb… </p><p>I'm finding out a lot about the wide world of Cocoa and the utopian computing environment that was (and, to some extent continues to be in modern-day OS X) NeXT.&nbsp; Objective C's turned out to be a lot of fun, and in particular, using Maven Oh yeah, I went to&nbsp;&nbsp; Oregon for the 4th of July weekend, and that was humbling. Absolutely beautiful. Lastly, the last Java User Group's topic was pretty cool, and well worth your time if you're interested in wielding tech and bettering your home : &nbsp;<a href="http://diy-zoning.sourceforge.net/">DIY zoning</a></p>
</p>
  			<a href="jl/blogPost/20070616.html"><h1>Moving On, Recap of The Phoenix Java User Group   Meeting on the 13th</h1></a>
  			<p>16 June 2007</p>
  			<p>
Yesterday (2 hours ago) was the last day at my job, and closes one chapter on my life. I’m thankful for the experience. I will begin the next - undoubtedly amazing -chapter of my life Monday, and am no less than gitty at the prospect. <p>Wednesday was the mensal Java User Group, and a particularly good one at that! I post a recap here because they say that you don’t remember anything you don’t use within 2 weeks, and the least I can do is regurgitate 2 day old knowledge towards that end. </p> <p>Ted Neward was the speaker, giving two talks.</p> <p>One was on the groovy language; the notes on this one are briefer, as the talk was lighter.</p> <ul> <li> Groovy was started 3 years ago by James Strachan. </li> <li> Goal: create something easier to work with than Java </li> <li> Java (surprise!) isn’t the last word on languages </li> <li> Sun’s attitude reminiscent of Grover Cleveland’s suggestion that they should close the patent office – that’s to say, "what else could there possibly be?" </li> <li>ACM tried to assess how productive somebody is. They determined that a young programmer writes about the same amount of useful bug free lines of code per day as an experienced programmer, except that the experienced programmer gets the code right the first time around. </li> <li> ACM said that a language like C gets something like 4-6 assembly instructions per line. Java / C++ get 6-10. Lisp, amazingly, can get hundreds, maybe even thousands! A language can be inherently more powerful. It makes sense to get the most bang for those X lines of code you get a day. </li> <li>For more, check out the groovy home page.</li></ul> <p>The other talk was about debugging ("Busy Java Developers Guide to Debugging"), which I found fascinating because Ted seems to really enjoy this.</p> <ul><li> What is a bug? Anything the customer doesn’t expect?</li> <li> There are utilities, and JDK 5 and 6 introduced a raft of APIs/ tools, like JConsole, which is a service console shipped with JDK 6.</li> <li> Management needs to display a commitment to quality</li> <li> Schedule debugging into the project</li> <li> "Bug chats" are the highest priority meeting that can be called in some environments that Ted has worked</li> <li> Scott Davis (paraphrase): "Only 40% of projects use some form of unit tests" !</li> <li> "Ship It!" good book on debugging (I can vouch for that—the book broaches all the stuff you do anyway (setting up a bug tracker, setting up a source code respository, and a heckuva lot of other basics, and makes them a coherent discipline.)</li> <li> John Robbins, Microsoft SQL Server team, relays that developers used "teddy bear" debugging, talking through an issue with a stuffed animal. Talking through a problem forces the brain to enumerate it in a different manner and potentially will provoke a solution.</li> <li> Simialarly, sometimes walking away from a problem and taking a walk is beneficial. Often, the solution will come just as you’ve left the office and on the drive home, or as you’re sleeping: "Aha! Eureka!" </li> <li> JPDA is a general architecture for tooling support in Java. It’s comprised of: <ul> <li> JVMI – agent inside the debugee’s VM </li> <li> JDWP – java debug wire protocol </li> <li> JDI – Java debug interface</li> </ul> </li> <li> Other cool utilities: <ul> <li>jdb standard console debugger </li> <li> extcheck: detects duplicate classes loaded via the $JDK/ext directory. </li> </ul> </li> <li> Experimental tools: <ul><li> Jps, jstat, jstud, jinfo, jhat, jmap, jsadegd, jstart: cool experimental tools that aren’t guaranteed, and that are often written by Linux/Solaris people and may not run on Windows &nbsp; </li></ul> </li> <li> How to approach a bug <ul><li> "Duplicability" regenerates the bug once in 24 hours. </li> <li> Throw unit tests at it (which you should be doing anyway!) </li> <li> Track it in anyway shape or form. Enter it into the bug system for both the aforementioned enumeration which may itself be profitable and for the documentation to better aid the next guy. </li> </ul> </li> <li> Use the binary chop <ul> <li> Dive and conquer </li> <li> Start at component boundaries and then work out. </li> <li> Raise debug thresholds.</li></ul> </li> </ul><p> &nbsp;Naturally, I whole heartedly you go out and see <a href="http://www.tedneward.com">Ted Neward</a>  speak (in particular he's pushing <a href="http://www.nofluffjuststuff.com/speaker_view.jsp?speakerId=9&amp;section=blog">No Fluff, Just Stuff"</a>) when you get a chance. He was obviously knowledgeable, a good speaker, very worth it.&nbsp; </p>
</p>
  			<a href="jl/blogPost/20070613.html"><h1>Safari For Windows! Huzzah!</h1></a>
  			<p>13 June 2007</p>
  			<p>
Apple's got <a href="http://www.apple.com/safari/" target="_self">Safari available for Windows</a> (is this a surprise to anyone though?). <br><br>The site wasn't as funny as when iTunes came out and the website had something to the effect of, "Hell's frozen over: iTunes for Windows." Good news, nonetheless!<br>
</p>
  			<a href="jl/blogPost/20070528.html"><h1>Java on the Client, Part 1</h1></a>
  			<p>28 May 2007</p>
  			<p>
<p>With all this hype about <a href="http://www.google.com/search?q=java+fx&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=org.mozilla:en-US:official&amp;client=firefox-a">JavaFX</a> (!) since JavaOne (so much came out of that conference and has been by and&nbsp; large ignored because of JavaFX. This is most true with the prospect of <a href="http://weblogs.java.net/blog/enicholas/archive/2007/05/java_kernel_unm.html">1-2&nbsp; MB downloads for the JRE</a>, the so called "Java Kernel"), I've decided to&nbsp; take inventory of the Java desktop landscape again, and see what's changed/grown&nbsp; since I've developed anything large with it. The desktop has languished behind&nbsp; the server in Java, often to the chagrin of the desktop / client-side&nbsp; developers who made the platform grow in the early, primordial java applet&nbsp; days.&nbsp; </p><p> First, I review the Rich Internet Application landscape in&nbsp; general, as it will serve as a useful backdrop against which all this new stuff&nbsp; makes sense.</p> <h2>The RIA Landscape Thus Far </h2> <h3>The Usual Contenders </h3> <p>JavaScript, HTML/CSS, a healthy dose of basic HTTP and&nbsp; SVG/VML combine to beautiful effect, as Google's Gmail, Maps, Reader, and more&nbsp; can attest. This is the standard bearer: it's prevalent (enough), easily adopted&nbsp; (standard technologies, free) and can be deployed incrementally. You don't&nbsp; (necessarily) cede search engine index-ability and standard usability requirements&nbsp; by using it. The other platforms have this now, too. </p><p> And a heck of a lot more.</p> <h3>Microsoft's Silverlight</h3> <p>Things are different now. Microsoft recently announced (or,&nbsp; rather, formally debuted) their <a href="http://www.microsoft.com/silverlight/default01.aspx">Silverlight</a> offering, which is astonishingly good news in of itself. It presents the newly&nbsp; solidified Adobe/Macromedia gelatin with a diluting agent.&nbsp; It could also present the developer with a&nbsp; cross - platform .NET engine. The Mono project has already announced that it&nbsp; will support <a href="http://www.mono-project.com/Moonlight">the plugin on&nbsp; Linux</a>. The plug-in itself will run on OS X and Windows.&nbsp; Silverlight is a set of technologies, and is&nbsp; deployed using a subset of .NET technologies. Microsoft's new Expression&nbsp; tooling environments simplify development. It presents powerful opportunities&nbsp; for rich media applications, including streaming video, and animation.</p> <h3>Adobe's Flash and Flex </h3> <p>Adobe's Flash is only part of the problem - it puts Flash in&nbsp; place as a (superior) contender against, well, the multimedia capacity of&nbsp; JavaScript and animated GIFs, for example. What's really at stake is the ability&nbsp; to deploy "applications" on the internet, not just pretty pictures. Flex, and&nbsp; in recent years, Flash, solve that, and do so better than Applets were able to&nbsp; before them. Recently, Adobe <a href="http://www.joshlong.com/jl/entry/20070425">open&nbsp; sourced Flex</a>, making the platform more accessible (and cheaper!) to the&nbsp; masses.&nbsp; The tooling (Flash CS3, for&nbsp; example), of course, is still not free. (Big surprise? Adobe's a tooling&nbsp; company.)</p> <h3>Applets and Java Webstart</h3> <p>Sun's Applets (naturally) predate any of these other items.&nbsp; They were the first to market, but unfortunately are the worst. Java Webstart&nbsp; is useful (very useful) where it's useful. Unfortunately, whereas you could see&nbsp; using Flash for an ad (for example), you could never use Java.&nbsp; First, it's too cumbersome to produce the same&nbsp; thing as in Flash using Java. Second, loading the applet itself has&nbsp; historically been wrought with issues: startup time, plug-in prevalence (and ease&nbsp; of adaptation), etc.</p> <h2>Java on the Desktop 2.0</h2> <h3>What's in a name?</h3> <p>See how I did that? "Web 2.0"? "Java on the Desktop 2.0"? We&nbsp; need some sort of spiffy acronym here. "Java Desktop 2.0"! "JDeskto".. nah. "JD2".&nbsp; Nah. "JD 2.0"? Pronounced, "JD two point ohhh"? Maybe Sun should just corner&nbsp; the whole market and unveil something so hard to top that no one will even&nbsp; bother, like, "RIA 2.0". Who could argue with "Rich 2.0"? The "internet is the&nbsp; computer, 2.0". We could name it something to capitalize on the ridiculous&nbsp; amount of traction that Flash FX, and Flex, have achieved. Something trendy.&nbsp; Something with a "X" or two in it. It's got to be "Java". It's got to have that <em>je ne sais quoi.</em> And "X"-y. It's got&nbsp; to have an "X". None of this "E" business. That's gotten us in enough trouble.&nbsp; I have it: "Java FX"! </p><p> What about, "Java FXE 2.0"?</p><p> I worry the JavaFX name will suffer the same bloat that the Java&nbsp; and .NET names did.&nbsp; JavaFX is actually a&nbsp; set of technologies. It describes a scripting language (which doesn't&nbsp; necessarily need to be used for pretty looking user interfaces), <a href="http://weblogs.java.net/blog/chet/archive/2007/05/media_frenzy.html">elevated&nbsp; multimedia support</a>, and a mobile platform. It will benefit from the Java Kernel&nbsp;&nbsp; (I guarantee you the Java Kernel wasn't&nbsp; developed so people could load .EARs quicker!) and from work being done in&nbsp; general startup time decreases. It also describes a runtime environment on mobile&nbsp; phones as well as the desktop. So when I say "JavaFX", I am more generally&nbsp; talking about everything Sun is doing to regain prominence in producing pretty&nbsp; user interfaces without HTML.&nbsp;&nbsp; </p> <h3>Now Sun's playing catch-up. </h3> <p>This is sickening because this was their market to lose,&nbsp; originally. Their applets were poised to be the platform that Flash became.&nbsp; They have been stalled by a general lack of attention from Sun on the desktop&nbsp; market, and a lack of attention to lowly web developers, in particular.&nbsp;&nbsp; There&nbsp; are many problems to solve which to some extent are already being addressed.&nbsp; Others are there if you know where to look. </p><p> For example, the common developer isn't looking to build a Microsoft&nbsp; Office, or a Photoshop, he's looking to build a forms intensive IS application.&nbsp; This is why Visual Basic had(s?) such a strong footing in corporate America:&nbsp; you could really quickly build some forms to babysit a database. That's also&nbsp; the reason so many people flocked to the web when it became apparent you could&nbsp; build forms to babysit the database. That's also why people are flocking to&nbsp; Ruby on Rails, because they get that most people just want to build forms to&nbsp; babysit databases, <em>easily.</em> </p><p> That's why it's called "Windows Forms", and not -say - "Windows&nbsp; UI". Naturally, the multimedia capabilities have arrived en masse for .NET, and <a href="http://en.wikipedia.org/wiki/Windows_Presentation_Foundation">Windows&nbsp; Presentation Foundation</a> is a testament to its refined focus. However, at&nbsp; the end of the day, it's a super set, and not the normative application of&nbsp; Windows' UI facilities. </p> <h2>Sun should build out the basics first. </h2> <p>Have you tried building a basic Swing application to talk to&nbsp; a database in recent years? It's still unpleasant. Put another way, using&nbsp; Tapestry or Spring MVC, or even JSF to in turn use HTTP to <em>fake</em> stateful, event driven, interactive forms is easier than using&nbsp; Swing to produce stateful, event driven, interactive forms. </p><p> Don't get me wrong. It can be done. Through <a href="http://www.swinglabs.org/">SwingLabs.org</a>, <a href="http://www.jgoodies.com/">JGoodies.com</a>, <a href="http://common.l2fprod.com/">L2FProd</a>, and others, it can definitely be&nbsp; hobbled together. It's not for the faint of heart though, and it requires a&nbsp; body of knowledge most people don't have time for what is usually easily done&nbsp; via a standard web application.</p><p> There is hope over the horizon, though. Sun's made some&nbsp; positive strides with JSR 296 (the "Swing Application Framework": <a href="http://jcp.org/en/jsr/detail?id=296">this</a> ought to do you, but just&nbsp; in case you might also try <a href="http://www.artima.com/lejava/articles/swingframework.html">this one</a>).&nbsp; Thus far, the framework isn't final, but it is promising. Where JSR 296 falls short,&nbsp; other JSRs for data binding and persistence (for example) will fill the gaps.&nbsp; It addresses common infrastructure support,&nbsp; like a more worldly action framework, i18n support, and so on. </p><p> There are very few cohesive opportunities available right&nbsp; now, however. Oh, sure, you could ascend the mountain, your .zip of the <a href="http://www.netbeans.org/products/platform/">Netbeans's</a> or <a href="http://www.eclipse.org/platform/">Eclipse RCP</a> code in hand, and get&nbsp; somewhere, eventually. But that's hardly "approachable." Few people build applications&nbsp; as complex as your average IDE, it turns out. </p><p> A more substantive approach is <a href="http://spring-rich-c.sourceforge.net/">Spring's Rich Client platform.</a>&nbsp; The platform suffers from poor&nbsp; documentation, though that's mitigated more and more by the <a href="http://opensource.atlassian.com/confluence/spring/display/RCP/Home">wiki</a>.&nbsp; Using it, you're able to get the husk of an application up and running in&nbsp; literally minutes (assuming you've checked out the project and figured out how&nbsp; to get it working). Once you launch, it has 90% of what you're likely to need:&nbsp; dependency injection (it <em>is</em> Spring,&nbsp; after all), resource management (icons, labels, all internationalized and&nbsp; extracted to resource files), action framework, data binding, validation, a "view"/&nbsp; "page" schema, and even integration with "sexy" technologies where it wouldn't&nbsp; be useful to develop it in-house. It also takes care of the corner cases, too.&nbsp; It'll automatically launch a splash screen for you, for example. The splash screen&nbsp; is automatically centered. It has integration with a few help systems. </p><p> I like Spring RCP (if that wasn't obvious). Within a weekend&nbsp; I was able to build an application that talked to a SOAP service using POJOs&nbsp; (that's Spring, of course) talking to my client application. The client&nbsp; application knew how to do all the CRUD things you'd expect. I was able to take&nbsp; advantage of some of the nicer tools and do things like integrate the&nbsp; application into the system tray so that it was only visible when necessary,&nbsp; integrate a video pane using JMF,&nbsp; and of&nbsp; course provide on-the-fly upgrades/installation using Webstart (that's mostly&nbsp; true…), all because it was Swing. The mind boggles at what you could do with&nbsp; JOGL, Java (2|3)D, JavaZoom,&nbsp; and most&nbsp; any application of a good look and feel! That took another weekend. Or two… I&nbsp; don't want to talk about it. My therapist insists it's good for me, though. </p><p> The bulk of the application - the part that justifies&nbsp; building the application - was mostly finished the first weekend, thanks&nbsp; entirely to Spring RCP. Now, granted, that second weekend was only possible&nbsp; because I've banged my head against those particular walls a few times before. Many&nbsp; times before. </p> <h2>Building on top of Java</h2> <p>The Java FX announcement is good news, as it means that all&nbsp; of desktop java will get some much needed attention. This is good news for java&nbsp; developers as it's one more place where they'll get the job and not some other&nbsp; programmer who's not using Ruby on top of a JVM. The pieces are all there. We&nbsp; have a really rich API for components /user interfaces. We have the rumblings&nbsp; of change in the framework space for Swing. Work's being done to evolve or&nbsp; supplant missing multimedia support. We have the language, the framework plumbing,&nbsp; the incredible depth of history with networked applications. All in all, Java's&nbsp; got a strong hand. Now we have a unified voice behind JavaFX. The hurdles at&nbsp; this point lay mostly in finding appropriate abstractions and spreading best practices.&nbsp; These hurdles are easily dealt with as a community, however. Java has nothing&nbsp; if not a community. All in all, I'd say it's a good time to be a Java developer.</p>
</p>
  			<a href="jl/blogPost/20070505.html"><h1>Tapestry 4 Archetype Moved to the Tapestry Project at Apache</h1></a>
  			<p>05 May 2007</p>
  			<p>
<div><p>This is a little outdated, at this point, but I’m posting this just to follow through with things. </p><p>The Tapestry archetype mentioned here on this site is now officially included in the Tapestry source code, <a href="http://tapestry.apache.org/tapestry4.1/tapestry-archetype/index.html">available from Apache</a>.&nbsp; The documentation is all there, and is pretty much the same thing as I discussed here, however, the incantation has (naturally) changed to reflect its new home on Apache:</p><code>mvn archetype:create -DarchetypeGroupId=org.apache.tapestry -DarchetypeArtifactId=tapestry-archetype -DarchetypeVersion=4.1.2-SNAPSHOT -DgroupId=org.example -DartifactId=myapp -DremoteRepositories=http://people.apache.org/repo/m2-snapshot-repository</code><p>Thanks to Jesse Kuhnert (lead Tapestry 4 developer, nice guy, <a href="http://www.nabble.com/-announce--new-goodies-for-tapestry-4.1-p10246866.html">lots of support</a>&nbsp; during the process itself) and Howard (<a href="http://tapestryjava.blogspot.com/2007/02/maven-archetype-for-tapestry-4.html">on his blog, for example</a>) for their support!</p>&nbsp;&nbsp; &nbsp;&nbsp;</div>
</p>
  			<a href="jl/blogPost/20070429.html"><h1>If I were a South Park character...</h1></a>
  			<p>29 April 2007</p>
  			<p>
If I were a South Park character ( <a href="http://www.sp-studio.de/">South Park Studio</a>), I would look like: <br><img src="media/17891">
</p>
  			<a href="jl/blogPost/20070425.html"><h1>Flex is open sourced!</h1></a>
  			<p>25 April 2007</p>
  			<p>
<p class="MsoNormal">Fantastic news! Flex has been open sourced! </p> <p class="MsoNormal">Umm, what does this mean, in effect? It means that exposing a REALLY slim, sexy client has been possible for a long time, through a lot of different concoctions, not the least of which is OpenLazlo, and&nbsp; Ajax, and thereabouts. But Flex is the nicest option for those willing to pay. It’s slick, it’s quick (VERY quick, compared to Ajax/JSON), it’s powerful (well, Java Applet powerful, not ActiveX powerful. No CD ROM drives will pop out!). And now, it’s open source. See <a href="http://labs.adobe.com/wiki/index.php/Flex:Open_Source">Adobe Labs</a> for more.</p><p>So <i>that's</i> why James Ward <a href="http://www.jamesward.org/wordpress/2007/04/25/open-source-flex-top-10-reasons-to-rejoice/">was cooking cookies!</a>.</p><p>Congratulations, Adobe, on a very brave move.Every time a peice of mega tech emerges, my mind starts imagining what I could do with it. Each individual tool becomes "useful" and viable suddenly (isn't that atrocious? It takes it being open source for me to care?) Now, if I could only get a few dozen "open source" grids (eh, I know, I know, I'm not holding my breath), <a href="http://www.atomikos.com/products.html#ate">Atomikos Transactions</a>, <a href="http://www.springframework.org">Spring</a>, <a href="http://www.postgres.org">PostgresSQL</a>, <a href="http://terracottatech.com/">Teracotta</a>, <a href="http://www.adobe.com/products/flex/">Flex</a>, and a neat idea (mmm.... ebaysoftspaceazon... com)...</p><p> All that aside, <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=193593">Bruce Eckel's recently taken the Flex jump</a>, so maybe it's time to see why.</p>
</p>
  			<a href="jl/blogPost/20070408.html"><h1>A J2ME Archetype Based On Pyx4me.com&apos;s work, Antenna</h1></a>
  			<p>08 April 2007</p>
  			<p>
<p> In recent posts, I've blogged about my ambition to get a J2ME archetype up and running, and finally, I can present the fruits of my …quest! You thought I was going to say “labor”, eh? The nice part about the world is there are so many other people better positioned to beat me (or you) to the finish line. Case in point: the <a href="http://pyx4me.com/snapshot/pyx4me/" target="_blank">pyx4me project</a> project has done an incredible job of wrapping <a href="http://antenna.sourceforge.net/" target="_self">Antenna</a>, providing a JSE-based emulator, providing framework classes and of providing a working support for different things and of providing useful examples. </p><p> I've taken their examples and orchestrated an archetype for getting started quickly with J2ME.&nbsp; </p><p> Put another way, they've already done the work of getting started with J2ME. It just isn't (to me, a humble J2ME developer with a cause) apparent where to begin. So I made it apparent for my own purposes. Perhaps you'll find it useful, as well.&nbsp;&nbsp; </p><p> To get it up and running, simply issue:&nbsp; </p><pre>mvn archetype:create -DarchetypeGroupId=com.codecafe.archetypes \<br>-DarchetypeArtifactId=j2me-simple \<br>-DremoteRepositories=http://codecafe.dev-hda.com/repository \<br>-DarchetypeVersion=1.0-SNAPSHOT -DgroupId=org.example -DartifactId=myapp</pre><p> On my system, I have three system variables of importance. Here's the pseudocode for their organization:&nbsp; </p><pre>WTK_HOME=installation of wireless toolkit ;<br>JAVA_HOME=installation of java development kit ;<br>PATH=WTK_HOME/bin;JAVA_HOME/bin ;</pre><p> So long as all that's setup, you need only cd into your “myapp” directory and issue “mvn clean install” and then double click on the resultant .jad file to open up the emulator and preview your application.&nbsp; </p> <p> Please see <a href="http://pyx4me.com/snapshot/pyx4me"> the Pyx4me project's home page</a> for the overall project,&nbsp;&nbsp; <a href="http://antenna.sourceforge.net">the antenna project</a>, and, lastly <a href="http://codecafe.dev-hda.com/sites/j2me_archetype/">my documentation</a> for information on using the archetype, getting started on an application and coverage of a few common cases I ran into. If you find anything lacking or non intuitive, please drop me a comment and I'll try to address it.</p>
</p>
  			<a href="jl/blogPost/20070405.html"><h1>Pain Points with Location APIs and Sprint</h1></a>
  			<p>05 April 2007</p>
  			<p>
&nbsp;<p>The obvious: J2ME's suffered a lot of fragmentation (almost necessarily, given the ever broadening range of devices to which an application may be deployed) that have worked against the "write once, run anywhere" mantra. Particularly, Sun has proffered a multitude of JSRs that are considered "optional packages" that any vendor may (or may not) include in its platform/handset. There are so many JSRs (see, for example, <a href="http://mobilezoo.biz/j2me.php">this</a>) that there are occasionally wrapper JSRs that serve only to include other JSRs. Thus, a vendor that implements JSR-185 ("Java Technology for the Wireless Industry") is really mainly only guaranteeing the presence of other JSRs. Similarly, plenty of platforms have solutions that later were standardized into JSRs. Thus, using a technology is a manner of gambling, where you hope you wager your target platform implements the requisite base platform, technologies, and APIs (that is, you want the JSR version of a given API where available, but if you need it you'll use a proprietary API, right?) </p><p>Sooooo... I have a Sprint handset, the Samsung A900 (<a href="http://developer.sprint.com/view_devices.do?device=77527">this one.</a>) Nokia and Motorola are easily "hacked". Sprint tends to control their handsets, closely, alas. The same rules as with any other closely guarded platform apply: no hacking! It's not necessarily in a carrier's interest to expose these APIs to just anyone. They may want to recoup the cost of developing the technology. They may be only interested in bigger partners with a compelling, mass-appeal application that could be profitable to the carrier.</p><p>In this case, vendors had to implement GPS for the E911 laws (see <a href="http://www.fcc.gov/911/enhanced/">this</a> and <a href="http://jeepx.blogspot.com/2006/02/paul-saffo-got-it.html">this</a>), and so the functionality is already present on the phones. And just imagine the slew of applications that could be developed with GPS support-why wouldn't they want to expose it, right? </p><p>Slowly, JSR 172 is taking hold, and where it's not, you may find QJAE's Location APIs. QJAE is Qualcomm's Java Application Extensions which provide useful APIs. My particular handset has this API's Location Based Service API, and not JSR 172, but at least there is an API! </p><p>So, armed with this, I started looking for the compiled classes: they're nowhere to be found! I have the Spring SDK, and apparently (according to <a href="http://www.shaftek.org/blog/archives/000139.html">this</a> ancient article) the jars with the compiled API were at one point included in the Sprint SDK. It's not currently. Apparently, Sprint's stance is that you need to be a partner to access this functionality. Some people have had success reverse engineering the API from documentation and explicitly enumerating the values of the constants at runtime from the handset. Sprint's stance is that this is illegal.&nbsp; </p><p>This also conflicts with my limited understanding of how Sprint limits access to other APIs. Other APIs (such as MMAPI) are accessible if and only if you sign it using a pricy Verisign certificate and obtain a partner account with Sprint (for deployment). For testing, everything seems accessible enough by simply "enabling" your handset on Sprint's developer site (see <a href="http://developer.sprint.com/site/global/develop/activation_device/p_device_activation.jsp">this
developer.sprint.com article</a> for more) and using Sprint's toolkit to sign it (as outlined <a href="http://developer.sprint.com/getDocument.do?docId=84465">here</a>)). </p><p>That's enough for this post. Let's see what else I can scrounge up. I need more information.</p>
</p>
  			<a href="jl/blogPost/20070401.html"><h1>Spring and GPS (JSR 179 --javax.microedition.location) support</h1></a>
  			<p>01 April 2007</p>
  			<p>
<p>April Fools Day is Here! </p><p>I suppose I'd forgotten the date. I read Google's proposed, <a href="http://www.google.com/tisp/install.html" target="_self">free ISP plan</a> with shock and horror. Then it hit me. Enjoy that one.</p><p>In other news, I'm playing with my Sprint A900 handset to use Location Based Services (LBS). It's frustrating, to say the least. Sprint's lackluster support of the developer community makes it all the more difficult. Googling the subject reveals post after post on bulletin board after bulletin of people bemoaning no support of LBS on Sprint handset since 2002.</p><p>Apparently, for all but a select few phones (the Blackberry among them), JSR 179 (the javax.microedition.location packages) isn't supported at all. In their stead is Qualcomm's proprietary JQAE API (probably because the GPS chipset is Qualcomm for a lot (if not all?) of their devices).</p><p>That's fine, I'm willing to use a proprietary API and do the god-awful "detection" dance I find is the norm in J2ME:</p><code>try {<br>&nbsp; Class.forName( "javax.microedition.location.Coordinates") ; &nbsp; <br>&nbsp; // it has support<br>}catch (Throwable t){&nbsp; <br>&nbsp; // it doesn't. Try loading the Qualcomm API<br>}</code><p>See <a href="http://www.sprintusers.com/forum/showthread.php?t=52772" target="__blank">this</a> and/or <a target="__blank" href="http://forum.mgmaps.com/viewtopic.php?printertopic=1&amp;t=74&amp;postdays=0&amp;postorder=asc&amp;start=0&amp;finish_rel=-10000">this</a> for more information on that.</p><p>However, it turns out even there things aren't so easy. </p><p>Before you've tried anything in code, you need to enable your phone's developer root. Translated: they've restricted access to certain APIs (Among them: "LBS: Location Based Services", "JSR-135 Mobile Media 1.1 API", "JSR-120 Wireless Messaging 1.1 API" and "JSR-75 Personal information Management (PIM)). You can access them assuming you've signed your MIDP with Verisign's $500 certificate and that you've unlocked your specific handset's (up to 200)&nbsp; privileges from the Sprint.com developer website. I haven't gone through the process, and so I don't know if this will work, but it's certainly frustrating. </p><p>And, from what I've been reading, you also need to be a Sprint business partner! I don't even know how you begin to procure that, nor do I care for the moment. It's as if they don't want people developing on their platform.</p><p>Nokia's phones are exponentially more approachable. </p><p>If I find anything, I'll report back on this.</p>
</p>
  			<a href="jl/blogPost/20070322.html"><h1>J# Post-Mortem</h1></a>
  			<p>22 March 2007</p>
  			<p>
<p>J# retired and I just now caught this! That's wonderful news! </p><p>From the announcement (http://msdn2.microsoft.com/en-us/vjsharp/default.aspx), the following:</p><blockquote><b>Retirement of J# language and Java Language Conversion Assistant from future versions of Visual Studio</b> Since customers have told us that the existing J# feature set largely meets their needs and usage of J# is declining, Microsoft is retiring the Visual J# product and Java Language Conversion Assistant tool to better allocate resources for other customer requirements. The J# language and JLCA tool will not be available in future versions of Visual Studio. To preserve existing customer investments in J#, Microsoft will continue to support the J# and JLCA technology that shipped with Visual Studio 2005 through to 2015 as per our product life-cycle strategy. For more information, see Expanded Microsoft Support Lifecycle Policy for Business &amp; Development Products. <p></p></blockquote><p> Now of course, there are some issues. Apparently they've
introduced 64 bit support and that ends in 2017. So if nothing else, we
have 2 (conflicting) dates: 2015, or 2017. </p><p> Bah. Either way, we'll be rid of it within a decade :-)<br></p><p>To read the announcement, you'd think they're being burdened by it! Which is true. They are. As they are burdened by maintaining the VB6 to VB.NET migration pathways. And the C++ to managed C++ pathways. If .NET debuted with anything in particular as gospel, it was "forward thinking, backwards compatible." Now it seems like they're abandoning a lot of this for the pretense it was. I still don't quite understand what their pitch to the java world is though. The Petstore(s), I don't think, swayed any opinion. This is especially true given what was perceived to be botched politicking on Microsoft's part behind the first one.&nbsp; Is there anyone who actually used Java and then preferred having Visual Studio wizard-away everything previously done in ant build file? That is, who would switch to get WYSIWYG-everything? </p><p> The main cause for defection in the Java camp is ease-of-use, but those concerns are (seemingly) better addressed by Ruby on Rails, or PHP. </p><p>Put another way: the reason J# is being retired is because it's never been the value proposition Microsoft imagined it would be. There aren't swarms of people looking to leave Java for .NET of all things. If anything,&nbsp; people are retrofitting their client applications with JavaScript and building the more sophisticated stuff in Java and it's constantly expanding stacks. </p><p>Or, it could be I'm missing everything all together. </p>
</p>
  			<a href="jl/blogPost/20070310.html"><h1>Developer Collaboration and Eclipse Jazz</h1></a>
  			<p>10 March 2007</p>
  			<p>
<p>The major leap forward seems to be project lifecycle management, and collaboration suites. It doesn't seem like too long ago that we had a compiler, an editor, and some sticky notes. </p><p>In the Microsoft camp, my lowly Visual C++ has evolved into <a href="http://msdn2.microsoft.com/en-us/teamsystem/default.aspx">Visual Studio Team System/Team Foundation System/Orca/super maximized enterprise grid suite 2.0/whatever</a>, which in turn is an editor on top of the compiler, a collaboration suite with groupware-features and a source versioning system&nbsp; (and maybe that's an undersell?)!</p><p>And Borland, oh-don't-get-me-started! Borland's <a href="http://www.borland.com/us/products/index.html">whole business</a> is now centered on everything that happens before and after the work in JBuilder has been done: it's all about the lifecycle of the project. </p><p>JetBrains has their <a href="http://www.jetbrains.com/teamcity/">TeamCity product</a>, which - along with their TMate source control client - form a suite of collaboration tools above and beyond working in IntelliJ. Even IntelliJ now has the ability to "share" a coding session with someone. &nbsp;</p><p>And, now, I just read about the Eclipse Foundation's (and tech-lead Erich Gamma's) push into collab-suites with Eclipse Jazz (eh, <a href="http://redmonk.com/cote/2006/06/07/rational-jazz-soon-to-eat-more-of-its-own-dog-food-transparency/">here</a>, and <a href="http://www.theserverside.com/tt/talks/videos/ErichGammaText/interview.tss">here</a>). Of course, (the former) Rational has always been about this sort of thing in a lot of ways, so it's no surprise the influence eventually found its way to Eclipse. Interesting, I say! &nbsp;</p><p>Does this mean there's little more vendors can see doing for individual developers? <a href="http://www.intellij.com">IntelliJ&nbsp; IDEA</a>) (mmm.. I love you) is good, but is it really the be-all-end-all of individual productivity? All without one patronizing Wizard? Really? Also, I'm a little unclear on how this new wave of software fits in with traditional tools. </p><p>Suppose I have a wiki and bug defect system (<a href="http://trac.edgewall.org">Trac</a>)), a source control system (<a href="http://subversion.tigris.org/">Subversion</a>), an IDE (IntelliJ, emacs) and an email address/IM client, a project management tool (Microsoft Project?), and even a build system with a deficiency complex (<a href="http://maven.apache.org/">Maven</a> and <a href="http://www.atlassian.com/software/bamboo/">Bamboo</a>) what am I missing?</p>
</p>
  			<a href="jl/blogPost/20070305.html"><h1>New version of the Tapestry 4.1 archetype</h1></a>
  			<p>05 March 2007</p>
  			<p>
I just deployed a new version of the Tapestry 4.1 archetype. It's the same parameters as the archetype discussed <a href="http://www.joshlong.com/jl/entry/20070227">previously</a>. Essentially, the new version provides a few new features:<br /><ol><li>an interesting use of an engine service (in this case to provide a working rounded corner generator, as with Google Groups' rounded corner generator URL) and a corresponding component to employ the service.</li><li>the rounded corner component mentioned above, which is pretty sophisticated in of itself (as introductory code goes, anyway!)</li><li>much better documentation (mvn site, and then peruse the resultant docs in the target directory.) <br /></li></ol>.<br />
</p>
  			<a href="jl/blogPost/20070228.html"><h1>Halfsteps on the Tapestry Archetype; Gmail&apos;s Down!</h1></a>
  			<p>28 February 2007</p>
  			<p>
<p>Gmail is down, and Iâve not been able to access it with any
sort of consistency for hours. What am I missing? Whatâs wrong? This has happened to me before, but never for this duration  </p>  <p> That aside, I've deployed updates to the Tapestry 4.1 Maven archetype,
and partly updated the documentation. An order of magnitude better, to
be sure, but there remains much more to be done...</p>
</p>
  			<a href="jl/blogPost/20070227.html"><h1>A Tapestry 4 Maven Archetype Based On The Tapestry 5 Archetype, Spring and samples included.</h1></a>
  			<p>27 February 2007</p>
  			<p>
I love working with Tapestry 4, but I figure that it's because it's already configured to do the cool tricks I want to do with it. It's not easy getting off the ground on a blank new project. (Nor is it easy getting off the ground in a Ruby On Rails project without using the project generator!). Maven offers a solution, but, seemingly, no good archetype for it exists. I want something that'll let me type mvn jetty6:run and pull up a page immediately after I've run the familiar "mvn archetype:create" incantation.<br><br>I tried the (admittedly preliminary, at this stage in the game) Appfuse archetype,&nbsp; and the one from Webtide. However, I wanted something that I could demo with really quickly. I imagine: 1.) I have the archetype. 2.) I mvn clean install it, and voilà, instant "hello world" application that could be aggressively/quickly modified. I took Howard Lewis Ship's Tapestry 5 Simple-Project archetype and expanded it/retrofitted it with a lot of Tapestry 4 scenarios. <br><br>I also wanted something that eased some real-world concerns or, at least, hid them. Something that already had a working example of most common things (setting up an ASO, using Spring. Perhaps I'll add SEO friendly URLs configured by default (well, for the common ones, with the less-obvious options commented and explained.). <br><br>Anyway, thanks again to Howard and the Tapestry for such a wonderful product. I'll evolve this version and clean it up. If there are any suggestions, I'd definitely appreciate it. <br><br>It's deployed to my repostory. Run the following command, and you'll have the archetype installed and a project created. Then, merely cd into the wordking directory and run <code>mvn idea:idea</code>, or <code>mvn eclipse:eclipse</code>, and then run <code>mvn jetty6:run</code> to get started. This will get your application running on port 8080. Simply bring up http://127.0.0.1:8080/ and you'll get a listing of all the contexts. You can modify the various configuration fles (save, of course, for web.xml), and HTML ad-infinitum without restarting. The second you compile a fresh class, Jetty will reload the context automatically. <br><br><code>mvn archetype:create -DarchetypeGroupId=com.codecafe.archetypes
-DarchetypeArtifactId=tapestry-simple
-DremoteRepositories=http://codecafe.dev-hda.com/repository
-DarchetypeVersion=4.1.2-SNAPSHOT -DgroupId=c.b -DartifactId=view</code><br><br>
</p>
  			<a href="jl/blogPost/20070224.html"><h1>Playing with Swing, JSR 296</h1></a>
  			<p>24 February 2007</p>
  			<p>
I just started playing with <a href="http://jcp.org/en/jsr/detail?id=296" target="_blank">JSR 296</a> as I've recently started building an application that's Swing based (albeit, as an applet, which I'd like to make Java Webstart-able). It's phenomenal! As it stands right now, you can easily databind, internationalize, easily layout GUIs, and build on a useful Action abstraction if you're willing (and able! And what rocket scientist isn't?? Oh, you're <span style="font-style: italic;">not </span>a rocket scientist… well…. I see… Go sit in the corner.) to coordinate the tapestry of solutions out there. <br><br>JSR 296 seeks to bring a lot of that flexibility to the developer right off the bat. With it you get internationalization, an action model, application lifecycle, persistence, etc. Pretty cool. Still missing is databinding and IOC and a layout mechanism. Fortunately, <a href="http://spring-rich-c.sourceforge.net/index.html" target="_blank">SpringRich</a>, and <a href="https://jgoodies.dev.java.net/" target="_blank">JGoodies</a> help alleviate those pain points, so I'm pretty stoked about the possibilities. <br><br>Maybe one day we'll have a framework for the desktop user and it'll endeavor to bring "web-style programming" to the desktop.<br><br>Which reminds me: all those frameworks endeavoring to bring Swing-style programming to the web (Wicket, JSF, Tapestry, Echo, whatever else I missed: this means you!) should change their attitude a little. It's telling that all of the things this framework brings to the table have been de rigueur in web frameworks for half a decade.<br><br>Check out <a href="https://appframework.dev.java.net/intro/index.html" target="_blank">the Swing Application Framework</a> for more.<br><br>I wonder what this will mean for so much of the way an application is built currently. Will I have to become very good at securing SOAP services again? Will an easy, useful desktop programming paradigm reverse the transition from Web Services to JSON? I deployed a custom XML-based (not XML-RPC, or SOAP, but my own protocol) service specifically to be able to achieve modest portability/thoroughput on a prototype J2ME application I built a year or so ago. This was so because the XML parsers are sketchy enough. SOAP stacks (while available, even as a standard) weren't prevalent enough.&nbsp; I can see Spring earning it's keep here, again. Imagine what could be done with a useful databingn mechanism and a convenient way of exposing services (à la Spring). Desktop applications could become the rich client king again. Maybe. <br><br>Meanwhile Bruce Eckel <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=193593" target="_blank">seems to think rich clients are where it's at</a>, as well. Of course, he's pitching Flash, and not Swing. <br><br>Can't wait to see what's next. Windows Vista (Aero, WPF) is poised to make the rich client desktop commonplace. Maybe it'll heat up the landscape enough to drive a resurgence for the desktop developer.&nbsp; Any one use any of these tools? Anything I should know?
</p>
  			<a href="jl/blogPost/200702241.html"><h1>IntelliJ 6.0 and JDK 6.0 upgrade</h1></a>
  			<p>24 February 2007</p>
  			<p>
I'm about to upgrade to JDK6 on my Windows XP machine. I'm running IntelliJ 6, which I understand works well on the new JDK. Confusing is the lackluster availability of the JRE. I expect Java.com to yeld a JRE 6 build, but instead it's still pushing the old JRE 5, which is also still being bundled with various PC vendors by default. Why is this? At what point does Sun certify a release as being "good enough" for the developers AND the rest of the world? &nbsp;<br><br>The consensus seems to be that Java SE 6.0 offers the best out-of-the-box performance boost yet, by far.<br><br>After a bit of searching, I finally got to <a href="http://support.jetbrains.com/kb/entry.jspa?externalID=222&amp;categoryID=4">this thread</a>&nbsp; which has the whole process spelled out for you. I went with the second choice enumerated on the page (deleting the jre, and replacing it with JDK1.6's JRE as I didn't want to have to use idea.bat. Using idea.bat causes the DOS console to stay open while you're in IntelliJ. I created a second .bat file whose job it was to load the first one (idea.bat) like so: start idea.bat, however, the trouble is that didn't seem to work. I didn't want to give it much more thought and simply pursued the second option. <br><br>I wholely recommend the upgrade it's very quick. Loading IntellIJ would be one kind of speed increase, but loading a very big project quite another, and they both dramatically improved, to the point that IntelliJ no longer shows me "Tip Of The Day" when I'm doing these actions because it doesn't have to keep me entertained. <br>&nbsp;<br>Completely worth it!&nbsp;
</p>
  			<a href="jl/blogPost/20070212.html"><h1>Sun Java Wireless Toolkit 2.5 for CLDC (Formerly, &amp;#8220;WTK&amp;#8221;) (finally)</h1></a>
  			<p>12 February 2007</p>
  			<p>
<p>Aside from all the new APIs supported (and there are a LOT – some only previously available through extensions. Notable among them: Java APIs for Bluetooth ( JSR 82), Wireless Messaging API (WMA, JSR 226), and J2ME Web Services Specification (JSR 172), and of course we can’t forget.. argh... just check out <a href="http://java.sun.com/products/sjwtoolkit/download-2_5.html">Sun's page</a> for the full scoop), the coolest thing for me has to be the standard support for the Location API’s. These APIs, of course have helped propel J2ME into orbit via Google’s "Google Mobile Maps" application (and the plethora of other maps / GPS applications out there helped, too, I suppose :-) )<br><br>This is an impressive release and long-awaited. One gripe: where’s my Linux SDK? I’ll have to use the windows version for now, I suppose. I should count my blessings: there doesn’t seem to be any mention of a Mac version!</p>
</p>
  			<a href="jl/blogPost/20070221.html"><h1>Salesforce.com&apos;s new language/platform pack: &quot;Apex&quot;</h1></a>
  			<p>28 January 2007</p>
  			<p>
<p>I just noticed Salesforce.com’s latest step towards platform domination: <a href="http://developer.appexchange.com">Apex.</a><br><br>I like the name.  Cool. Sounds like Apress, and Ajax. Half buzz, half hard-hitting tech done cheap, with just a twist of that  je ne sais quoi, that “this could be a Windows codename” quality. Yeah! <br><br>I like the possibilities. The market for middle ware integration is astonishing. The application that’s readily customized is the application that more readily adapts, and is adapted. This should go a long way towards removing all the edge cases defying Salesforce.com’s proliferation. Apparently, they have a little less than 30,000 customers. I don’t know if that’s individual users or entities, or what. It’s not nothing. Interesting: the inclusion of  LINQ-style sql objects:<br><code><br>Account acc = [select Id from account where name = 'xxx'];<br>Account[] accs = new Account[]{acc};<br>System.assert(accs[acc.id] != null);<br></code><br>It’s a typed SQL query, embedded inline with your java. Not like those opaque String queries I keep hearing about… <br><br>I got the hint on all of this from eWeek magazine, in a small blurb about Apex of the January 22 issue. To my chagrin I get to the salesforce.com site, and start looking around right there, not too deeply linked,  is <a href="http://blog.sforce.com/sforce/2007/01/apex_and_pure_v.html">Peter Coffee</a>, formerly  a columnist of 18 years at eWeek. He’s just switched jobs! Good luck, Peter!</p>
</p>
  			<a href="jl/blogPost/20070125.html"><h1>EJB DAO &quot;data access layer&quot; spring hibernate persistence</h1></a>
  			<p>25 January 2007</p>
  			<p>
<p>Before Spring/Hibernate/that whole wave came along, I don’t remember being particularly inspired to have persistence and business logic attached to the entities on which that logic acted… In fact, I rather disliked EJB’s entity beans pattern specifically because everything was on the bean itself. Often times it’d be on a SessionBean, and that’s good. But even there, entity beans have basic persistence, removal and lifecycle operations built into it. A Car doesn’t car how it’s persisted, does it?  <br><br>Then along came Rails (the most infamous example of this pattern) and suddenly everything is built into the object itself. And, honestly, I like the pattern there. Everything is static if its an operation that would be done by a DAO in Java. It’s a property if its to be persisted. Simple. You know where you stand. I also like the DAO/domain objects mechanism in modern day Java. <br><br>That said, I’m astonished at how ugly having the DAO functionality built into the domain object can get in Java. <br><br>I ran across some code that has factory methods for returning the entity! Then, as you modify the properties in the entity (mutator by mutator), it writes them to the database! Ugh! Modify 10 properties on the object, and lo 10 update statements fly by your console. <br><br>Furthermore, I’ve gotten used to the idea that you can have an interface defining a contract and then an implementation of that DAO’s interface. You can hide that implementation (especially with Spring) behind its contract through any number of remoting technologies, simple base casts and more in a local call, and more. You don’t have to include the accessor / mutators in the interface, too. That’s pretty remarkable.</p>
</p>
  			<a href="jl/blogPost/20070124.html"><h1>Archy - a maven archetype aggregator, and the 10 minute test your project so richly deserves</h1></a>
  			<p>24 January 2007</p>
  			<p>
<p>I just found a tool called <a href="https://www.twdata.org/projects/archy">"archy"</a>!<br><br>I have archetype-fever. I’m not ashamed of it. Long have I lusted over toolset x but not had the inner strength or resolve to spend the night setting up an ant build that MIGHT  one day be integrated into my workflow, let alone quick enough for a 5 minute test. Maven archetypes make the agile “10 minute test” a possibility. Java’s robbed open source projects of their 10 minute tests by being so complicated to bootstrap. With installation and compilation the norm, configuration is par for the course. Who has time? Who has more than 10 minutes, anyway?<br><br>A really polished project will have some sort of installation mechanism. But often times, it’s non standard, or half-assed. Download Tomcat for Windows and be received with a windows installer with all the bells and whistles. Download it for linux and…look forward to configuring a few things..<br><br>If you’ve got a project that’s a webapplication and you’ve got an installation process, then that’s impressive! Tigris.org’s Scarab, for example, has an installer. That’s not to say that there’s no configuration at all,  What’s more, in Scarab’s case, I definitely would have preferred some documentation and a few bug fixes in lieu of that installer!<br><br>Archetypes give the project the spotlight and take care of the minutiae. This is why, unless it’s <i>very</i> exotic (J2ME and Jini spring to mind! A proposito: has any one found a useful maven 2 plugin for J2ME or GWT?), I wait for the archetype. Simply add the archetype’s repository to ~/.m2/settings.xml and run that familiar invocation, “mvn archetype:create …”.  Voilà, out pops a working project. You invoke mvn idea:idea at the root and off you go building a new application!<br><br>So fine, maven archetypes are amazing. Though, now you’re where you started, in a sense, aren’t you? Not quite as bad, but bad. You have to know where the archetypes are for them to be of any use to you!  You could easily spend the time just looking for a way to avoid getting invested too much into some technology without a result.<br><br>That’s where archy comes in. It has a centralized listing of archetypes and their corresponding repositories and a command line interface to guide you through using any of them.  It reads from <a href="http://docs.codehaus.org/display/MAVENUSER/Archetypes+List">this Wiki page</a>, and it reads from archetypes.xml, on the local classpath. There doesn’t seem to be an easy to use way to expand that, though. I suppose you could just author your own archetypes.xml and put that on the root of classpath and it would resolve that, instead. I haven’t perused the source itself, so I don’t know.  I’ll certainly get into it as I add more archetypes to my arsenal.    Here are a few of note: <a href="http://appfuse.org/display/APF/AppFuse+QuickStart#AppFuseQuickStart-create">Matt Raible's Appfuse</a>, and a <a href="http://www.lunarlogic.com/blog/show/maven_archetype_for_jboss_seam">JBoss Seam archetype</a>.</p><span style="font-weight: bold;">Update: </span>I just found <a href="http://pyx4me.com/" target="_blank">Pyx4me.com</a>, which, among MANY other golden nuggets, seems to have a working Maven 2/J2ME plugin. Goodbye kludgy old Maven 1 / Antenna wrapper! I hope!<br>
</p>
	
	<hr />
	
	<p>Older posts are available in the <a href="archive.html">archive</a>.</p>

		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">&copy; 2014 | Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.1.1</a> | Baked with <a href="http://jbake.org">JBake v2.4.0</a></p>
      </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/prettify.js"></script>
    
  </body>
</html>